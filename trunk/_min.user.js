// ==UserScript==
// @name           Castle Age Autoplayer
// @namespace      caap
// @description    Auto player for Castle Age
// @version        140.24.1
// @dev            47
// @require        http://castle-age-auto-player.googlecode.com/files/jquery-1.4.4.min.js
// @require        http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js
// @require        http://castle-age-auto-player.googlecode.com/files/farbtastic.min.js
// @require        http://utility-js.googlecode.com/files/utility-0.1.0.min.js
// @include        http*://apps.*facebook.com/castle_age/*
// @include        http://web3.castleagegame.com/castle_ws/*
// @include        http*://*.facebook.com/common/error.html*
// @include        http*://apps.facebook.com/sorry.php*
// @include        http*://apps.facebook.com/reqs.php#confirm_46755028429_0
// @license        GPL version 3 or any later version; http://www.gnu.org/copyleft/gpl.html
// @compatability  Firefox 3.0+, Google Chrome 4+, Chromium 4+, Flock 2.0+, Opera 11+, Safari 5+, IE 9+
// ==/UserScript==
(function(){function e(ia){throw ia;}var f=true,ea=null,M=false;
(function(){function ia(b){if(typeof console.log!=="undefined")console.log(ja+(ma?"d"+ma:"")+" |"+(new Date).toLocaleTimeString()+"| "+b)}function oa(b){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",b);(document.head||document.getElementsByTagName("head")[0]).appendChild(c)}function ra(){if(window.utility){ia("utility ready ...");i(a.start).ready()}else{ia("Waiting for utility ...");window.setTimeout(ra,100)}}function sa(){if(window.jQuery.farbtastic){ia("farbtastic ready ...");
if(!window.utility){ia("Inject utility.");oa("http://utility-js.googlecode.com/files/utility-0.1.0.min.js")}ra()}else{ia("Waiting for farbtastic ...");window.setTimeout(sa,100)}}function ta(){if(window.jQuery.ui){ia("jQueryUI ready ...");if(!window.jQuery.farbtastic){ia("Inject farbtastic.");oa("http://castle-age-auto-player.googlecode.com/files/farbtastic.min.js")}sa()}else{ia("Waiting for jQueryUI ...");window.setTimeout(ta,100)}}function ua(){if(window.jQuery){ia("jQuery ready ...");i=window.jQuery.noConflict();
if(!window.jQuery.ui){ia("Inject jQueryUI.");oa("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js")}ta()}else{ia("Waiting for jQuery ...");window.setTimeout(ua,100)}}var ja="140.24.1",ma="47",va=0,ha={},n={},j={},pa={},J=ea,ka=ea,ca={},u={},x={},p={},E={},V={},I={},Q={},S={},q={},D={},a={},i={};String.prototype.stripCaap=String.prototype.qb=function(){return this.replace(/caap_/i,"")};String.prototype.numberOnly=String.prototype.R=function(){return parseFloat(this.replace(RegExp("[^\\d\\.]",
"g"),""))};String.prototype.parseTimer=String.prototype.Cb=function(){var b=[],c=0,d=0,g=0;b=this.split(":");d=0;for(g=b.length;d<g;d+=1)c=c*60+parseInt(b[d],10);if(isNaN(c))c=-1;return c};ha={header:"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",
Hh:"iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAK3RFWHRDcmVhdGlvbiBUaW1lAHZyIDE0IGp1bCAyMDA2IDEzOjMxOjIzICswMTAwHvJDZwAAAAd0SU1FB9YHDgsgJYiZ4bUAAAAJcEhZcwAALiIAAC4iAari3ZIAAAAEZ0FNQQAAsY8L/GEFAAAB5ElEQVR42q2Tz0sqURTH72Qq4mASSAoSIfSDdCEI8qJFLXSjLYSQNoGLINrI8/0ZD9q0KnDlKkIMebmP9xZRCEEiLQLBiMiNJDYq/Zg573vpCkM6CdGBD3Pn3OvXe77nDGPfENKwJBHx/CxYAtNAAVfgXJKk7khVCCyCP6ALVKAJXkEdbINxw5tgM4HHPphSFEUql8usXq8zWZZZKBRiPp+PH3sBx2Br4FbiBg+aplGxWKRgMPiMH1+YTKZDq9V64na7G+l0mprNJo7RG/g94IEoQSsUCuRyue6QToIJYAJWMA/Bo2QySZ1Ohws9gZBeZI570Gq1yO/395BKGJg+ZbFYznK5HAmf9vQiKW5iqVQim832Fyn5E+83Y7EYieAdY2Nig7dRqtVqrNfr3YiWGsVltVrtr2f0IrwEZrfbGeqWhQ9GMeFwOPprRS9SAWo4HGZOp/MH1l4DAS6+HolE+u9Xek9kcK+qKqVSKUL/s0hPDhFY83g8j5VKhcQg7nxs80/w0mg0KB6Pa2az+RTpDbDA3sd/lwvk8/l+Z7iS/FHEAor8H9rtNmWzWYpGo+T1eikQCFAmkyFxAy7AJ255aMHYcIID8d1oNBi8hGuwwkYFDq0CPlG3YsTb4B/4BRwjBb4S/wGzT16tu5THiAAAAABJRU5ErkJggg==",
Ih:"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",
wheel:"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",
We:"/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAVQAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgEBAQEBAgEBAgMCAQIDAwICAgIDAwMDAwMDAwQDBAQEBAMEBAUGBgYFBAcHCAgHBwoKCgoKDAwMDAwMDAwMDAECAgIEAwQHBAQHCggHCAoMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAFgAWAwERAAIRAQMRAf/EAIQAAQADAQAAAAAAAAAAAAAAAAgFBgcJAQEBAQAAAAAAAAAAAAAAAAAGBwUQAAEEAQMCBAQHAAAAAAAAAAIBAwQFBhESBxMIACExCXEjFBZBUYEiMhUYEQABAgMFBwEJAAAAAAAAAAABEQIAAwQxQVESBfAhYYHBEwYikaGx0eEyQiMU/9oADAMBAAIRAxEAPwDmv2BdhuJ8oYbZ9yXcRauVnE8Ga1V1rGiuP2VlKNehEjtuIQKSj8xwzEgbb0XQiJNmxomlirnS5btwcQpwC7zBzyjW36dSTp8oZnsY4taSmZwBIC4G+EbcUPt45C9I4pzfAr3Ha2OZ1p5PW3y2zjDrZK0Ug62fHRhQ3Ju2t7SRPRdfCSt8TdLLmscHISACEsOOPKDekeYf0yJU57cudjXFDYSATyXjBwyP2x52J99uPdu0/IIw8Q5THk30LKjfkDXLSxa1+7KaJISuq0saKZI2pIe4Sb3aojijnUiTA1LSiXrhDltcDKL1sCrwjY+OLn729uHDX8KLqMYdcynsgYY8ya+uiR47EoxTz2g7GJlS9EX4+FXjE1oel7mhOV22EEvKJLnDfvAJXnt74jcx5Hhcg4+w/OKJCyaPMluN18JohOQ3KGMoqKCiqZK4JqpEuqr5J+SOaiszENeircMdr4m+laN/C89vM5pa0KSqZV9gQhAIunPVVe22e8GdvcRVPmerxe+CVDRfnip0l1YpAX8eoLL4N7PXU9PE+dVSxXib+Jf0ResU+XTzDQOZfl6gp0gn+3pcd5mO5bYTO22n+4cYUpCWsN+TFiQ0aRNX1dcslbY6W3Tf1EUPgvn4OUjpgHpCjayE1e2UfvKQj7LmHlSwmRoXFnEmOQuYPr4SwZVNb4sMj+wGSKtJFVq1lj+400Xptaaa66J436mZW9v9jX5eNnP6wcp5VD3PQ9q8Afl8IKE+d3l/7Hg29vCe/wBKdZw6qqMz6nU3H1AA0P8Alpv1VXN2v6J4PudM7gJG+EzWyu0QD6Y//9k=",
tg:"/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAVQAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgEBAQEBAgEBAgMCAQIDAwICAgIDAwMDAwMDAwQDBAQEBAMEBAUGBgYFBAcHCAgHBwoKCgoKDAwMDAwMDAwMDAECAgIEAwQHBAQHCggHCAoMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAFgAWAwERAAIRAQMRAf/EAIUAAQADAAAAAAAAAAAAAAAAAAgFBgkBAAIDAQEAAAAAAAAAAAAAAAMEAgUGCAcQAAIBAgUCBAUFAAAAAAAAAAIDAQQFERITBggAByExQSJRMkIUFVIjZBYXEQACAQIFAgQFBQAAAAAAAAABAhESAwAhMQQFQRNRYYEicbEyFAbwoWIjM//aAAwDAQACEQMRAD8Ax8438d29wjdu3dD2qsYMzE0gmoFYMJ0KEEm1Qte6UHkEigREZIsfbE0fIcglgVXJW2CAzAaE+PgvQkdT0x6V+Ifh1/lXO32YS5vWtm5btOYqVTogOT3SJZUYgFBPuJACRsvFzsjv3bNSior7tZ6dITjcbgduuNMJeQ6lGqioiwmfDBTRKPSZ6LuxttraN92pUdQT6RrM9BnOEfx61zXO79OK2lvvXnJHbZFAEfVVkO2FzqaVpjUHBzruIO+rZyIoez00tQR3NTqmKSXMGAWigi7SzUn3SiaaIdE4Z8mMYZ46gN45slipqC1RAqI+ExVHSdY+GD3PxvajlF263rRtG6bTNW3aW4Mge5TV2SxBDxNAbwqKC4m2zb28OOz3JcoTtLkXOsUbAURU50aLXmGTmMZXU0RjMfFgfrjGQvLasXKwDBMg9ZMgddQchGemFbexvbzlNt9u7IXS2VdRmlCBS2qwEZDU0ikAnFjud/RtSoXCCL7EDJtMFVEQxjYnT/eGZGBMZjwzeXr7sMcptbBsOl26pNoFqEJ/ygwS2RyHrRoJGeOgOc5teV2252WzvLb37JaG63KIAd8GQsEswwILQCR7fuACzUkBTEdx91VNbyK7f0tO2B3zT2+sQ0dSIYTEWq7VRozep5K9SMPPPiHnGHW1ZgdwCOimfUiPkccyWbbJx1xWBl7qBRGpRXqy8q1Hrgz8Tbh35s28qR3au3KvNIy6iu3076impZXcp8c9K24RpxMBhq5wJWXDUj5eg7hUa4sEB8tRI8p89YzB1jDvGXdym1cMjNYNU0mGAyrIifZ9NYZSmkw0HCY333B5CtRWJqNg20N1gp8vMLntVZlgM6mmxVVUCRT/AB1Ac/TMT0ZjfIg0geOZ/Yx88JWk49HDI152kQoVVMzlDAuZnSFnwwTKur71/wC00l2u1LR/277QnWu1uJf4/wDH6ZyalHJ6eXT1ImYZnz4+Op0qq2OwVU+3qf10iOkR5Yttxf5D7+3cuW/7M6FkzMmQDNXcqmc+53P5QMf/2Q==",
Wf:"/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAVQAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgEBAQEBAgEBAgMCAQIDAwICAgIDAwMDAwMDAwQDBAQEBAMEBAUGBgYFBAcHCAgHBwoKCgoKDAwMDAwMDAwMDAECAgIEAwQHBAQHCggHCAoMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAFgAWAwERAAIRAQMRAf/EAIIAAQEBAAAAAAAAAAAAAAAAAAgHCQEBAQEBAQAAAAAAAAAAAAAABgUHAAEQAAAGAQQCAQMFAAAAAAAAAAECAwQFBhESFQcIExQAISJCMTJDFwkRAAIBAgQEAgkFAQAAAAAAAAECERIDACExQVFxBAVhIoGRoTJCghMjFLHB0WJyBv/aAAwDAQACEQMRAD8AzJ6k9Y4NoyjbjdEkH3Is4VOWab22NJR9fjnay6UaIRah0038pImbKKoJOR9VFsBVVCqisQqZrunXMtp7izRbgGDBZiQIDfConMjOZAiM7fbeiF66ttjBYEyRIUAEzGUkxkCQNJ1yc/Kf+fPaCj8Zq2nmKaO64y0kK9jJlnVJ2Oik1FCoFM4im0LGlImJjgBhjXRFUw+pDDjPwB03/UIbp+2sf1Zww+ZiQ/JlUHDBux2bgCI7hjAlghUk8VEFB4hnIwIbB0WbxPaev16Cr/u1aWfPYWbpyk46RjYuWaxm8IrbvoO6Ug3LUSvkjYK6MgRdvq86XmNpyNdJbp2YBxBDRqvGNKhmDtMGIMYAmiBdA8u4nQ8J4e3UbTi9cIPYKTbxHJrUFHVfjUqBc1SMkvIopBs61C1V0oQgCAmTZyVeetFMftNgPzDMbrrVfbr1uCWVmmP91A8oIPLFbtrR1tsggVLAnIe4VieM5DacLLsNz7ykXiezueUeWIud6vyDCYLxc2iW5d7n3E4r5kkpEchpJEBlMpvp+oasGDHzMbHRWiyhLbfUMBtx8vEvr4csK+nN9bpLMKUk55RB+LgF08ecYIk7aXZX7FBY5k7i+eQ0MxQNgFnMhA123ykggXIhlVu2srFAxQyOtYpMZyAbTd83VoB8KNPzFY9dJ9WM9TKyxO7CPRM/qMHfo3Y+0FdYxbKp1t3ZeOJCWlkau4hpJpFzca9K1SNLrx6r9JwmaPFHwg/I7bKMjfYBxTVEhw8uJVemy1NwATlII2q0z1jMHmMscphPuCUnLYg7x++UenFxczYtJh+9r8bNS1z1a9pjWdGgTisQfvIwlAnp9IFDH/JrHicTY0AQcYgdvNs9S30BbFwznLEDjQCFHOlvZhF3H8n8Vfr1G2I2UE5eWsgltPdqGDZcrl2B/vqoXq9VGI2ba3i9JpKztbatt8rsjtBB0m99rc/a85jmM4973cfzaC/Ltq0lLojNXUKmjzVZRlGmm1NPhOD7s0hmApjIbR/PpmfHH//Z",
Ze:"/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAVQAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgEBAQEBAgEBAgMCAQIDAwICAgIDAwMDAwMDAwQDBAQEBAMEBAUGBgYFBAcHCAgHBwoKCgoKDAwMDAwMDAwMDAECAgIEAwQHBAQHCggHCAoMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAFgAWAwERAAIRAQMRAf/EAIUAAQEAAAAAAAAAAAAAAAAAAAgJAQACAgMAAAAAAAAAAAAAAAAEBgEDBQcIEAABBAEEAgECBwAAAAAAAAADAQIEBQYREhMHFAgAMhUxIkJjFhcJEQACAQIEAwUFCQEAAAAAAAABAhESAwAhMQRBYQVRsSJSE/BxwdFCgZGh4fEyYhQVBv/aAAwDAQACEQMRAD8AlB6l+qd/2bJNdtiksLgYfvEhxI6zh1sIpnjitHCK8Y5M6VxuINhl4hhTe5pFe1rVjqPVrNpgL9z0rc0z5miSJ+kDidZykRmJf3ABhmhZj3n4YSOG+tNH2/HPhzbW8iSxo8T0vQ01rXhc38qoesZWQVG1FTRfHKN7f0rr8I3O32O2tf2HahfPUeOmcmqeAznsxLJbQVTHOT7HBnsfT3IYHs5XdUQa5TOnzT082mfOmDgxZQQeaOSkvjWS+tKDSSxdqHUbSC15Gciir1pDtjca4AoAYPTqsxNPmGYIiJgxBjELufASW4TPKezt/XDA/wAsJCZDdBHjUmMMzn1VhOSWJxmkqT4/X0vI1jCCVeCfTHjKuujXqmv1Jqt/9jt7b9FveoGLWnY5EAyWMEyDkQ4J5YD3yg2GnVSe/wCRxQCwh+tcrL+wca6zHHh91QYsCTey5bHFjkcQGg3I1j2aoxdqG2qi7tNV1+aFf/UTabS5uyx2rM1ABg658Dmc6ZnKYywun1giF/2GY9u7E0Mwz+2me0+NWEcoG9gjdHiOaqKgiz4NfkdocCN13KogXEYKs13akRn1Jp86du9LtMibMA0LYZT5oakDlJpPKRhsNkGLY0Cn8Y+WDF6c2Ps3VZTXh6XrJ9uSTPmso34/KSHaxZCMGs0kV5RkasZW8SSUOJ8dV2I7a/a5COqpt2W4bjAAJ46hKFP56c4ghveMWbhUJaSBlnOkc/hxwprjK/cYtrbgxnHLB3ao48tbv+ONx+BcFCip5SOlBubZUVXablFDRyr+G1dPgO7ey21tC8thbMrQSaln6KRC/Z4tNcpxU8FBVSFyjiOUCB34Gdzc9x/3DUZDkNRF+6eOYlBQEMfh4+cqGGMrTc/mc/IrlUvk+R+5tT5mbVpaXRGauoVNHiqyjKNNOFNPKcEKgggEzOZ4z935Rj//2Q==",
gf:"/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAVQAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgEBAQEBAgEBAgMCAQIDAwICAgIDAwMDAwMDAwQDBAQEBAMEBAUGBgYFBAcHCAgHBwoKCgoKDAwMDAwMDAwMDAECAgIEAwQHBAQHCggHCAoMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAFgAWAwERAAIRAQMRAf/EAGsAAQEAAAAAAAAAAAAAAAAAAAgJAQEBAQAAAAAAAAAAAAAAAAABAgMQAAEDAgUCBAYDAAAAAAAAAAIBAwQFBhESEwcIABQxIhUJIUEyQmIWM0QXEQEBAQADAAAAAAAAAAAAAAABABEhQQL/2gAMAwEAAhEDEQA/AI58ethnb+kS7muKYUSgQybdmTnm+67dJJuJGjx4zhgD0p9GjNEcXTbbTOSEpCPUgZUtQmkeyg5upxKp3J7ba7JFZ20lNKNZkxKhT6y9bcgSVsm6zRXKZAJsRVMSKM6mAqhCuCoqmkQKkcMNzInKuPxvbZYW5Jb5xXAOe8FLBoI3qQzxl4K6UE4grJT4auQTb/kHFVCRml7Hd+bQ29cb8vda2ot47bNSDC8qBLjsSXDoNaokOjJPjg+ipnhS6caIqYKhYChCpovQmkdyZ5Pcsmvbkvxqwfb8u+3K9wfuejzQl0ZuSFWkTptRh+nzv2lpQizYzzSGgxQzNoIj5kVVLqPPnGVgPflyy6tyusymwHsLzp1DKmzFzojpyW6XXagUfH5ugxUWW8vjmPL4ph1qwR64hv8AJWDudETjzHkzrncfmDC9MeBh5oEbRZhEUsCY7XTypISQCsYYZsFyr0DxKSOu+8eXs15+E1alIj30KFqSaa5bLEwzRP67hVWe1qL9uhHQsfowXp2MiJJlbpf6jGqVRjJ+4ec6fTiORn1O4LOAGha3caubFVPV1fzwToWcv//Z"};
window.caap=ha;ha.Ambrosia=ha.We;ha.Malekus=ha.tg;ha.Corvintheus=ha.Wf;ha.Aurora=ha.Ze;ha.Azeron=ha.gf;n={options:{},load:function(){try{n.options=J.getItem("config.options","default");if(n.options==="default"||!i.isPlainObject(n.options))n.options=J.setItem("config.options",{});$u.log(5,"config.load",n.options);return f}catch(b){$u.error("ERROR in config.load: "+b);return M}},save:function(){try{J.setItem("config.options",n.options);$u.log(5,"config.save",n.options);return f}catch(b){$u.error("ERROR in config.save: "+
b);return M}},setItem:function(b,c){try{if(!$u.isString(b)||b==="")e("Invalid identifying name!");$u.isDefined(c)||e("Value supplied is 'undefined' or 'null'!");n.options[b]=c;n.save();return c}catch(d){$u.error("ERROR in config.setItem: "+d)}},getItem:function(b,c){try{var d;if(!$u.isString(b)||b==="")e("Invalid identifying name!");d=n.options[b];if(!$u.isDefined(d)&&$u.isDefined(c))d=c;$u.isDefined(d)||$u.warn("config.getItem returned 'undefined' or 'null' for",b);return d}catch(g){$u.error("ERROR in config.getItem: "+
g)}},ab:function(b,c){try{var d=[];if(!$u.isString(b)||b==="")e("Invalid identifying name!");return d=n.getItem(b,c).toArray()}catch(g){$u.error("ERROR in config.getArray: "+g)}},deleteItem:function(b){try{if(!$u.isString(b)||b==="")e("Invalid identifying name!");$u.isDefined(n.options[b])||$u.warn("config.deleteItem - Invalid or non-existant flag: ",b);delete n.options[b];return f}catch(c){$u.error("ERROR in config.deleteItem: "+c);return M}}};j={kb:{},load:function(){try{j.kb=J.getItem("state.flags",
"default");if(j.kb==="default"||!i.isPlainObject(j.kb))j.kb=J.setItem("state.flags",{});$u.log(5,"state.load",j.kb);return f}catch(b){$u.error("ERROR in state.load: "+b);return M}},save:function(b){try{if(!b)if(!u.aa("StateSave"))return M;J.setItem("state.flags",j.kb);$u.log(5,"state.save",j.kb);u.setItem("StateSave",1);return f}catch(c){$u.error("ERROR in state.save: "+c);return M}},setItem:function(b,c){try{if(!$u.isString(b)||b==="")e("Invalid identifying name!");$u.isDefined(c)||e("Value supplied is 'undefined' or 'null'!");
j.kb[b]=c;j.save();return c}catch(d){$u.error("ERROR in state.setItem: "+d)}},getItem:function(b,c){try{var d;if(!$u.isString(b)||b==="")e("Invalid identifying name!");d=j.kb[b];if(!$u.isDefined(d)&&$u.isDefined(c))d=c;$u.isDefined(d)||$u.warn("state.getItem returned 'undefined' or 'null' for",b);return d}catch(g){$u.error("ERROR in state.getItem: "+g)}},deleteItem:function(b){try{if(!$u.isString(b)||b==="")e("Invalid identifying name!");$u.isDefined(j.kb[b])||$u.warn("state.deleteItem - Invalid or non-existant flag: ",
b);delete j.kb[b];return f}catch(c){$u.error("ERROR in state.deleteItem: "+c);return M}}};pa={Ce:function(){try{i('link[href*="jquery-ui.css"]').length||i("<link>").appendTo("head").attr({rel:"stylesheet",type:"text/css",href:"http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/smoothness/jquery-ui.css"});i("<style type='text/css'>"+pa.farbtastic+"</style>").appendTo("head");i("<style type='text/css'>"+pa.nc+"</style>").appendTo("head");return f}catch(b){$u.error("ERROR in AddCSS: "+b);return M}},
nc:".caap_ff {font-family: 'Lucida Grande', tahoma, verdana, arial, sans-serif;}.caap_fs {font-size: 10px;}.caap_fn {font-size: 11px;}.caap_ww {width: 100%;}.caap_in {padding-left: 5%;}.caap_tr {text-align: right;}",farbtastic:".farbtastic {position: relative;}.farbtastic * {position: absolute; cursor: crosshair;}.farbtastic, .farbtastic .wheel {width: 195px; height: 195px;}.farbtastic .color, .farbtastic .overlay {top: 47px; left: 47px; width: 101px; height: 101px;}.farbtastic .wheel {background: url(data:image/png;base64,"+
ha.wheel+") no-repeat; width: 195px; height: 195px;}.farbtastic .overlay {background: url(data:image/png;base64,"+ha.Ih+") no-repeat;}.farbtastic .marker {width: 17px; height: 17px; margin: -8px 0 0 -8px; overflow: hidden; background: url(data:image/png;base64,"+ha.Hh+") no-repeat;}"};ca={order:function(){this.data={reverse:{a:M,b:M,c:M},value:{a:"",b:"",c:""}}},dialog:{},form:function(b,c,d){try{var g="",h=0,l=0,m=0;if(!ca.dialog[b]||!ca.dialog[b].length){c.unshift("");g+="<p>Sort by ...</p>";for(h=
0;h<3;h+=1){g+="<div style='padding-bottom: 30px;'>";g+="<div style='float: left; padding-right: 30px;'>";g+="<form id='form"+h+"'>";g+="<input type='radio' id='asc"+h+"' name='reverse' value='false' checked /> Ascending<br />";g+="<input type='radio' id='des"+h+"' name='reverse' value='true' /> Descending";g+="</form>";g+="</div>";g+="<div>";g+="<select id='select"+h+"'>";l=0;for(m=c.length;l<m;l+=1)g+="<option value='"+c[l]+"'>"+c[l]+"</option>";g+="</select>";g+="</div>";g+="</div>";if(h<2)g+=
"<p>Then by ...</p>"}ca.dialog[b]=i('<div id="sort_form_'+b+'" title="Sort '+b+'">'+g+"</div>").appendTo(window.document.body);ca.dialog[b].dialog({buttons:{Sort:function(){ca.nh(b,d);i(this).dialog("close")},Cancel:function(){i(this).dialog("close")}}})}else ca.dialog[b].dialog("open");ca.Vb(b);return f}catch(k){$u.error("ERROR in sort.form: "+k);return M}},nh:function(b,c){try{var d=new ca.order;if(ca.dialog[b]&&ca.dialog[b].length){d.data.reverse.a=i("#form0 input[name='reverse']:checked",ca.dialog[b]).val()===
"true"?f:M;d.data.reverse.b=i("#form1 input[name='reverse']:checked",ca.dialog[b]).val()==="true"?f:M;d.data.reverse.c=i("#form2 input[name='reverse']:checked",ca.dialog[b]).val()==="true"?f:M;d.data.value.a=i("#select0 option:selected",ca.dialog[b]).val();d.data.value.b=i("#select1 option:selected",ca.dialog[b]).val();d.data.value.c=i("#select2 option:selected",ca.dialog[b]).val();c.sort($u.sortBy(d.data.reverse.a,d.data.value.a,$u.sortBy(d.data.reverse.b,d.data.value.b,$u.sortBy(d.data.reverse.c,
d.data.value.c))));j.setItem(b+"Sort",d);j.setItem(b+"DashUpdate",f);a.na(f)}else $u.warn("Dialog for getForm not found",b);return d.data}catch(g){$u.error("ERROR in sort.getForm: "+g)}},Vb:function(b){try{var c=new ca.order;if(ca.dialog[b]&&ca.dialog[b].length){i.extend(f,c.data,j.getItem(b+"Sort",c));i("#form0 input",ca.dialog[b]).val([c.data.reverse.a]);i("#form1 input",ca.dialog[b]).val([c.data.reverse.b]);i("#form2 input",ca.dialog[b]).val([c.data.reverse.c]);i("#select0",ca.dialog[b]).val(c.data.value.a);
i("#select1",ca.dialog[b]).val(c.data.value.b);i("#select2",ca.dialog[b]).val(c.data.value.c)}else $u.warn("Dialog for updateForm not found",b,ca.dialog[b]);return f}catch(d){$u.error("ERROR in sort.updateForm: "+d);return M}}};u={timers:{},load:function(){try{u.timers=J.getItem("schedule.timers","default");if(u.timers==="default"||!i.isPlainObject(u.timers))u.timers=J.setItem("schedule.timers",{});$u.log(5,"schedule.load",u.timers);return f}catch(b){$u.error("ERROR in schedule.load: "+b);return M}},
save:function(){try{J.setItem("schedule.timers",u.timers);$u.log(5,"schedule.save",u.timers);return f}catch(b){$u.error("ERROR in schedule.save: "+b);return M}},setItem:function(b,c,d){try{var g=0;if(!$u.isString(b)||b==="")e("Invalid identifying name! ("+b+")");if(!$u.isNumber(c)||c<0)e("Invalid number of seconds supplied for ("+b+") ("+c+")");if(!$u.isNumber(d)||d<0)d=0;g=(new Date).getTime();u.timers[b]={last:g,next:g+c*1E3+Math.floor(Math.random()*d)*1E3};u.save();return u.timers[b]}catch(h){$u.error("ERROR in schedule.setItem: "+
h)}},getItem:function(b){try{if(!$u.isString(b)||b==="")e("Invalid identifying name! ("+b+")");if(!i.isPlainObject(u.timers[b])){$u.warn("Invalid or non-existant timer!",b);return 0}return u.timers[b]}catch(c){$u.error("ERROR in schedule.getItem: "+c)}},deleteItem:function(b){try{if(!$u.isString(b)||b==="")e("Invalid identifying name! ("+b+")");i.isPlainObject(u.timers[b])||$u.warn("schedule.deleteItem - Invalid or non-existant timer: ",b);delete u.timers[b];return f}catch(c){$u.error("ERROR in schedule.deleteItem: "+
c);return M}},aa:function(b){try{var c=M;if(!$u.isString(b)||b==="")e("Invalid identifying name! ("+b+")");if(i.isPlainObject(u.timers[b])){if(u.timers[b].next<(new Date).getTime())c=f}else{$u.get_log_level>2&&$u.warn("Invalid or non-existant timer!",b);c=f}return c}catch(d){$u.error("ERROR in schedule.check: "+d);return M}},ya:function(b,c){try{var d=0;if($u.isNaN(b)){if(!$u.isString(b)||b==="")e("Invalid identifying name! ("+b+")");if(i.isPlainObject(u.timers[b]))d=u.timers[b].last;else $u.get_log_level>
2&&$u.warn("Invalid or non-existant timer!",b)}else d=b;return d<(new Date).getTime()-1E3*c}catch(g){$u.error("ERROR in schedule.since: "+g);return M}},ld:function(b){try{if(!j.getItem("reset"+b)&&!u.aa(b+"Timer"))return M;u.setItem(b+"Timer",60);j.setItem("reset"+b,M);return f}catch(c){$u.error("ERROR in schedule.oneMinuteUpdate: "+c)}},fi:"D d M g:i A",gi:"D d M H:i",Wh:"D g:i A",Xh:"D H:i",gc:function(b){return n.getItem("use24hr",f)?b?u.Xh:u.gi:b?u.Wh:u.fi},display:function(b){try{var c="";if(!$u.isString(b)||
b==="")e("Invalid identifying name!");if(i.isPlainObject(u.timers[b]))c=$u.makeTime(u.timers[b].next,u.gc(f));else{$u.get_log_level>2&&$u.warn("Invalid or non-existant timer!",b);c=$u.makeTime(new Date,u.gc(f))}return c}catch(d){$u.error("ERROR in schedule.display: "+d);return M}}};x={k:[],ha:[],ta:function(){this.data={name:"",img:"",lvl:0,last:(new Date).getTime()-864E5,special:"",atk:0,def:0,api:0,dpi:0,mpi:0,eatk:0,edef:0,eapi:0,edpi:0,empi:0,energyMax:0,staminaMax:0,healthMax:0}},ib:function(){try{var b=
new ca.order;i.extend(f,b.data,j.getItem("GeneralsSort",b.data));x.ha=[];i.merge(x.ha,x.k);x.ha.sort($u.sortBy(b.data.reverse.a,b.data.value.a,$u.sortBy(b.data.reverse.b,b.data.value.b,$u.sortBy(b.data.reverse.c,b.data.value.c))));return f}catch(c){$u.error("ERROR in general.copy2sortable: "+c);return M}},hbest:0,load:function(){try{x.k=J.getItem("general.records","default");if(x.k==="default"||!i.isArray(x.k))x.k=J.setItem("general.records",[]);x.ib();x.Bd();x.hbest=x.hbest===M?JSON.hbest(x.k):x.hbest;
$u.log(3,"general.load Hbest",x.hbest);j.setItem("GeneralsDashUpdate",f);$u.log(3,"general.load",x.k);return f}catch(b){$u.error("ERROR in general.load: "+b);return M}},save:function(){try{J.setItem("general.records",x.k,x.hbest,M);j.setItem("GeneralsDashUpdate",f);$u.log(3,"general.save",x.k);return f}catch(b){$u.error("ERROR in general.save: "+b);return M}},find:function(b){try{var c=0,d=0,g=M;c=0;for(d=x.k.length;c<d;c+=1)if(x.k[c].name===b){g=f;break}if(!g){$u.warn("Unable to find 'General' record");
return M}return x.k[c]}catch(h){$u.error("ERROR in general.find: "+h);return M}},bg:function(){try{var b=0,c=0,d=[];b=0;for(c=x.k.length;b<c;b+=1)d.push(x.k[b].name);return d.sort()}catch(g){$u.error("ERROR in general.GetNames: "+g);return M}},Qd:function(b){try{var c=x.find(b);if(c===M){$u.warn("Unable to find 'General' image");c=""}else c=c.img;return c}catch(d){$u.error("ERROR in general.GetImage: "+d);return M}},Rd:function(b){try{var c=x.find(b);if(c===M){$u.warn("Unable to find 'General' stamina");
c=0}else c=c.staminaMax;return c}catch(d){$u.error("ERROR in general.GetStaminaMax: "+d);return M}},Od:function(b){try{var c=x.find(b);if(c===M){$u.warn("Unable to find 'General' energy");c=0}else c=c.energyMax;return c}catch(d){$u.error("ERROR in general.GetEnergyMax: "+d);return M}},qi:function(b){try{var c=x.find(b);if(c===M){$u.warn("Unable to find 'General' health");c=0}else c=c.healthMax;return c}catch(d){$u.error("ERROR in general.GetHealthMax: "+d);return M}},jc:function(b){try{var c=x.find(b);
if(c===M){$u.warn("Unable to find 'General' level");c=1}else c=c.lvl;return c}catch(d){$u.error("ERROR in general.GetLevel: "+d);return M}},Pc:function(){try{var b=0,c=0,d=[];b=0;for(c=x.k.length;b<c;b+=1)x.k[b].lvl<4&&d.push(x.k[b].name);return d}catch(g){$u.error("ERROR in general.GetLevelUpNames: "+g);return M}},xb:[],Fc:[],Qc:[],Ec:[],Kc:[],Fb:["Idle","Monster","Fortify","GuildMonster","Invade","Duel","War","SubQuest","Arena"],Bd:function(){try{$u.log(3,"Building Generals Lists");x.xb=["Use Current",
"Under Level 4"].concat(x.bg());var b=function(d){return x.xb.hasIndexOf(d)};x.Fc=["Use Current","Darius","Lucius","Garlan","Penelope"].filter(b);x.Qc=["Use Current","Scarlett","Mercedes","Cid"].filter(b);x.Ec=["Use Current","Aeris"].filter(b);x.Kc=["Use Current","Angelica","Morrigan"].filter(b);return f}catch(c){$u.error("ERROR in general.BuildlLists: "+c);return M}},ic:function(){try{var b="",c="",d=i();if((d=i("#"+a.domain.id[a.domain.which]+"equippedGeneralContainer .general_name_div3"))&&d.length)b=
(c=d.text())?c.trim().stripTRN().replace(/\*/g,""):"";if(!b){$u.warn("Couldn't get current 'General'. Will use current 'General'",b,d);return"Use Current"}$u.log(4,"Current General",b);return b}catch(g){$u.error("ERROR in general.GetCurrent: "+g);return"Use Current"}},ag:function(){try{var b=i(".generalSmallContainer2"),c=M,d=M,g=i();if(b.length){b.each(function(l){var m=new x.ta,k="",o="",r="",s=0,v=0,B=0,G="",A=i(this),w=k=0;if((g=A.find(".general_name_div3"))&&g.length)o=(k=g.text())?k.stripTRN().replace(/\*/g,
""):"";else $u.warn("Unable to find 'name' container",l);if((g=A.find(".imgButton"))&&g.length)r=(k=g.attr("src"))?k.basename():"";else $u.warn("Unable to find 'image' container",l);if((g=A.children().eq(3))&&g.length)s=(k=g.text())?k.replace(/Level /gi,"").stripTRN().parseInt():0;else $u.warn("Unable to find 'level' container",l);if((g=A.children().eq(4))&&g.length){k=(k=g.html())?k.replace(/<br>/g," "):"";G=(k=i(k).text())?k.trim():""}else $u.warn("Unable to find 'special' container",l);if((g=A.find(".generals_indv_stats_padding div"))&&
g.length===2){v=(k=g.eq(0).text())?k.parseInt():0;B=(k=g.eq(1).text())?k.parseInt():0}else $u.warn("Unable to find 'attack and defence' containers",l);if(o&&r&&s&&!$u.isNaN(v)&&!$u.isNaN(B)&&G){k=0;for(w=x.k.length;k<w;k+=1)if(x.k[k].name===o){m.data=x.k[k];break}m.data.name=o;m.data.img=r;m.data.lvl=s;m.data.atk=v;m.data.def=B;m.data.api=(v+B*0.7).dp(2);m.data.dpi=(B+v*0.7).dp(2);m.data.mpi=((m.data.api+m.data.dpi)/2).dp(2);m.data.special=G;if(k<w)x.k[k]=m.data;else{$u.log(1,"Adding new 'General'",
m.data.name);x.k.push(m.data);c=f}d=f}else $u.warn("Missing required 'General' attribute",l)});if(d){a.p.generals.total=x.k.length;a.p.generals.invade=Math.min((a.p.army.actual/5).dp(),x.k.length);x.save();a.fb();x.ib();c&&x.be()}$u.log(3,"general.GetGenerals",x.k)}return f}catch(h){$u.error("ERROR in general.GetGenerals: "+h);return M}},be:function(){try{var b=0,c=0;x.Bd();$u.log(2,"Updating 'General' Drop Down Lists");b=0;for(c=x.Fb.length;b<c;b+=1)a.Va(x.Fb[b]+"General",x.xb,n.getItem(x.Fb[b]+
"General","Use Current"));a.Va("BuyGeneral",x.Fc,n.getItem("BuyGeneral","Use Current"));a.Va("IncomeGeneral",x.Qc,n.getItem("IncomeGeneral","Use Current"));a.Va("BankingGeneral",x.Ec,n.getItem("BankingGeneral","Use Current"));a.Va("CollectGeneral",x.Kc,n.getItem("CollectGeneral","Use Current"));a.Va("LevelUpGeneral",x.xb,n.getItem("LevelUpGeneral","Use Current"));return f}catch(d){$u.error("ERROR in general.UpdateDropDowns: "+d);return M}},Kd:function(b){try{$u.log(1,"Setting "+b+' to "Use Current"');
n.setItem(b,"Use Current");x.be();return f}catch(c){$u.error("ERROR in general.Clear: "+c);return M}},Lb:function(b){try{var c="",d=M,g=M;c=b?b.replace(/General/i,"").trim():"";if((a.p.staminaT.num>a.p.stamina.max||a.p.energyT.num>a.p.energy.max)&&j.getItem("KeepLevelUpGeneral",M))if(n.getItem(c+"LevelUpGeneral",M)){$u.log(2,"Keep Level Up General");g=f}else $u.warn("User opted out of keep level up general for",c);else if(j.getItem("KeepLevelUpGeneral",M)){$u.log(1,"Clearing Keep Level Up General flag");
j.setItem("KeepLevelUpGeneral",M)}if(n.getItem("LevelUpGeneral","Use Current")!=="Use Current"&&(x.Fb.hasIndexOf(c)||c==="Quest"))if(g||n.getItem(c+"LevelUpGeneral",M)&&a.p.exp.dif&&a.p.exp.dif<=n.getItem("LevelUpGeneralExp",0))d=f;return d}catch(h){$u.error("ERROR in general.LevelUpCheck: "+h)}},qa:function(b){try{var c="",d="",g="",h="",l=x.Lb(b);if(l){b="LevelUpGeneral";$u.log(2,"Using level up general")}c=n.getItem(b,"Use Current");if(!c||/use current/i.test(c))return M;if(!l&&/under level 4/i.test(c)){if(!x.Pc().length)return x.Kd(b);
c=n.getItem("ReverseLevelUpGenerals")?x.Pc().reverse().pop():x.Pc().pop()}(d=x.ic())||a.Xb();g=d;if(c.hasIndexOf(g))return M;$u.log(1,"Changing from "+g+" to "+c);if(a.Q("mercenary,generals","tab_generals_on.gif"))return f;h=x.Qd(c);if(a.Ha(h))return a.Q(h);a.u("Could not find "+c);$u.warn("Could not find",c,h);return n.getItem("ignoreGeneralImage",f)?M:x.Kd(b)}catch(m){$u.error("ERROR in general.Select: "+m);return M}},ve:M,Pd:function(){try{var b=x.ic(),c="",d=0,g=0,h=i(),l=i(),m=M;if(b==="Use Current")return M;
$u.log(2,"Equipped 'General'",b);d=0;for(g=x.k.length;d<g;d+=1)if(x.k[d].name===b)break;if(d>=g){$u.warn("Unable to find 'General' record");return M}if((h=i("#"+a.domain.id[a.domain.which]+"equippedGeneralContainer .generals_indv_stats div"))&&h.length===2){if((l=h.eq(0))&&l.length){c=l.text();x.k[d].eatk=c?c.parseInt():0;if((l=h.eq(1))&&l.length){c=l.text();x.k[d].edef=c?c.parseInt():0;m=f}else $u.warn("Unable to get 'General' defense object")}else $u.warn("Unable to get 'General' attack object");
if(m){x.k[d].eapi=(x.k[d].eatk+x.k[d].edef*0.7).dp(2);x.k[d].edpi=(x.k[d].edef+x.k[d].eatk*0.7).dp(2);x.k[d].empi=((x.k[d].eapi+x.k[d].edpi)/2).dp(2);x.k[d].energyMax=a.p.energyT.max;x.k[d].staminaMax=a.p.staminaT.max;x.k[d].healthMax=a.p.healthT.max;x.k[d].last=(new Date).getTime();x.save();x.ib();$u.log(3,"Got 'General' stats",x.k[d])}else $u.warn("Unable to get 'General' stats")}else $u.warn("Unable to get equipped 'General' divs",h);return x.k[d]}catch(k){$u.error("ERROR in general.GetEquippedStats: "+
k);return M}},$f:function(){try{if(!u.aa("allGenerals"))return M;var b="",c=0,d=0,g="";c=0;for(d=x.k.length;c<d;c+=1)if(u.ya(x.k[c].last,J.getItem("GeneralLastReviewed",24,f)*3600))break;if(c>=d){u.setItem("allGenerals",J.getItem("GetAllGenerals",168,f)*3600,300);$u.log(2,"Finished visiting all Generals for their stats");g=n.getItem("IdleGeneral","Use Current");if(g!=="Use Current"){$u.log(2,"Changing to idle general");return x.qa("IdleGeneral")}return M}if(a.Q("mercenary,generals","tab_generals_on.gif")){$u.log(2,
"Visiting generals to get 'General' stats");return f}b=x.Qd(x.k[c].name);if(a.Ha(b))if(x.ic()!==x.k[c].name){$u.log(2,"Visiting 'General'",x.k[c].name);return a.Q(b)}return f}catch(h){$u.error("ERROR in general.GetAllStats: "+h);return M}},Oh:function(b){try{var c=0,d=M;for(c=x.k.length-1;c>=0;c-=1)if(x.k[c].name&&x.k[c].name===b){d=f;break}return d}catch(g){$u.error("ERROR in general.owned: "+g)}}};p={k:[],ta:function(){this.data={name:"",userId:0,attacked:-1,defended:-1,damage:-1,life:-1,fortify:-1,
time:[],t2k:-1,phase:"",miss:0,link:"",rix:-1,mpool:"",over:"",page:"",color:"",review:-1,type:"",conditions:"",charClass:"",strength:-1,stun:-1,stunTime:-1,stunDo:M,stunType:"",tip:""}},Ob:{},Xa:{battle_monster:{name:undefined,button:undefined},raid:{name:undefined,button:undefined}},info:{Deathrune:{duration:96,pc:f,Oa:1E8,ka:1E6,ga:5,xa:[30,60,90,120,200],Da:[66E5,825E4,99E5,132E5,165E5],Ea:["/graphics/death_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],pd:"attack_monster_button.jpg",
Ei:"attack_monster_button2.jpg",Yc:"button_dispel.gif",wa:"bar_dispel.gif"},"Ice Elemental":{duration:168,pc:f,Oa:1E8,ka:1E6,ga:5,xa:[30,60,90,120,200],Da:[726E4,9075E3,1089E4,1452E4,1815E4],Ea:["/graphics/water_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],pd:"attack_monster_button.jpg",ue:"attack_monster_button2.jpg",Yc:"button_dispel.gif",wa:"bar_dispel.gif"},"Earth Elemental":{duration:168,pc:f,Oa:1E8,ka:1E6,ga:5,xa:[30,60,90,120,200],Da:[66E5,825E4,99E5,132E5,165E5],
Ea:["/graphics/earth_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],pd:"attack_monster_button.jpg",ue:"attack_monster_button2.jpg",Yc:"attack_monster_button3.jpg",wa:"seamonster_ship_health.jpg",zc:"repair_bar_grey.jpg"},Hydra:{duration:168,Oa:1E8,ka:5E5,ga:6,xa:[10,20,50,100,200,300],Da:[134E4,268E4,536E4,147E5,282E5,3752E4],Ea:["/graphics/monster_siege_small"],Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50]},Legion:{duration:168,Oa:1E5,ka:1E3,ga:6,xa:[10,20,40,80,150,300],
Da:[3E3,4500,6E3,9E3,12E3,15E3],Ea:["/graphics/castle_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"seamonster_ship_health.jpg",zc:"repair_bar_grey.jpg"},"Emerald Dragon":{duration:72,ka:1E5,ga:0},"Frost Dragon":{duration:72,ka:1E5,ga:0},"Gold Dragon":{duration:72,ka:1E5,ga:0},"Red Dragon":{duration:72,ka:1E5,ga:0},King:{duration:72,ka:15E3,ga:0},Terra:{duration:72,ka:2E4,ga:0},Queen:{duration:48,ka:5E4,ga:1,xa:[11],Da:[5E5],Ea:["/graphics/boss_sylvanas_drain_icon.gif"]},
Ravenmoore:{duration:48,ka:5E5,ga:0},Knight:{duration:48,ka:3E4,ga:0,pd:"event_attack1.gif",ue:"event_attack2.gif",Yc:ea},Serpent:{duration:72,pc:f,ka:25E4,ga:0,Ta:f,wa:"seamonster_ship_health.jpg"},Siege:{duration:232,nd:f,ka:100,ga:4,xa:[30,50,80,100],Da:[200,500,300,1500],Ea:["/graphics/monster_siege_"],Ba:1},"Raid I":{duration:88,nd:f,ka:50,ga:2,xa:[30,50],Da:[200,500],Ea:["/graphics/monster_siege_"],Ba:1},"Raid II":{duration:144,nd:f,ka:100,ga:2,xa:[80,100],Da:[300,1500],Ea:["/graphics/monster_siege_"],
Ba:1},Mephistopheles:{duration:48,ka:2E5,ga:0},Plains:{Sa:f,ii:f,duration:168,Oa:35E7,ka:1E4,ga:7,xa:[30,60,90,120,200,250,300],Da:[1375E4,175E5,205E5,23375E3,265E5,295E5,3425E4],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2","/graphics/azriel_siege_inferno_2","/graphics/war_siege_holy_smite_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},"Volcanic Dragon":{Sa:f,duration:168,Oa:13E7,ka:4E6,ga:5,xa:[30,60,90,120,200],Da:[7896E3,9982500,
11979E3,15972E3,19965E3],Ea:["/graphics/water_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},"Alpha Volcanic Dragon":{Sa:f,duration:168,Oa:62E7,ka:8E6,ga:7,xa:[30,60,90,120,200,250,300],Da:[2225E4,275E5,325E5,375E5,425E5,475E5,55E6],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2","/graphics/azriel_siege_inferno_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},Wrath:{Sa:f,duration:168,
Oa:6E8,ka:8E6,ga:7,xa:[30,60,90,120,200,250,300],Da:[2225E4,275E5,325E5,375E5,425E5,475E5,55E6],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2","/graphics/azriel_siege_inferno_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},"Alpha Mephistopheles":{Sa:f,duration:168,Oa:6E8,ka:12E6,ga:10,xa:[15,30,45,60,75,100,150,200,250,300],Da:[1905E4,2286E4,2667E4,3048E4,3429E4,381E5,4572E4,4953E4,5334E4,6096E4],Ea:["/graphics/earth_siege_small",
"/graphics/castle_siege_small","/graphics/death_siege_small","/graphics/skaar_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},"Fire Elemental":{Sa:f,duration:168,Oa:35E7,ka:1E6,ga:7,xa:[30,60,90,120,200,250,300],Da:[1475E4,185E5,21E6,2425E4,27E6,3E7,35E6],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2","/graphics/azriel_siege_inferno_2","/graphics/war_siege_holy_smite_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,
20,40,100],wa:"nm_green.jpg"},"Lion's Rebellion":{Sa:f,ii:f,duration:168,Oa:35E7,ka:1E3,ga:7,xa:[30,60,90,120,200,250,300],Da:[1525E4,19E6,215E5,2475E4,275E5,305E5,355E5],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2","/graphics/azriel_siege_inferno_2","/graphics/war_siege_holy_smite_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},Corvintheus:{Sa:f,duration:168,Oa:64E7,ka:3E7,ga:10,xa:[15,30,45,60,75,100,150,200,250,300],Da:[16E6,
192E5,224E5,256E5,288E5,32E6,384E5,416E5,448E5,512E5],Ea:["/graphics/earth_siege_small","/graphics/castle_siege_small","/graphics/skaar_siege_small","/graphics/death_siege_small"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"},"Air Elemental":{Sa:f,duration:168,Oa:63E7,ka:1E6,ga:10,xa:[15,30,45,60,75,100,150,200,250,300],Da:[1625E4,195E5,2275E4,26E6,22925E4,325E5,39E6,416E5,448E5,512E5],Ea:["/graphics/water_siege_small","/graphics/alpha_bahamut_siege_blizzard_2",
"/graphics/azriel_siege_inferno_2","/graphics/war_siege_holy_smite_2"],Ta:f,Ba:5,ua:[0,100,200,500],Ua:[5,10,20,50],Za:[10,20,40,100],wa:"nm_green.jpg"}},load:function(){try{p.k=J.getItem("monster.records","default");if(p.k==="default"||!i.isArray(p.k))p.k=J.setItem("monster.records",[]);j.setItem("MonsterDashUpdate",f);$u.log(5,"monster.load",p.k);return f}catch(b){$u.error("ERROR in monster.load: "+b);return M}},save:function(){try{J.setItem("monster.records",p.k);j.setItem("MonsterDashUpdate",
f);$u.log(5,"monster.save",p.k);return f}catch(b){$u.error("ERROR in monster.save: "+b);return M}},eb:function(b,c){try{if(!$u.hasContent(b)||!$u.hasContent(c)||!c.toLowerCase().hasIndexOf(":"+b))return M;var d=$u.setContent(c.substring(c.indexOf(":"+b)+b.length+1).replace(/:.+/,""),""),g=d.R(),h=M,l=M;if(d&&(/k$/i.test(d)||/m$/i.test(d))){h=/\d+k/i.test(d);l=/\d+m/i.test(d);g=g*1E3*(h+l*1E3)}return g}catch(m){$u.error("ERROR in monster.parseCondition: "+m);return M}},type:function(b){try{var c=[],
d=0;if(!$u.isString(b)){$u.warn("name",b);e("Invalid identifying name!")}if(b==="")return"";c=b.split(" ");$u.log(3,"Words",c);d=c.length-1;if(d>=4)if(c[d-4]==="Alpha"&&c[d-1]==="Volcanic"&&c[d]==="Dragon")return c[d-4]+" "+c[d-1]+" "+c[d];if(c[d]==="Elemental"||c[d]==="Dragon"||c[d-1]==="Alpha"&&c[d]==="Mephistopheles"||c[d-1]==="Lion's"&&c[d]==="Rebellion"||c[d-1]==="Fire"&&c[d]==="Elemental")return c[d-1]+" "+c[d];return c[d]}catch(g){$u.error("ERROR in monster.type: "+g);return M}},getItem:function(b){try{var c=
0,d=0,g=M,h={};if(!$u.isString(b)){$u.warn("name",b);e("Invalid identifying name!")}if(b==="")return"";c=0;for(d=p.k.length;c<d;c+=1)if(p.k[c].name===b){g=f;break}if(g){$u.log(3,"Got monster record",b,p.k[c]);return p.k[c]}else{h=new p.ta;h.data.name=b;$u.log(3,"New monster record",b,h.data);return h.data}}catch(l){$u.error("ERROR in monster.getItem: "+l);return M}},setItem:function(b){try{if(!b||!i.isPlainObject(b))e("Not passed a record");if(!$u.isString(b.name)||b.name===""){$u.warn("name",b.name);
e("Invalid identifying name!")}var c=0,d=0,g=M;c=0;for(d=p.k.length;c<d;c+=1)if(p.k[c].name===b.name){g=f;break}if(g){p.k[c]=b;$u.log(3,"Updated monster record",b,p.k)}else{p.k.push(b);$u.log(3,"Added monster record",b,p.k)}p.save();return f}catch(h){$u.error("ERROR in monster.setItem: "+h);return M}},deleteItem:function(b){try{var c=0,d=0,g=M;if(!$u.isString(b)||b===""){$u.warn("name",b);e("Invalid identifying name!")}c=0;for(d=p.k.length;c<d;c+=1)if(p.k[c].name===b){g=f;break}if(g){p.k.splice(c,
1);p.save();$u.log(3,"Deleted monster record",b,p.k);return f}else{$u.warn("Unable to delete monster record",b,p.k);return M}}catch(h){$u.error("ERROR in monster.deleteItem: "+h);return M}},clear:function(){try{p.k=J.setItem("monster.records",[]);j.setItem("MonsterDashUpdate",f);return f}catch(b){$u.error("ERROR in monster.clear: "+b);return M}},hi:function(b){try{var c=0,d=0,g=0,h=0,l=0,m=0,k=0,o=0,r=0,s=0,v=0,B=0,G=0,A=0,w={},L=0;L=b.phase-1;w=p.info[b.type];c=b.time[0]+b.time[1]*0.0166;d=w.duration-
c;if(!w.ga||!w.Oa)return b.life*d/(100-b.life);h=(100-b.life)/100*w.Oa;l=w.Oa-h;B=0;for(G=w.xa.length;B<G;B+=1){$u.log(5,"s ",B," T2K ",g," hpLeft ",l);if(B<L||b.miss===0){m+=w.Da[B];k+=w.xa[B]}else if(B===L){o=(h-m)/d;r=(k+w.xa[B]-b.miss)/d;$u.log(5,"Attack Damage Per Hour: ",o);$u.log(5,"Damage Done: ",h);$u.log(5,"Total Siege Damage: ",m);$u.log(5,"Time Used: ",d);$u.log(5,"Clicks Per Hour: ",r)}else if(B>=L){s=B===L?b.miss:w.xa[B];v=w.Da[B]+s/r*o;if(l<=v||b.miss===0){g+=l/o;break}g+=s/r;l-=v}}A=
(b.life/(100-b.life)*c).dp(2);g=g.dp(2);$u.log(3,"T2K based on siege: ",$u.minutes2hours(g));$u.log(3,"T2K estimate without calculating siege impacts: ",$u.minutes2hours(A));return g}catch(y){$u.error("ERROR in monster.t2kCalc: "+y);return 0}},oc:{Warrior:["Strengthen","Heal"],Rogue:["Cripple"],Mage:["Deflect"],Cleric:["Heal"],Warlock:["Heal","Deflect"],Ranger:["Strengthen","Cripple"]},sc:function(){try{u.setItem("monsterReview",0);j.setItem("monsterReviewCounter",-3);return f}catch(b){$u.error("ERROR in monster.flagReview: "+
b);return M}},cd:function(){try{p.clear();p.sc();u.setItem("NotargetFrombattle_monster",0);j.setItem("ReleaseControl",f);a.na(f);return f}catch(b){$u.error("ERROR in monster.flagFullReview: "+b);return M}},Nb:function(){this.data={name:"",type:""}},select:function(b){try{if(!(b||u.ld("selectMonster"))||a.p.level<7)return M;$u.log(3,"Selecting monster");b={battle_monster:[],raid:[],any:[]};var c=0,d=0,g=0,h=0,l=0,m=0,k=[],o=0,r=0,s="",v="",B="",G="",A="",w="",L="",y="",O="",T="",H="",P=new p.Nb,U=
"",F={},Z="",fa="",K=0,R=0,Y=[];j.setItem("targetFrombattle_monster","");j.setItem("targetFromfortify",P.data);j.setItem("targetFromraid","");c=0;for(d=p.k.length;c<d;c+=1){if(p.k[c].type==="")p.k[c].type=p.type(p.k[c].name);if(p.info[p.k[c].type]&&p.info[p.k[c].type].Sa)if(p.k[c].damage!==-1&&p.k[c].color!=="grey"&&u.ya(p.k[c].stunTime,0)){$u.log(2,"Review monster due to class timer",p.k[c].name);p.k[c].review=-1;p.sc()}p.k[c].conditions="none";if(J.getItem("SerializeRaidsAndMonsters",M,f))b.any.push(p.k[c].name);
else if(p.k[c].page==="raid"||p.k[c].page==="battle_monster")b[p.k[c].page].push(p.k[c].name)}p.save();k=n.getItem("SerializeRaidsAndMonsters",M)?["any"]:["battle_monster","raid"];$u.log(3,"records/monsterList/selectTypes",p.k,b,k);m=0;for(g=k.length;m<g;m+=1)if($u.hasContent(b[k[m]])){H=T=O=y=L=w=A=G=B=v=s="";P=new p.Nb;if(k[m]==="any"){Y=n.ab("orderbattle_monster","");i.merge(Y,n.ab("orderraid","").concat("your","'"))}else Y=n.ab("order"+k[m],"").concat("your","'");$u.log(3,"attackOrderList",Y);
K=0;for(h=Y.length;K<h;K+=1)if(Y[K].trim()){Z=Y[K].replace(/^[^:]+/,"").toString().trim();R=0;for(l=b[k[m]].length;R<l;R+=1)if(b[k[m]][R]){F=p.getItem(b[k[m]][R]);if(F.conditions==="none")if(!(!b[k[m]][R].toLowerCase().hasIndexOf(Y[K].match(/^[^:]+/).toString().trim().toLowerCase())||k[m]!=="any"&&F.page!==k[m])){F.conditions=Z;p.setItem(F);if(F.color!=="grey"){$u.log(3,"Current monster being checked",F);if(!v&&F.color!=="purple")if(F.over==="ach"){if(!s){s=b[k[m]][R];$u.log(3,"firstOverAch",s)}}else if(F.over!==
"max"){v=b[k[m]][R];$u.log(3,"firstUnderMax",v)}if((fa=p.type(b[k[m]][R]))&&p.info[fa]){if(!p.info[fa].Sa||p.info[fa].Sa&&p.oc[F.charClass]&&p.oc[F.charClass].hasIndexOf("Heal")){o=p.eb("f%",Z)!==M?p.eb("f%",Z):n.getItem("MaxToFortify",0);if(p.info[fa].Ta&&!G&&F.fortify<o)if(F.over==="ach"){if(!B){B=b[k[m]][R];$u.log(3,"firstFortOverAch",B)}}else if(F.over!=="max"){G=b[k[m]][R];$u.log(3,"firstFortUnderMax",G)}}if(p.info[fa].Sa){if(n.getItem("StrengthenTo100",f)&&p.oc[F.charClass]&&p.oc[F.charClass].hasIndexOf("Strengthen"))if(!y&&
F.strength<100)if(F.over==="ach"){if(!L){L=b[k[m]][R];$u.log(3,"firstStrengthOverAch",L)}}else if(F.over!=="max"){y=b[k[m]][R];$u.log(3,"firstStrengthUnderMax",y)}if(!w&&F.stunDo)if(F.over==="ach"){if(!A){A=b[k[m]][R];$u.log(3,"firstStunOverAch",A)}}else if(F.over!=="max"){w=b[k[m]][R];$u.log(3,"firstStunUnderMax",w)}}}}}}}if(k[m]!=="raid"){(O=y)||(O=L);if(O){P.data.name=O;P.data.type="Strengthen";$u.log(3,"Strengthen target ",P.data.name)}(T=G)||(T=B);if(T){P.data.name=T;P.data.type="Fortify";$u.log(3,
"Fortify replaces strengthen ",P.data.name)}(H=w)||(H=A);if(H){P.data.name=H;P.data.type="Stun";$u.log(3,"Stun target replaces fortify ",P.data.name)}j.setItem("targetFromfortify",P.data);P.data.name&&$u.log(3,"Energy target",P.data)}(U=v)||(U=s);if(U){F=p.getItem(U);j.setItem("targetFrom"+F.page,U);if(F.page==="battle_monster"){r=0;if(!a.Ra()&&p.info[F.type]&&p.info[F.type].ua)for(r=p.info[F.type].ua.length-1;r>=0;r-=1)if(a.p.stamina.max>=p.info[F.type].ua[r])break;if(!a.Ra()&&p.info[F.type]&&p.info[F.type].Ua&&
n.getItem("PowerAttack",M)&&n.getItem("PowerAttackMax",M))j.setItem("MonsterStaminaReq",p.info[F.type].Ua[r]);else if(p.info[F.type]&&p.info[F.type].Ba)j.setItem("MonsterStaminaReq",p.info[F.type].Ba);else if(a.Ra()&&a.p.stamina.num>=10||/:pa/i.test(F.conditions))j.setItem("MonsterStaminaReq",5);else if(/:sa/i.test(F.conditions))j.setItem("MonsterStaminaReq",1);else a.Ra()&&a.p.stamina.num>=10||n.getItem("PowerAttack",f)?j.setItem("MonsterStaminaReq",5):j.setItem("MonsterStaminaReq",1);switch(n.getItem("MonsterGeneral",
"Use Current")){case "Orc King":j.setItem("MonsterStaminaReq",j.getItem("MonsterStaminaReq",1)*(x.jc("Orc King")+1));$u.log(3,"MonsterStaminaReq:Orc King",j.getItem("MonsterStaminaReq",1));break;case "Barbarus":j.setItem("MonsterStaminaReq",j.getItem("MonsterStaminaReq",1)*(x.jc("Barbarus")===4?3:2));$u.log(3,"MonsterStaminaReq:Barbarus",j.getItem("MonsterStaminaReq",1))}}else if(n.getItem("RaidPowerAttack",M)||/:pa/i.test(F.conditions))j.setItem("RaidStaminaReq",5);else p.info[F.type]&&p.info[F.type].Ba?
j.setItem("RaidStaminaReq",p.info[F.type].Ba):j.setItem("RaidStaminaReq",1)}}a.na(f);return f}catch(ba){$u.error("ERROR in monster.select: "+ba);return M}},Nd:function(b){try{var c=i("div[style*='dragon_title_owner']",a.C),d=i(),g="";if($u.hasContent(c))g=$u.setContent(c.children(":eq(2)").text(),"").trim();else{c=i("div[style*='nm_top']",a.C);if($u.hasContent(c)){g=$u.setContent(c.children(":eq(0)").children(":eq(0)").text(),"").trim();d=i("div[style*='nm_bars']",a.C);if($u.hasContent(d))g+=" "+
$u.setContent(d.children(":eq(0)").children(":eq(0)").children(":eq(0)").siblings(":last").children(":eq(0)").text(),"").trim().replace("'s Life","");else{$u.warn("Problem finding nm_bars");return M}}else{$u.warn("Problem finding dragon_title_owner and nm_top");return M}}if($u.hasContent(i("img[uid='"+a.p.FBID+"']",c))){$u.log(2,"Your monster found");g=g.replace(/.+?'s /,"Your ")}if(b!==g){$u.log(2,"Looking for "+b+" but on "+g+". Going back to select screen");return a.Q("keep,"+p.getItem(b).page)}return M}catch(h){$u.error("ERROR in monster.ConfirmRightPage: "+
h);return M}}};E={k:[],ta:function(){this.data={name:"",guildId:"",slot:0,ticker:"",minions:[],attacks:1,damage:0,myStatus:"",reviewed:0,state:"",enemyHealth:0,guildHealth:0,conditions:"",color:$u.bestTextColor(n.getItem("StyleBackgroundLight","#E0C961"))}},jd:function(){this.data={attacking_position:0,target_id:0,name:"",level:0,mclass:"",healthNum:0,healthMax:0,status:"",percent:0}},Jh:function(){this.data={name:"",level:0,mclass:"",healthNum:0,healthMax:0,status:"",percent:0}},info:{Vincent:{Jb:"vincent",
Bc:[0],fc:[1],lb:[100,200,400,800]},"Alpha Vincent":{Jb:"alpha_vincent",Bc:[0],fc:[1],lb:[500,1E3,2E3,4E3]},"Army of the Apocalypse":{Jb:"ca_girls",Bc:[0,25,50,75],fc:[1,2,3,4],lb:[500,1E3,2E3,4E3]},"Giant Arachnid":{Jb:"giant_arachnid",Bc:[0],fc:[1],lb:[100,200,400,800]}},load:function(){try{E.k=J.getItem("guild_monster.records","default");if(E.k==="default"||!i.isArray(E.k))E.k=J.setItem("guild_monster.records",[]);j.setItem("GuildMonsterDashUpdate",f);$u.log(3,"guild_monster.load",E.k);return f}catch(b){$u.error("ERROR in guild_monster.load: "+
b);return M}},save:function(){try{J.setItem("guild_monster.records",E.k);j.setItem("GuildMonsterDashUpdate",f);$u.log(3,"guild_monster.save",E.k);return f}catch(b){$u.error("ERROR in guild_monster.save: "+b);return M}},getItem:function(b){try{var c=0,d=0,g=M,h={};if(!$u.isNumber(b)){$u.warn("slot",b);e("Invalid identifying slot!")}if(b==="")return"";c=0;for(d=E.k.length;c<d;c+=1)if(E.k[c].slot===b){g=f;break}if(g){$u.log(3,"Got guild_monster record",b,E.k[c]);return E.k[c]}else{h=new E.ta;h.data.slot=
b;$u.log(3,"New guild_monster record",b,h.data);return h.data}}catch(l){$u.error("ERROR in guild_monster.getItem: "+l);return M}},setItem:function(b){try{if(!b||!i.isPlainObject(b))e("Not passed a record");if(!$u.isNumber(b.slot)||b.slot<=0){$u.warn("slot",b.slot);e("Invalid identifying slot!")}var c=0,d=0,g=M;c=0;for(d=E.k.length;c<d;c+=1)if(E.k[c].slot===b.slot){g=f;break}if(g){E.k[c]=b;$u.log(3,"Updated guild_monster record",b,E.k)}else{E.k.push(b);$u.log(3,"Added guild_monster record",b,E.k)}E.save();
return f}catch(h){$u.error("ERROR in guild_monster.setItem: "+h);return M}},deleteItem:function(b){try{var c=0,d=0,g=M;if(!$u.isNumber(b)||b<=0){$u.warn("slot",b);e("Invalid identifying slot!")}c=0;for(d=E.k.length;c<d;c+=1)if(E.k[c].slot===b){g=f;break}if(g){E.k.splice(c,1);E.save();$u.log(3,"Deleted guild_monster record",b,E.k);return f}else{$u.warn("Unable to delete guild_monster record",b,E.k);return M}}catch(h){$u.error("ERROR in guild_monster.deleteItem: "+h);return M}},clear:function(){try{$u.log(1,
"guild_monster.clear");E.k=J.setItem("guild_monster.records",[]);j.setItem("staminaGuildMonster",0);j.setItem("targetGuildMonster",{});j.setItem("GuildMonsterDashUpdate",f);return f}catch(b){$u.error("ERROR in guild_monster.clear: "+b);return M}},wc:function(){return a.Q("guild","tab_guild_main_on.gif")},Lh:function(){var b=a.Wa("guild_monster_tab_on.jpg");$u.hasContent(b)&&a.ca(b);j.setItem("guildMonsterBattlesRefresh",M);return $u.hasContent(b)},Kh:function(){return a.Q("guild,guild_current_monster_battles",
"guild_monster_tab_on.jpg")},populate:function(){try{var b=i("input[src*='dragon_list_btn_']"),c=[],d=0;if(b&&b.length){b.each(function(){var h=i(this),l=ea,m={};l="";var k=0;l=k="";var o=f;if((l=h.parents("form").eq(0))&&l.length){k=(k=l.find("input[name='slot']").eq(0).attr("value"))?k.parseInt():0;if($u.isNumber(k)&&k>0&&k<=5){$u.log(3,"slot",k);c.push(k);m=E.getItem(k);if(k=(k=h.parents().eq(4).text())?k.trim():""){if(m.name!==k){$u.log(1,"Updated name",m.name,k);m.name=k}}else{$u.warn("name error",
k);o=M}l=l.find("input[name='guild_id']").eq(0).attr("value");if(a.p.guild.id&&l===a.p.guild.id){if(m.guildId!==l){$u.log(2,"Updated guildId",m.guildId,l);m.guildId=l}}else{$u.warn("guildId error",l,a.p.guild.id);o=M}if(l=h.attr("src").basename())switch(l){case "dragon_list_btn_3.jpg":m.color=$u.bestTextColor(n.getItem("StyleBackgroundLight","#E0C961"));m.state="Alive";break;case "dragon_list_btn_2.jpg":case "dragon_list_btn_4.jpg":m.color="grey";if(m.state!=="Completed"){$u.log(2,"Updated state",
m.state,"Collect");m.state="Collect"}break;default:m.state="Error";$u.warn("state error",l);o=M}else{$u.warn("imageName error",h.attr("src"),l);o=M}}else{$u.warn("slot error",k);o=M}}else{$u.warn("form error",h);o=M}if(o){$u.log(2,"currentRecord/button",m,h);E.setItem(m)}else $u.warn("populate record failed",m,h)});for(d=E.k.length-1;d>=0;d-=1)c.hasIndexOf(E.k[d].slot)||E.deleteItem(E.k[d].slot);E.select(f)}else{$u.log(1,"No buttons found");E.clear()}a.na(f);return f}catch(g){$u.error("ERROR in guild_monster.populate: "+
g);return M}},Nh:function(){try{var b=i(),c=i(),d=i(),g=i(),h=i(),l=i(),m=i(),k=M,o="",r=[],s=0,v={},B=/(.*) Level (\d+) Class: (.*) Health: (.+)\/(.+) Status: (.*)/;a.fe(a.oa,"#"+a.domain.id[a.domain.which]+"guild_war_chat_log div[style*='border-bottom: 1px'] div[style*='font-size: 15px']");s=(s=i("input[name='slot']").eq(0).attr("value"))?s.parseInt():0;l=i("#"+a.domain.id[a.domain.which]+"guild_battle_banner_section");o=(o=l.children().eq(2).children().eq(0).children().eq(1).text())?o.trim().innerTrim():
"";if($u.isNumber(s)&&s>0&&s<=5){$u.log(3,"slot",s);v=E.getItem(s);v.minions=[];v.ticker="";v.guildHealth=0;v.enemyHealth=0;if(l.attr("style").match(/_dead/)){if((m=i("input[src*='collect_reward_button2.jpg']"))&&m.length){$u.log(1,"Monster is dead and ready to collect");v.state="Collect";if(n.getItem("guildMonsterCollect",M))k=f}else{$u.log(1,"Monster is completed");v.state="Completed"}v.color="grey"}else{v.ticker=i("#"+a.domain.id[a.domain.which]+"monsterTicker").text();v.ticker=v.ticker?v.ticker.trim():
"";if(o){$u.log(3,"myStatsTxt",o);if((r=o.match(/(.+) Level: (\d+) Class: (.+) Health: (\d+)\/(\d+).+Status: (.+) Battle Damage: (\d+)/))&&r.length===8){$u.log(2,"myStatsArr",r);v.damage=r[7]?r[7].parseInt():0;v.myStatus=r[6]?r[6].trim():""}else $u.warn("myStatsArr error",r,o)}if((h=i("#"+a.domain.id[a.domain.which]+"allowedAttacks"))&&h.length){v.attacks=h.attr("value")?h.attr("value").parseInt():1;if(v.attacks<1||v.attacks>5){v.attacks=1;$u.warn("Invalid allowedAttacks")}}else $u.warn("Could not find allowedAttacks");
if((c=i("#"+a.domain.id[a.domain.which]+"guild_battle_health"))&&c.length){if((g=c.find("div[style*='guild_battle_bar_enemy.gif']").eq(0))&&g.length)v.enemyHealth=(100-g.cb("width")).dp(2);else $u.warn("guild_battle_bar_enemy.gif not found");if((d=c.find("div[style*='guild_battle_bar_you.gif']").eq(0))&&d.length)v.guildHealth=(100-d.cb("width")).dp(2);else $u.warn("guild_battle_bar_you.gif not found")}else $u.warn("guild_battle_health error");b=i("div[id*='"+a.domain.id[a.domain.which]+"enemy_guild_member_list_']");
if(!b||!b.length)$u.warn("No gates found");else b&&b.length!==4?$u.warn("Not enough gates found"):b.each(function(A){var w=i(this).children();if(!w||!w.length)$u.warn("No members found");else w&&w.length!==25?$u.warn("Not enough members found",w):w.each(function(){var L=i(this),y="";y=[];y=i();var O=(new E.jd).data;O.attacking_position=A+1;if((y=L.find("input[name='target_id']").eq(0))&&y.length)O.target_id=y.attr("value")?y.attr("value").parseInt():1;else $u.warn("Unable to find target_id for minion!",
L);y=(y=L.children().eq(1).text())?y.trim().innerTrim():"";if((y=y.match(B))&&y.length===7){O.name=y[1]?y[1]:"";O.level=y[2]?y[2].parseInt():0;O.mclass=y[3]?y[3]:"";O.healthNum=y[4]?y[4].parseInt():0;O.healthMax=y[5]?y[5].parseInt():1;O.status=y[6]?y[6]:"";O.percent=(O.healthNum/O.healthMax*100).dp(2)}v.minions.push(O)})})}v.reviewed=(new Date).getTime();$u.log(2,"currentRecord",v);E.setItem(v);k&&a.ca(m)}else if(l.children().eq(0).text().hasIndexOf("You do not have an on going guild monster battle. Have your Guild initiate more!")){s=
j.getItem("guildMonsterReviewSlot",0);if($u.isNumber(s)&&s>0&&s<=5){$u.log(1,"monster expired",s);E.deleteItem(s)}else $u.warn("monster expired slot error",s)}else $u.log(1,"On another guild's monster",o);return f}catch(G){$u.error("ERROR in guild_monster.onMonster: "+G);return M}},sh:function(){try{var b=0,c=0;b=0;for(c=E.k.length;b<c;b+=1)if(E.k[b].state!=="Completed")if(u.ya(E.k[b].reviewed,1800))break;return E.k[b]}catch(d){$u.error("ERROR in guild_monster.getReview: "+d)}},Ng:function(b){try{if(!b||
!i.isPlainObject(b))e("Not passed a record");var c=0;c=(c=i("input[name='slot']").eq(0).attr("value"))?c.parseInt():0;return b.slot===c}catch(d){$u.error("ERROR in guild_monster.checkPage: "+d)}},cc:function(b){try{var c=0,d=0,g=0,h=0,l={},m=0,k=[],o=-1,r=M,s=[],v=M,B=M,G=n.getItem("attackGateNorth",f),A=n.getItem("attackGateEast",f),w=n.getItem("attackGateSouth",f),L=n.getItem("attackGateWest",f);if(!b||!i.isPlainObject(b))e("Not passed a record");m=n.getItem("IgnoreMinionsBelow",0);$u.isNumber(m)||
(m=0);s=n.ab("orderGuildMinion","");if(!s||s.length===0){s=[String.fromCharCode(0)];$u.log(2,"Added null character to getTargetMinion attackOrderList",s)}r=n.getItem("ignoreClerics",M);d=0;for(g=s.length;d<g;d+=1){if(l&&i.isPlainObject(l)&&!i.isEmptyObject(l)){$u.log(2,"Minion matched and set - break",l);break}k=E.info[b.name].Bc.slice();for(c=b.minions.length-1;c>=0;c-=1)if(!G&&b.minions[c].attacking_position===1)$u.log(2,"Skipping North Minion",c,b.minions[c]);else if(!L&&b.minions[c].attacking_position===
2)$u.log(2,"Skipping West Minion",c,b.minions[c]);else if(!A&&b.minions[c].attacking_position===3)$u.log(2,"Skipping East Minion",c,b.minions[c]);else if(!w&&b.minions[c].attacking_position===4)$u.log(2,"Skipping South Minion",c,b.minions[c]);else{(B=s[d]===String.fromCharCode(0)?f:!b.minions[c].name.toLowerCase().hasIndexOf(s[d].match(/^[^:]+/).toString().trim().toLowerCase()))&&$u.log(2,"Minion matched",c,b.minions[c]);v=k.hasIndexOf(c);if(b.minions[c].status==="Stunned")if(v&&$u.isNaN(b.minions[c].healthNum)){k.pop();
B&&$u.log(2,"Special minion stunned",k)}else B&&$u.log(2,"Minion stunned");else{if(v)if($u.isNaN(b.minions[c].healthNum))if(o<0){o=c;$u.log(2,"firstSpecial minion",o)}else $u.log(2,"Special minion",c,k);else{k.pop();$u.log(2,"Not special minion",c,k);if(r&&b.minions[c].mclass==="Cleric"){$u.log(2,"Ignoring Cleric",b.minions[c]);continue}}if(m&&!v)if(b.minions[c].healthNum<m){if(!h){h=c;$u.log(2,"First alive",h)}continue}if(B){l=b.minions[c];break}}}}if(i.isEmptyObject(l)&&o>=0){l=b.minions[o];$u.log(2,
"Target Special",o,b.minions[o])}if(n.getItem("chooseIgnoredMinions",M)&&h){l=b.minions[h];$u.log(2,"Target Alive",h,b.minions[h])}$u.log(2,"Target minion",l);return l}catch(y){$u.error("ERROR in guild_monster.getTargetMinion: "+y)}},select:function(b){try{var c=0,d=0,g=0,h=0,l=[],m="",k=999999,o=999999,r={},s={},v={};if(!(b||u.ld("selectGuildMonster")))return M;j.setItem("targetGuildMonster",{});l=n.ab("orderGuildMonster","");if(!l||l.length===0){l=[String.fromCharCode(0)];$u.log(3,"Added null character to select attackOrderList",
l)}for(c=E.k.length-1;c>=0;c-=1)if(E.k[c].state!=="Alive"){E.k[c].color="grey";E.k[c].conditions=""}else{l.push(E.k[c].slot.toString());E.k[c].conditions="none";E.k[c].color=$u.bestTextColor(n.getItem("StyleBackgroundLight","#E0C961"))}d=0;for(h=l.length;d<h;d+=1){m=l[d].replace(/^[^:]+/,"").toString().trim();c=0;for(g=E.k.length;c<g;c+=1)if(E.k[c].state!=="Alive")E.k[c].color="grey";else if(E.k[c].myStatus==="Stunned")E.k[c].color="purple";else if(E.k[c].conditions==="none"){if(l[d]!==String.fromCharCode(0))if(!(E.k[c].slot+
" "+E.k[c].name.toLowerCase()).hasIndexOf(l[d].match(/^[^:]+/).toString().trim().toLowerCase()))continue;if(m){E.k[c].conditions=m;if(m.hasIndexOf("ach"))k=p.eb("ach",m);if(m.hasIndexOf("max"))o=p.eb("max",m)}if(E.k[c].damage>=k){E.k[c].color="darkorange";if(!s||!i.isPlainObject(s)||i.isEmptyObject(s))if(E.k[c].damage>=o){E.k[c].color="red";$u.log(2,"OverMax",E.k[c])}else{s=E.k[c];$u.log(2,"firstOverAch",s)}}else if(E.k[c].damage<o){if(!v||!i.isPlainObject(v)||i.isEmptyObject(v)){v=E.k[c];$u.log(2,
"firstUnderMax",v)}}else{E.k[c].color="red";$u.log(2,"OverMax",E.k[c])}}}r=v;if(!r||!i.isPlainObject(r)||i.isEmptyObject(r))r=s;$u.log(2,"target",r);if(r&&i.isPlainObject(r)&&!i.isEmptyObject(r)){r.color="green";E.setItem(r)}else{j.setItem("guildMonsterBattlesBurn",M);E.save()}return j.setItem("targetGuildMonster",r)}catch(B){$u.error("ERROR in guild_monster.select: "+B)}},Jg:{1:1,2:5,3:10,4:20,5:50},lh:function(b,c){try{if(!c||!i.isPlainObject(c))e("Not passed a minion");var d=0,g=E.info[b.name];
d=g.fc.slice().hasIndexOf(c.target_id)&&$u.isNaN(c.healthNum)?a.p.staminaT.num<5?1:a.p.staminaT.num<10?2:a.p.staminaT.num<20?3:a.p.staminaT.num<50?4:5:c.healthNum<g.lb[0]?1:c.healthNum<g.lb[1]?a.p.staminaT.num<5?1:2:c.healthNum<g.lb[2]?a.p.staminaT.num<5?1:a.p.staminaT.num<10?2:3:c.healthNum<g.lb[3]?a.p.staminaT.num<5?1:a.p.staminaT.num<10?2:a.p.staminaT.num<20?3:4:a.p.staminaT.num<5?1:a.p.staminaT.num<10?2:a.p.staminaT.num<20?3:a.p.staminaT.num<50?4:5;if(d>b.attacks)d=b.attacks;$u.log(2,"getAttackValue",
d);return d}catch(h){$u.error("ERROR in guild_monster.getAttackValue: "+h)}},uh:function(b,c){try{if(!c||!i.isPlainObject(c))e("Not passed a minion");var d=0,g=0,h=E.info[b.name];d=h.fc.slice().hasIndexOf(c.target_id)&&$u.isNaN(c.healthNum)?50:c.healthNum<h.lb[0]?1:c.healthNum<h.lb[1]?5:c.healthNum<h.lb[2]?10:c.healthNum<h.lb[3]?20:50;g=E.Jg[b.attacks];if(d>g)d=g;$u.log(2,"getStaminaValue",d);return d}catch(l){$u.error("ERROR in guild_monster.getStaminaValue: "+l)}}};V={k:[],ta:function(){this.data=
{reviewed:0,days:0,tokens:0,tokenTime:"",collect:M,startTime:0,ticker:"",nextTime:"",minions:[],teamHealth:0,enemyHealth:0,damage:0,myStatus:"",myClass:"",state:"",wins:[],losses:[]}},jd:function(){this.data={index:0,attacking_position:0,target_id:0,name:"",level:0,mclass:"",healthNum:0,healthMax:0,status:"",percent:0,points:0,won:M,lost:M,poly:M,shout:M,shield:M,last_ap:0}},Qa:function(){this.data={userId:0,ap:0}},Jh:function(){this.data={name:"",level:0,mclass:"",healthNum:0,healthMax:0,status:"",
percent:0}},load:function(){try{V.k=J.getItem("arena.records","default");if(V.k==="default"||!i.isArray(V.k))V.k=J.setItem("arena.records",[]);V.Rg();j.setItem("ArenaDashUpdate",f);$u.log(3,"arena.load",V.k);return f}catch(b){$u.error("ERROR in arena.load: "+b);return M}},save:function(){try{J.setItem("arena.records",V.k);j.setItem("ArenaDashUpdate",f);$u.log(3,"arena.save",V.k);return f}catch(b){$u.error("ERROR in arena.save: "+b);return M}},getItem:function(){try{return V.k.length?V.k[0]:(new V.ta).data}catch(b){$u.error("ERROR in arena.getItem: "+
b);return M}},setItem:function(b){try{if(!b||!i.isPlainObject(b))e("Not passed a record");V.k[0]=b;$u.log(2,"Updated arena record",b,V.k);V.save();return f}catch(c){$u.error("ERROR in arena.setItem: "+c);return M}},deleteItem:function(b){try{var c=0,d=0,g=M;if(!$u.isNumber(b)||b<=0){$u.warn("slot",b);e("Invalid identifying slot!")}c=0;for(d=V.k.length;c<d;c+=1)if(V.k[c].slot===b){g=f;break}if(g){V.k.splice(c,1);V.save();$u.log(3,"Deleted arena record",b,V.k);return f}else{$u.warn("Unable to delete arena record",
b,V.k);return M}}catch(h){$u.error("ERROR in arena.deleteItem: "+h);return M}},clear:function(){try{$u.log(1,"arena.clear");V.k=J.setItem("arena.records",[]);j.setItem("staminaArena",0);j.setItem("targetArena",{});j.setItem("ArenaDashUpdate",f);return f}catch(b){$u.error("ERROR in arena.clear: "+b);return M}},$h:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(!c||!i.isPlainObject(c))e("Not passed a win");if(c.userId===""||$u.isNaN(c.userId)||c.userId<1){$u.warn("userId",c.userId);
e("Invalid identifying userId!")}var d=0,g=0,h=M;d=0;for(g=b.length;d<g;d+=1)if(b[d].userId===c.userId){h=f;break}if(h){b[d]=c;$u.log(3,"Updated records",c,b)}else{b.push(c);$u.log(3,"Added records",c,b)}return b}catch(l){$u.error("ERROR in arena.setWin: "+l,c,b);return M}},xh:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(c===""||$u.isNaN(c)||c<1){$u.warn("userId",c);e("Invalid identifying userId!")}var d=0,g=0,h=M;d=0;for(g=b.length;d<g;d+=1)if(b[d].userId===c){h=f;break}if(h){$u.log(3,
"Got win record",c,b[d]);return b[d]}else{$u.log(3,"No win record",c);return M}}catch(l){$u.error("ERROR in arena.getWin: "+l,c,b);return M}},fh:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(c===""||$u.isNaN(c)||c<1){$u.warn("userId",c);e("Invalid identifying userId!")}var d=0,g=0,h=M;d=0;for(g=b.length;d<g;d+=1)if(b[d].userId===c){h=f;break}if(h){b.splice(d,1);$u.log(2,"Deleted win record",c,b);return b}else{$u.log(3,"Unable to delete win record",c,b);return M}}catch(l){$u.error("ERROR in arena.delWin: "+
l,c,b);return M}},Zh:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(c===""||$u.isNaN(c)||c<1){$u.warn("userId",c);e("Invalid identifying userId!")}if(b.hasIndexOf(c))$u.log(3,"userId exists",c,b);else{b.push(c);$u.log(3,"Added userId",c,b)}return b}catch(d){$u.error("ERROR in arena.setLoss: "+d,c,b);return M}},Mg:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(c===""||$u.isNaN(c)||c<1){$u.warn("userId",c);e("Invalid identifying userId!")}if(b.hasIndexOf(c)){$u.log(3,
"userId exists",c,b);return f}else{$u.log(3,"userId not exists",c,b);return M}}catch(d){$u.error("ERROR in arena.checkLoss: "+d,c,b)}},eh:function(b,c){try{if(!b||!i.isArray(b))e("Not passed records");if(c===""||$u.isNaN(c)||c<1){$u.warn("userId",c);e("Invalid identifying userId!")}var d=-1;d=b.indexOf(c);if(d>=0){b.splice(d,1);$u.log(2,"Deleted loss",c,b);return b}else{$u.log(3,"Unable to delete loss",c,b);return M}}catch(g){$u.error("ERROR in arena.delLoss: "+g,c,b);return M}},Rg:function(){try{var b=
{},c=0,d=0,g=M;b=V.getItem();if(i.isEmptyObject(b))$u.log(1,"No loss records available",b);else{c=0;for(d=b.wins.length;c<d;c+=1)if(b.losses.hasIndexOf(b.wins[c].userId)){$u.log(1,"Found win in losses: delete",b.wins[c]);b.wins.splice(c,1);g=f}}g&&V.setItem(b);return f}catch(h){$u.error("ERROR in arena.cleanWins: "+h);return M}},wc:function(){return a.Q("battle,arena","tab_arena_on.gif")},kd:function(){var b=a.Wa("tab_arena_on.gif");$u.hasContent(b)&&a.ca(b);j.setItem("ArenaRefresh",M);return $u.hasContent(b)},
Lg:function(){try{var b=i(),c=i(),d=i(),g=i(),h="",l="",m=0,k={};k=V.getItem();k.reviewed=(new Date).getTime();b=i("span[id='"+a.domain.id[a.domain.which]+"guild_token_current_value']");h=b.length?b.text().trim():"";k.tokens=h?h.parseInt():0;c=i("span[id='"+a.domain.id[a.domain.which]+"guild_token_time_value']");h=(h=c.length?c.text().trim():"")?h.regex(/(\d+:\d+)/):"";k.tokenTime=h?h:"";d=i("#"+a.domain.id[a.domain.which]+"arena_banner").children().eq(0).children().eq(0);h=d.length?d.text().trim():
"";k.days=h?h.regex(/(\d+) DAYS/):0;g=i("div[style *='arena3_home_bottom.jpg']");h=g.length?g.text().trim().innerTrim():"";k.collect=h?h.regex(/(Battle Over, Collect Your Reward!)/)?f:M:M;l=h?h.regex(/^Time Remaining: (\d+:\d+:\d+)/):"";k.ticker=l?l:"";if(k.ticker.Cb()&&k.state==="Completed"){k.state="Ready";k.myStatus="";k.damage=0;k.teamHealth=0;k.enemyHealth=0}l=h?h.regex(/ Time Remaining: (\d+:\d+:\d+)/):"";k.nextTime=l?l:"";m=(h=h?h.regex(/Battle Starts In (\d+ .+?)\(/):"")?h.regex(/(\d+)/):
0;h=h?h.regex(/\d+ (.+)/):"sec";$u.log(3,"startTime",m,h);if(h==="sec")k.startTime=m;else if(h==="min")k.startTime=m*60;V.setItem(k);if(k.startTime&&k.state==="Ready"){k.minions=[];$u.log(2,"Arena starting in",k.startTime);u.setItem("ArenaReview",k.startTime,20)}else if(k.nextTime&&k.nextTime.Cb()<3600&&k.state==="Ready"){$u.log(2,"Waiting Arena start in",k.nextTime);u.setItem("ArenaReview",k.nextTime.Cb(),20)}else if(k.tokenTime&&k.tokenTime.Cb()&&k.state==="Alive"){u.setItem("ArenaReview",k.tokenTime.Cb(),
20);$u.log(2,"Waiting Arena token in",k.tokenTime)}else{u.setItem("ArenaReview",J.getItem("ArenaReviewMins",5,f)*60,120);$u.log(2,"Waiting 5 mins for Arena review")}$u.log(3,"arena.checkInfo",k);return f}catch(o){$u.error("ERROR in arena.checkInfo: "+o);return M}},Mh:function(){try{var b=i(),c=i(),d=i(),g=i(),h=i(),l=i(),m=i(),k=i(),o=i(),r=i(),s=i(),v=i(),B="",G=[],A=0,w={},L=[],y="",O=0,T="",H={},P={},U=[],F=[],Z="",fa="",K="",R=/(.*) Level: (\d+) Class: (.*) Health: (\d+)\/(\d+) Status: (.*) Arena Activity Points: (\d+)/;
w=V.getItem();if(w.state!=="Alive"){$u.log(2,"Test targeting");V.cc(w)}w.wins||(w.wins=[]);w.losses||(w.losses=[]);w.myClass||(w.myClass="");H=j.getItem("ArenaMinionAttacked",{});j.setItem("ArenaMinionAttacked",{});if(!i.isEmptyObject(H)&&H.index>=0&&H.index<40){if((s=i("span[class='result_body']"))&&s.length)O=(y=s.text())?y.regex(/\+(\d+) Battle Activity Points/):0;if((v=i("img[src*='battle_defeat.gif']"))&&v.length)if(H.poly)$u.log(1,"Defeated by polymorphed minion",O,w.minions[H.index]);else{if(O>
50){w.minions[H.index].lost=f;w.minions[H.index].won=M;w.minions[H.index].last_ap=0;F=V.fh(w.wins,w.minions[H.index].target_id);w.wins=F?F:w.wins;U=V.Zh(w.losses,w.minions[H.index].target_id);w.losses=U?U:w.losses;V.setItem(w)}else $u.log(1,"You were polymorphed");$u.log(1,"Defeated by minion",O,w.minions[H.index])}else if((v=i("img[src*='battle_victory.gif']"))&&v.length)if(H.poly)$u.log(1,"Victory against polymorphed minion",O,w.minions[H.index]);else{if(v&&v.length){w.minions[H.index].lost=M;w.minions[H.index].won=
f;w.minions[H.index].last_ap=O?O:160;P=new V.Qa;P.data.userId=w.minions[H.index].target_id;P.data.ap=w.minions[H.index].last_ap;F=V.$h(w.wins,P.data);w.wins=F?F:w.wins;U=V.eh(w.losses,w.minions[H.index].target_id);w.losses=U?U:w.losses;V.setItem(w);$u.log(1,"Victory against minion",O,w.minions[H.index])}}else{T=i("div[class='results']").text();if(T.regex(/(You do not have enough battle tokens for this action)/i))$u.log(1,"You didn't have enough battle tokens");else if(T.regex(/(does not have any health left to battle)/i))$u.log(1,
"Minion had no health left");else T.regex(/(You tried to attack but tripped while running)/i)?$u.log(1,"Oops, you tripped"):$u.log(1,"Unknown win or loss or result")}}l=i("#"+a.domain.id[a.domain.which]+"arena_battle_banner_section");B=(B=l.text())?B.trim().innerTrim():"";Z=B.regex(/(This Battle Has Not Started Yet)/);fa=B.regex(/(You Are Not A Part Of This Arena Battle)/);K=B.regex(/(This Arena Battle Is Over)/);if(fa)return f;$u.log(3,"myStatsTxt",B);if(l&&l.length){w.teamHealth=0;w.enemyHealth=
0;if(!Z){b=i("div[id*='"+a.domain.id[a.domain.which]+"enemy_guild_member_list_']");if(!b||!b.length){c=i("div[id*='"+a.domain.id[a.domain.which]+"your_arena_tab']");if(!c||!c.length)$u.warn("No gates found")}else b&&b.length!==4?$u.warn("Not enough gates found"):b.each(function(ba){var ga=i(this).children();if(!ga||!ga.length)$u.warn("No members found");else ga&&ga.length!==10?$u.warn("Not enough members found",ga):ga.each(function(){var W=i(this),aa="";aa=[];aa=i();aa=i();aa=i();aa=i();aa=i();aa=
M;var z=(new V.jd).data;z.index=A;if((aa=W.find("input[name='target_id']").eq(0))&&aa.length){z.target_id=aa.attr("value")?aa.attr("value").parseInt():0;P=V.xh(w.wins,z.target_id);if(i.isPlainObject(P)){z.won=f;z.last_ap=P.ap?P.ap:0}aa=V.Mg(w.losses,z.target_id);if($u.isBoolean(aa))z.lost=aa}else $u.warn("Unable to find target_id for minion!",W);z.attacking_position=ba+1;aa=(aa=W.children().eq(1).text())?aa.trim().innerTrim():"";$u.log(3,"memberText",aa);if((aa=aa.match(R))&&aa.length===8){z.name=
aa[1]?aa[1]:"";z.level=aa[2]?aa[2].parseInt():0;z.mclass=aa[3]?aa[3]:"";z.healthNum=aa[4]?aa[4].parseInt():0;z.healthMax=aa[5]?aa[5].parseInt():0;z.status=aa[6]?aa[6]:"";z.points=aa[7]?aa[7].parseInt():0;z.percent=(z.healthNum/(z.healthMax?z.healthMax:1)*100).dp(2)}else $u.warn("Minion match issue!",aa);if(w.minions&&w.minions.length===40)if(w.minions[A].index===A){z.lost=w.minions[A].lost?w.minions[A].lost:M;z.last_ap=w.minions[A].last_ap?w.minions[A].last_ap:0}else $u.warn("Minion index issue!",
A,w.minions[A],z);if((aa=W.find("div[style='font-size: 19px; padding-bottom: 3px;'], div[style='font-size:19px; padding-bottom:3px;']"))&&aa.length===1){if(z.won){y='<div style="float: left; width: 220px; font-size: 11px;"><span style="float: left;" title="Won - Last Points: '+z.last_ap;y+='" class="ui-icon ui-icon-circle-check">Won</span> Last Points: '+z.last_ap+"</div>";aa.after(y)}if(z.lost){y='<div style="float: left; width: 220px; font-size: 11px;"><span style="float: left;" title="Lost" class="ui-icon ui-icon-circle-close">Lost</span>Lost</div>';
aa.after(y)}}aa=W.find("img[src*='polymorph_effect']");z.poly=aa&&aa.length?f:M;z.poly&&$u.log(3,"poly",z);aa=W.find("img[src*='warrior_effect_shout']");z.shout=aa&&aa.length?f:M;z.shout&&$u.log(2,"shout",z);aa=W.find("img[src*='mage_effect_shield']");z.shield=aa&&aa.length?f:M;z.shield&&$u.log(2,"shield",z);A=L.push(z)})})}m=i("input[src*='arena3_collectbutton.gif']");k=i("input[src*='guild_enter_battle_button.gif']");if(w.ticker&&!Z&&!K&&!m.length&&!k.length){w.state="Alive";y=i("span[id='"+a.domain.id[a.domain.which]+
"monsterTicker']").text();w.ticker=y?y.trim():"";if(B){$u.log(3,"myStatsTxt",B);if((G=B.match(/(.+) Level: (\d+) Class: (.+) Health: (\d+)\/(\d+).+Status: (.+) Arena Activity Points: (\d+)/))&&G.length===8){$u.log(3,"myStatsArr",G);w.damage=G[7]?G[7].parseInt():0;w.myStatus=G[6]?G[6].trim():"";w.myClass=G[3]?G[3].trim():""}else $u.warn("myStatsArr error",G,B)}o=i("span[id='"+a.domain.id[a.domain.which]+"guild_token_current_value']");y=o.length?o.text().trim():"";w.tokens=y?y.parseInt():0;r=i("span[id='"+
a.domain.id[a.domain.which]+"guild_token_time_value']");y=r.length?r.text().trim():"";w.tokenTime=y?y.regex(/(\d+:\d+)/):"0:00";if((d=i("#"+a.domain.id[a.domain.which]+"guild_battle_health"))&&d.length){if((h=d.find("div[style*='guild_battle_bar_enemy.gif']").eq(0))&&h.length)w.enemyHealth=(100-h.cb("width")).dp(2);else $u.warn("guild_battle_bar_enemy.gif not found");if((g=d.find("div[style*='guild_battle_bar_you.gif']").eq(0))&&g.length)w.teamHealth=(100-g.cb("width")).dp(2);else $u.warn("guild_battle_bar_you.gif not found")}else $u.warn("guild_battle_health error")}else{if(m&&
m.length){$u.log(1,"Battle ready to collect");w.state="Collect"}else if(!k.length&&w.state!=="Ready"){$u.log(1,"Battle is completed");w.state="Completed"}else{$u.log(1,"Battle is ready to join");w.state="Ready"}w.myStatus="";w.damage=0;w.teamHealth=0;w.enemyHealth=0}if(L&&L.length)w.minions=L.slice();w.reviewed=(new Date).getTime();$u.log(3,"currentRecord",w);V.setItem(w);w.state==="Collect"&&m.length&&a.ca(m)}else $u.warn("Not on arena battle page");return f}catch(Y){$u.error("ERROR in arena.onBattle: "+
Y);return M}},Wg:function(){try{var b={};b=V.getItem();b.minions=[];V.setItem(b);return f}catch(c){$u.error("ERROR in arena.clearMinions: "+c);return M}},qh:function(b){try{var c={},d={};if(b===""||$u.isNaN(b)||b<0||b>40){$u.warn("index",b);e("Invalid identifying index!")}c=V.getItem();if(!i.isEmptyObject(c)&&c.minions&&c.minions.length===40)d=c.minions[b];else $u.log(1,"No minion records available",c);return d}catch(g){$u.error("ERROR in arena.getTarget: "+g);return M}},cc:function(b){try{var c=
0,d=0,g=0,h=0,l={Cleric:{last:{},suicide:{},active:{},alive:{},health:{},poly:{},shout:{},chain:{}},Mage:{last:{},suicide:{},active:{},alive:{},health:{},poly:{},shout:{},chain:{}},Rogue:{last:{},suicide:{},active:{},alive:{},health:{},poly:{},shout:{},chain:{}},Warrior:{last:{},suicide:{},active:{},alive:{},health:{},poly:{},shout:{},chain:{}}},m={},k=M,o=M,r=0,s=0,v=0,B=M,G=M,A=M,w=M,L=M,y=[],O=[],T=[],H=M,P="",U="";if(!b||!i.isPlainObject(b))e("Not passed a record");r=n.getItem("ignoreArenaHealth",
200);s=n.getItem("maxArenaLevel",50);k=n.getItem("killClericFirst",M);o=n.getItem("attackPoly",M);v=n.getItem("chainArena","160").parseInt();B=n.getItem("observeHealth",f);G=n.getItem("attackSuicide",M);n.getItem("chainStrict",M);A=n.getItem("doPoly",M);w=n.getItem("stunnedPoly",f);L=n.getItem("roguePoly",f);var F=function(K,R){try{var Y=0,ba=0,ga=M,W=M,aa=M,z=M,N=M,C=M,X=M,la=M,na=M,qa=M,da="";da=K.mclass;ga=K.level>(l[da][R].level?l[da][R].level:0);W=K.level<(l[da][R].level?l[da][R].level:99999);
aa=da==="Cleric"||da==="Mage";z=K.shield||K.shout;C=k&&da==="Cleric"||K.healthNum>r;X=!A&&K.poly;la=A&&w&&K.poly&&b.myStatus==="Stunned";na=A&&L&&K.poly&&b.myClass!=="Rogue";qa=A&&K.poly&&K.healthNum<=50;N=X||la||na||qa;switch(R){case "health":if(N){$u.log(2,"Ignoring polymorphed minion "+da+" "+R,b.myStatus,K);return}if(!(C&&!z))return;break;case "active":if(N){$u.log(2,"Ignoring polymorphed minion "+da+" "+R,b.myStatus,K);return}if(!(C&&K.points&&!z))return;break;case "suicide":X=K.healthNum<(l[da][R].healthNum?
l[da][R].healthNum:99999);if((la=!aa&&C&&K.points&&X)&&!z&&W)l[da][R]=K;return;case "last":if((X=i.isEmptyObject(l[da][R])&&aa&&K.healthNum>0&&K.healthNum<=30)&&!z){l[da][R]=K;return}if((na=(la=!aa&&l[da][R].mclass!=="Cleric"&&(l[da][R].mclass?l[da][R].mclass:"none")!=="mage")&&K.healthNum>200&&K.healthNum<(l[da][R].healthNum?l[da][R].healthNum:0))&&!z&&W){l[da][R]=K;return}if((qa=i.isEmptyObject(l[da][R])&&la&&K.healthNum>(l[da][R].healthNum?l[da][R].healthNum:0))&&!z)l[da][R]=K;return;case "poly":if(N){$u.log(2,
"Ignoring polymorphed minion "+da+" "+R,b.myStatus,K);return}if(K.poly&&(z||ga))l[da][R]=K;return;case "chain":X=v&&K.won&&K.last_ap>=v;la=!B&&X;na=B&&C&&X;if((qa=la||na)&&ga&&K.last_ap>=(l[da][R].last_ap?l[da][R].last_ap:0))l[da][R]=K;return}Y=K.level-a.p.level;ba=l[da][R].level?l[da][R].level-a.p.level:0-a.p.level;if(ba!==0)if(ba>0)if(Y>=0&&Y<=s&&Y>ba){$u.log(3,R+" "+da+" better level match",l[da][R].level,K.level,[l[da][R],K]);l[da][R]=K}else{if(Y>s&&Y<ba){$u.log(3,R+" "+da+" better level match",
l[da][R].level,K.level,[l[da][R],K]);l[da][R]=K}}else if(Y<=s&&Y>ba){$u.log(3,R+" "+da+" better level match",l[da][R].level,K.level,[l[da][R],K]);l[da][R]=K}}catch(wa){$u.warn("targetThis",K)}};for(c=b.minions.length-1;c>=0;c-=1){var Z={};Z=b.minions[c];if(Z.status==="Stunned"&&Z.healthNum<=0)$u.log(2,"Stunned minion",Z.index,Z);else{F(Z,"last");F(Z,"poly");if(Z.lost){$u.log(2,"Lost minion",Z.index,Z);F(Z,"suicide")}else{F(Z,"active");F(Z,"alive");F(Z,"health");F(Z,"chain")}}}O=["Cleric","Mage","Rogue",
"Warrior"];y=n.ab("orderArenaClass","");if(!y||y.length===0)y=O.slice();$u.log(3,"attackOrderList",y);T=["chain","active","health","alive","last"];G&&T.splice(3,0,"suicide");o?T.unshift("poly"):T.splice(1,0,"poly");$u.log(3,"typeOrderList",T);c=0;for(g=T.length;c<g;c+=1){if(H)break;U=T[c];$u.log(3,"oType",U);d=0;for(h=y.length;d<h;d+=1){P=y[d].toString().toLowerCase().ucFirst();$u.log(3,"uOrder",P);if(O.hasIndexOf(P))if(!i.isEmptyObject(l[P][U])){m=l[P][U];$u.log(3,"done",P,U);H=f;break}}}i.isEmptyObject(m)?
$u.warn("No target found!"):$u.log(1,"Target "+m.mclass+" "+U,m.index,m,l);return m}catch(fa){$u.error("ERROR in arena.getTargetMinion: "+fa)}}};I={k:[],ta:function(){this.data={userId:0,nameStr:"",rankStr:"",rankNum:0,warRankStr:"",warRankNum:0,levelNum:0,armyNum:0,deityNum:0,deityStr:"",invadewinsNum:0,invadelossesNum:0,duelwinsNum:0,duellossesNum:0,warwinsNum:0,warlossesNum:0,defendwinsNum:0,defendlossesNum:0,statswinsNum:0,statslossesNum:0,goldNum:0,chainCount:0,invadeLostTime:0,duelLostTime:0,
warLostTime:0,deadTime:0,chainTime:0,ignoreTime:0,aliveTime:0,attackTime:0,selectTime:0,unknownTime:0,newRecord:f}},de:{0:"Acolyte",1:"Scout",2:"Soldier",3:"Elite Soldier",4:"Squire",5:"Knight",6:"First Knight",7:"Legionnaire",8:"Centurion",9:"Champion",10:"Lieutenant Commander",11:"Commander",12:"High Commander",13:"Lieutenant General",14:"General",15:"High General",16:"Baron",17:"Earl",18:"Duke",19:"Prince",20:"King",21:"High King"},li:{0:"No Rank",1:"Reserve",2:"Footman",3:"Corporal",4:"Lieutenant",
5:"Captain",6:"First Captain",7:"Blackguard",8:"Warguard",9:"Master Warguard",10:"Lieutenant Colonel",11:"Colonel",12:"First Colonel",13:"Lieutenant Warchief",14:"Warchief",15:"High Warchief"},hbest:2,load:function(){try{I.k=J.getItem("battle.records","default");if(I.k==="default"||!i.isArray(I.k))I.k=J.setItem("battle.records",[]);I.hbest=I.hbest===M?JSON.hbest(I.k):I.hbest;$u.log(3,"battle.load Hbest",I.hbest);j.setItem("BattleDashUpdate",f);$u.log(3,"battle.load",I.k);return f}catch(b){$u.error("ERROR in battle.load: "+
b);return M}},save:function(){try{J.setItem("battle.records",I.k,I.hbest,M);j.setItem("BattleDashUpdate",f);$u.log(3,"battle.save",I.k);return f}catch(b){$u.error("ERROR in battle.save: "+b);return M}},clear:function(){try{I.k=J.setItem("battle.records",[]);j.setItem("BattleDashUpdate",f);return f}catch(b){$u.error("ERROR in battle.clear: "+b);return M}},getItem:function(b){try{var c=0,d=0,g=M,h=ea;if(b===""||$u.isNaN(b)||b<1){$u.warn("userId",b);e("Invalid identifying userId!")}c=0;for(d=I.k.length;c<
d;c+=1)if(I.k[c].userId===b){g=f;break}if(g){$u.log(3,"Got battle record",b,I.k[c]);I.k[c].newRecord=M;return I.k[c]}else{h=new I.ta;h.data.userId=b;$u.log(3,"New battle record",b,h.data);return h.data}}catch(l){$u.error("ERROR in battle.getItem: "+l);return M}},setItem:function(b){try{if(!b||!i.isPlainObject(b))e("Not passed a record");if(b.userId===""||$u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b.userId);e("Invalid identifying userId!")}var c=0,d=0,g=M;c=0;for(d=I.k.length;c<d;c+=1)if(I.k[c].userId===
b.userId){g=f;break}b.newRecord=M;if(g){I.k[c]=b;$u.log(3,"Updated battle record",b,I.k)}else{I.k.push(b);$u.log(3,"Added battle record",b,I.k)}I.save();return f}catch(h){$u.error("ERROR in battle.setItem: "+h,b);return M}},deleteItem:function(b){try{var c=0,d=0,g=M;if(b===""||$u.isNaN(b)||b<1){$u.warn("userId",b);e("Invalid identifying userId!")}c=0;for(d=I.k.length;c<d;c+=1)if(I.k[c].userId===b){g=f;break}if(g){I.k.splice(c,1);I.save();$u.log(3,"Deleted battle record",b,I.k);return f}else{$u.warn("Unable to delete battle record",
b,I.k);return M}}catch(h){$u.error("ERROR in battle.deleteItem: "+h);return M}},oe:function(b){try{var c="",d=["3f56e5f147545c2069f615aa2ebc80d2eef34d48","8caeb4b385c1257419ee18dee47cfa3a1271ba77","02752cf4b979dd5a77b53694917a60f944cb772f","c644f2fdcf1a7d721b82efab5313df609442c4f9","8d29caf6400807789964185405b0f442e6cacae7","7f04c6d6d1110ce05532ca508efde5dbafe7ec17"];if(!d.length||!J.getItem("AllowProtected",f,f))return M;if(b.userId===""||$u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b);e("Invalid identifying userId!")}c=
(b.userId.toString().SHA1()+b.nameStr).SHA1();return d.hasIndexOf(c)}catch(g){$u.error("ERROR in battle.hashCheck: "+g);return M}},dd:M,rh:function(){try{var b=i("#"+a.domain.id[a.domain.which]+"results_main_wrapper"),c=i(),d=i(),g="",h=0,l={},m="",k={Db:0,userName:"",tb:"",dc:0,gold:0,Qa:M,pe:M,ud:M};if($u.hasContent(i("img[src*='battle_victory.gif']",b))){m="war_win_left.jpg";k.Qa=f}else if($u.hasContent(i("img[src*='battle_defeat.gif']",b)))m="war_lose_left.jpg";else{c=i("span[class='result_body']",
b);if($u.hasContent(c)){g=$u.setContent(g,"").trim();if(/Your opponent is hiding, please try again/.test(g)){k.pe=f;$u.log(1,"Your opponent is hiding")}else{k.ud=f;$u.warn("Unable to determine won, lost or hiding!")}}else{k.ud=f;$u.warn("Unable to determine won or lost!")}return k}if($u.hasContent(i("img[src*='war_button_war_council.gif']",b))){k.tb="War";c=i("div[class='result']",b);if($u.hasContent(c)){d=i("img[src*='war_rank_small_icon']",c).eq(0);if($u.hasContent(d)){g=$u.setContent(d.parent().text(),
"").trim();if($u.hasContent(g)){h=g.match(/(\d+)\s+War Points/i);if($u.hasContent(h))k.dc=h;else $u.warn("Unable to match war points",g)}else $u.warn("Unable to find war points text in",d.parent())}else $u.log(3,"Unable to find war_rank_small_icon in",c);d=i("b[class*='gold']",c).eq(0);if($u.hasContent(d)){h=$u.setContent(d.text(),"").trim().R();if($u.hasContent(h))k.gold=h;else $u.warn("Unable to find gold text in",d)}else $u.warn("Unable to find gold element in",c);d=c.find("input[name='target_id']",
c).eq(0);if($u.hasContent(d)){h=$u.setContent(d.attr("value"),"").R();if($u.hasContent(h))k.Db=h;else{$u.warn("No value in",d);e("Unable to get userId!")}}else{$u.warn("Unable to find target_id in",c);e("Unable to get userId!")}d=i("div[style*='"+m+"']",a.C);if($u.hasContent(d)){g=$u.setContent(d.text(),"").trim().replace("'s Defense","");if($u.hasContent(g))k.userName=g;else $u.warn("Unable to match user's name in",g)}else $u.warn("Unable to find ",m)}else{$u.warn("Unable to find result div");e("Unable to get userId!")}}else{if($u.hasContent(i("input[src*='battle_invade_again.gif']",
b)))k.tb="Invade";else if($u.hasContent(i("input[src*='battle_duel_again.gif']",b)))k.tb="Duel";else if($u.hasContent(i("img[src*='icon_weapon.gif']",b)))k.tb="Duel";else if($u.hasContent(i("div[class='full_invade_results']",b)))k.tb="Invade";if($u.hasContent(k.tb)){c=i("div[class='result']",b);if($u.hasContent(c)){d=i("img[src*='battle_rank_small_icon']",c).eq(0);if($u.hasContent(d)){g=$u.setContent(d.parent().text(),"").trim();if($u.hasContent(g)){h=g.regex(/(\d+)\s+Battle Points/i);if($u.hasContent(h))k.dc=
h;else{g=$u.setContent(d.parent().parent().text(),"").trim();if($u.hasContent(g)){h=g.regex(/(\d+)\s+Battle Points/i);if($u.hasContent(h))k.dc=h;else $u.warn("Unable to match battle points",g)}else $u.warn("Unable to find battle points text in",d.parent().parent())}}else $u.warn("Unable to find battle points text in",d.parent())}else $u.log(3,"Unable to find battle_rank_small_icon in",c);d=i("b[class*='gold']",c).eq(0);if($u.hasContent(d)){h=$u.setContent(d.text(),"").trim().R();if($u.hasContent(h))k.gold=
h;else $u.warn("Unable to find gold text in",d)}else $u.warn("Unable to find gold element in",c);d=i("a[href*='keep.php?casuser=']",c).eq(0);if($u.hasContent(d)){g=$u.setContent(d.attr("href"),"");if($u.hasContent(g)){h=g.regex(/user=(\d+)/i);if($u.hasContent(h))k.Db=h;else{$u.warn("Unable to match user's id in",g);e("Unable to get userId!")}g=$u.setContent(d.text(),"").trim();if($u.hasContent(g))k.userName=g;else $u.warn("Unable to match user's name in",g)}else{$u.warn("No href text in",d);e("Unable to get userId!")}}else{$u.warn("Unable to find keep.php?casuser= in",
c);e("Unable to get userId!")}}else{$u.warn("Unable to find result div");e("Unable to get userId!")}}else{$u.warn("Unable to determine battle type");e("Unable to get userId!")}}l=I.getItem(k.Db);l.attackTime=(new Date).getTime();if(k.userName&&k.userName!==l.nameStr){$u.log(1,"Updating battle record user name, from/to",l.nameStr,k.userName);l.nameStr=k.userName}if(k.Qa)l.statswinsNum+=1;else l.statslossesNum+=1;switch(k.tb){case "Invade":if(k.Qa)l.invadewinsNum+=1;else{l.invadelossesNum+=1;l.invadeLostTime=
(new Date).getTime()}break;case "Duel":if(k.Qa)l.duelwinsNum+=1;else{l.duellossesNum+=1;l.duelLostTime=(new Date).getTime()}break;case "War":$u.log(1,"War Result");if(k.Qa){l.warwinsNum+=1;$u.log(1,"War Win",l.warwinsNum)}else{l.warlossesNum+=1;l.warLostTime=(new Date).getTime();$u.log(1,"War Loss",l.userId,l)}break;default:$u.warn("Battle type unknown!",k.tb)}I.setItem(l);return k}catch(o){$u.error("ERROR in battle.getResult: "+o);return M}},bh:function(){try{var b=i("div[class='results']",a.oa),
c="",d={},g=M;if(j.getItem("lastBattleID",0))d=I.getItem(j.getItem("lastBattleID",0));if($u.hasContent(b)){c=$u.setContent(b.text(),"").trim();if($u.hasContent(c)){if(/Your opponent is dead or too weak to battle/.test(c)){$u.log(1,"This opponent is dead or hiding: ",j.getItem("lastBattleID",0));if(i.isPlainObject(d)&&!i.isEmptyObject(d))d.deadTime=(new Date).getTime();g=f}}else{if(i.isPlainObject(d)&&!i.isEmptyObject(d))d.unknownTime=(new Date).getTime();$u.warn("Unable to determine if user is dead!",
b);g=ea}}else{if(i.isPlainObject(d)&&!i.isEmptyObject(d))d.unknownTime=(new Date).getTime();$u.warn("Unable to find any results!");g=ea}g!==M&&i.isPlainObject(d)&&!i.isEmptyObject(d)&&I.setItem(d);return g}catch(h){$u.error("ERROR in battle.deadCheck: "+h)}},ge:function(){try{var b={},c=0,d=0,g=0,h=0,l={};if(!I.dd)return f;$u.log(2,"Checking Battle Results");I.dd=M;j.setItem("BattleChainId",0);if(I.bh()!==M)return f;l=I.rh();if(!l||l.pe===f)return f;if(l.ud===f){if(j.getItem("lastBattleID",0)){b=
I.getItem(j.getItem("lastBattleID",0));b.unknownTime=(new Date).getTime();I.setItem(b)}return f}b=I.getItem(l.Db);if(l.Qa){$u.log(1,"We Defeated ",l.userName);c=$u.setContent(b.chainTime,0);d=n.getItem("ChainBP","");g=n.getItem("ChainGold","");if(u.ya(c,86400)&&(d!==""&&!$u.isNaN(d)&&d>=0||g!==""&&!$u.isNaN(g)&&g>=0)){if(d!==""&&!$u.isNaN(d)&&d>=0)if(l.dc>=d){j.setItem("BattleChainId",l.Db);$u.log(1,"Chain Attack: "+l.Db+(l.tb==="War"?"  War Points: ":"  Battle Points: ")+l.dc)}else b.ignoreTime=
(new Date).getTime();if(g!==""&&!$u.isNaN(g)&&g>=0)if(l.gold>=g){j.setItem("BattleChainId",l.Db);$u.log(1,"Chain Attack: "+l.Db+" Gold: "+l.wi)}else b.ignoreTime=(new Date).getTime()}b.chainCount=b.chainCount?b.chainCount+=1:1;h=n.getItem("MaxChains",4);if(h===""||$u.isNaN(h)||h<0)h=4;if(b.chainCount>=h){$u.log(1,"Lets give this guy a break. Chained",b.chainCount);b.chainTime=(new Date).getTime();b.chainCount=0}}else{$u.log(1,"We Were Defeated By ",l.userName);b.chainCount=0;b.chainTime=0}I.setItem(b);
return f}catch(m){$u.error("ERROR in battle.checkResults: "+m);return M}},Bb:function(){j.setItem("BattleTargetUpto",j.getItem("BattleTargetUpto",0)+1)},vh:function(b){try{var c="",d=[],g="",h="",l="";h=n.getItem("TargetType","Freshmeat");l=j.getItem("targetFromraid","");if(b==="DemiPoints"){if(l&&h==="Raid")return"Raid";return"Freshmeat"}if(h==="Raid"){if(l)return"Raid";a.u("battle_mess","No Raid To Attack");return"NoRaid"}if(h==="Freshmeat")return"Freshmeat";if(c=j.getItem("BattleChainId",0))return c;
d=n.ab("BattleTargets","");if(!d.length)return M;g=j.getItem("BattleTargetUpto",0);if(g>d.length-1){g=0;j.setItem("BattleTargetUpto",0)}if(!d[g]){I.Bb();return M}a.u("battle_mess","Battling User "+g+"/"+d.length+" "+d[g]);if((d[g]===""||$u.isNaN(d[g])?d[g].toLowerCase():d[g])==="raid"){if(l)return"Raid";a.u("battle_mess","No Raid To Attack");I.Bb();return M}return d[g]}catch(m){$u.error("ERROR in battle.getTarget: "+m);return M}},click:function(b,c){try{j.setItem("ReleaseControl",f);I.dd=f;j.setItem("clickUrl",
a.domain.link+"/"+(c==="Raid"?"raid.php":"battle.php"));a.ca(b);return f}catch(d){$u.error("ERROR in battle.click: "+d);return M}},Ia:{Raid:{Invade1:"raid_attack_button.gif",Invade5:"raid_attack_button3.gif",Duel1:"raid_attack_button2.gif",Duel5:"raid_attack_button4.gif",regex1:/[0-9]+\. (.+)\s*Rank: ([0-9]+) ([^0-9]+) ([0-9]+) ([^0-9]+) ([0-9]+)/i,refresh:"raid",image:"tab_raid_on.gif"},Freshmeat:{Invade:"battle_01.gif",Duel:"battle_02.gif",War:"war_button_duel.gif",regex1:RegExp("(.+)\\s*\\(Level ([0-9]+)\\)\\s*Battle: ([A-Za-z ]+) \\(Rank ([0-9]+)\\)\\s*War: ([A-Za-z ]+) \\(Rank ([0-9]+)\\)\\s*([0-9]+)",
"i"),regex2:/(.+)\s*\(Level ([0-9]+)\)\s*Battle: ([A-Za-z ]+) \(Rank ([0-9]+)\)\s*([0-9]+)/i,warLevel:f,refresh:"battle_on.gif",image:"battle_on.gif"}},qd:function(b){try{var c=f,d=0;for(d=0;d<5;d+=1)if(b||n.getItem("DemiPoint"+d,f))if(a.fa[a.ke[d]].daily.dif>0){c=M;break}return c}catch(g){$u.error("ERROR in battle.selectedDemisDone: "+g)}},tc:function(b){try{var c=b==="Raid"?n.getItem("BattleType","Invade")+j.getItem("RaidStaminaReq",1):n.getItem("BattleType","Invade"),d=i("input[src*='"+I.Ia[b][c]+
"']",a.oa);c=M;var g=[],h="",l=M,m=i(),k="",o=0,r=[],s=0,v=0,B=0,G=0,A=0,w=0,L=0,y={},O={},T=0,H=0,P=0,U=i(),F=i(),Z="",fa=0,K=ea;if(!$u.hasContent(d)){$u.warn("Not on battlepage");a.Q(a.zb);return M}h=j.getItem("BattleChainId",0);j.setItem("BattleChainId","");s=n.getItem("FreshMeatMinRank",99);$u.log(3,"FreshMeatMinRank",s);if(s===""||$u.isNaN(s)){s!==""&&$u.warn("FreshMeatMinRank is NaN, using default",99);s=99}v=J.getItem("FreshMeatMaxLevel",99999,f);$u.log(3,"FreshMeatMaxLevel",v);if(v===""||
$u.isNaN(v)){v=99999;$u.warn("FreshMeatMaxLevel is NaN, using default",v)}B=n.getItem("FreshMeatARBase",0.5);$u.log(3,"FreshMeatARBase",B);if(B===""||$u.isNaN(B)){B=0.5;$u.warn("FreshMeatARBase is NaN, using default",B)}G=J.getItem("FreshMeatARMax",99999,f);$u.log(3,"FreshMeatARMax",G);if(G===""||$u.isNaN(G)){G=99999;$u.warn("FreshMeatARMax is NaN, using default",G)}A=J.getItem("FreshMeatARMin",0,f);$u.log(3,"FreshMeatARMin",A);if(A===""||$u.isNaN(A)){A=0;$u.warn("FreshMeatARMin is NaN, using default",
A)}H=0;for(P=d.length;H<P;H+=1){U=i();r=[];k="";T=-1;y=new I.ta;y.data.button=i(d.eq(H));if(b==="Raid"){U=y.data.button.parents().eq(4);k=$u.setContent(U.children().eq(1).text(),"").trim();r=I.Ia.Raid.regex1.exec(k);if(!$u.hasContent(r)){$u.warn("Can't match Raid regex in ",k);continue}y.data.nameStr=$u.setContent(r[1],"").trim();y.data.rankNum=$u.setContent(r[2],"").parseInt();y.data.rankStr=I.de[y.data.rankNum];y.data.levelNum=$u.setContent(r[4],"").parseInt();y.data.armyNum=$u.setContent(r[6],
"").parseInt()}else{U=y.data.button.parents("tr").eq(0);if(!$u.hasContent(U)){$u.warn("Can't find parent tr in tempRecord.data['button']");continue}o=$u.setContent(i("img[src*='symbol_']",U).attr("src"),"").regex(/(\d+)\.jpg/i);if($u.hasContent(o)){y.data.deityNum=o-1;if(!(y.data.deityNum>=0&&y.data.deityNum<=4)){$u.warn("Demi number is not between 0 and 4",y.data.deityNum);y.data.deityNum=0}y.data.deityStr=a.ke[y.data.deityNum]}else $u.warn("Unable to match demi number in txt");if(n.getItem("DemiPointsFirst",
M)&&!j.getItem("DemiPointsDone",f)&&n.getItem("WhenMonster","Never")!=="Never"){if(a.fa[y.data.deityStr].daily.dif<=0||!n.getItem("DemiPoint"+y.data.deityNum,f)){$u.log(2,"Daily Demi Points done for",y.data.deityStr);continue}}else if(n.getItem("WhenBattle","Never")==="Demi Points Only")if(a.fa[y.data.deityStr].daily.dif<=0){$u.log(2,"Daily Demi Points done for",y.data.deityStr);continue}k=$u.setContent(U.text(),"").trim();if(!$u.hasContent(k)){$u.warn("Can't find txt in tr");continue}if(I.Ia.Freshmeat.warLevel){r=
I.Ia.Freshmeat.regex1.exec(k);if(!r){r=I.Ia.Freshmeat.regex2.exec(k);I.Ia.Freshmeat.warLevel=M}}else{r=I.Ia.Freshmeat.regex2.exec(k);if(!r){r=I.Ia.Freshmeat.regex1.exec(k);I.Ia.Freshmeat.warLevel=f}}if(!r){$u.warn("Can't match Freshmeat regex in ",k);continue}y.data.nameStr=$u.setContent(r[1],"").trim();y.data.levelNum=$u.setContent(r[2],"").parseInt();y.data.rankStr=$u.setContent(r[3],"").trim();y.data.rankNum=$u.setContent(r[4],"").parseInt();if(I.Ia.Freshmeat.warLevel){y.data.warRankStr=$u.setContent(r[5],
"").trim();y.data.warRankNum=$u.setContent(r[6],"").parseInt();y.data.armyNum=$u.setContent(r[7],"").parseInt()}else y.data.armyNum=$u.setContent(r[5],"").parseInt()}m=i("input[name='target_id']",U);if($u.hasContent(m)){y.data.userId=$u.setContent(m.attr("value"),"").parseInt();if(!I.oe(y.data)){w=a.p.level/y.data.levelNum;L=B*w;L=Math.min(L,G);L=Math.max(L,A);if(L<=0)$u.warn("Bad ratio",L,B,A,G,w);else if(y.data.levelNum-a.p.level>v)$u.log(2,"Greater than maxLevel",{levelDif:y.data.levelNum-a.p.level,
minRank:s});else{if(n.getItem("BattleType","Invade")==="War"&&I.Ia.Freshmeat.warLevel){if(a.p.rank.war&&a.p.rank.war-y.data.warRankNum>s){$u.log(2,"Greater than war minRank",{rankDif:a.p.rank.war-y.data.rankNum,minRank:s});continue}}else if(a.p.rank.battle&&a.p.rank.battle-y.data.rankNum>s){$u.log(2,"Greater than battle minRank",{rankDif:a.p.rank.battle-y.data.rankNum,minRank:s});continue}if(a.p.army.capped&&y.data.armyNum>a.p.army.capped*L)$u.log(2,"Greater than armyRatio",{armyRatio:L.dp(2),armyNum:y.data.armyNum,
armyMax:(a.p.army.capped*L).dp()});else{n.getItem("BattleType","Invade")==="War"&&I.Ia.Freshmeat.warLevel?$u.log(1,"ID: "+y.data.userId.toString().rpad(" ",15)+" Level: "+y.data.levelNum.toString().rpad(" ",4)+" War Rank: "+y.data.warRankNum.toString().rpad(" ",2)+" Army: "+y.data.armyNum):$u.log(1,"ID: "+y.data.userId.toString().rpad(" ",15)+" Level: "+y.data.levelNum.toString().rpad(" ",4)+" Battle Rank: "+y.data.rankNum.toString().rpad(" ",2)+" Army: "+y.data.armyNum);O=I.getItem(y.data.userId);
if(!n.getItem("IgnoreBattleLoss",M)){switch(n.getItem("BattleType","Invade")){case "Invade":T=$u.setContent(O.invadeLostTime,0);break;case "Duel":T=$u.setContent(O.duelLostTime,0);break;case "War":T=$u.setContent(O.warlostTime,0);break;default:$u.warn("Battle type unknown!",n.getItem("BattleType","Invade"))}if(O&&!O.newRecord&&!u.ya(T,604800)){$u.log(1,"We lost "+n.getItem("BattleType","Invade")+" to this id this week: ",y.data.userId);continue}}T=$u.setContent(O.unknownTime,0);if(O&&!O.newRecord&&
!u.ya(T,3600))$u.log(1,"User was battled but results unknown in the last hour: ",y.data.userId);else{T=$u.setContent(O.deadTime,0);if(O&&!O.newRecord&&!u.ya(T,3600))$u.log(1,"User was dead in the last hour: ",y.data.userId);else{T=$u.setContent(O.chainTime,0);if(O&&!O.newRecord&&!u.ya(T,86400))$u.log(1,"We chained user within 2 days: ",y.data.userId);else{T=$u.setContent(O.ignoreTime,0);if(O&&!O.newRecord&&!u.ya(T,604800))$u.log(1,"User didn't meet chain requirements this week: ",y.data.userId);else{y.data.score=
(b==="Raid"?0:y.data.rankNum)-y.data.armyNum/w/a.p.army.capped;if(y.data.userId===h)l=f;y.data.targetNumber=H+1;$u.log(3,"tempRecord/levelm",y.data,r);g.push(y.data);y=ea;if(H===0&&b==="Raid")c=f}}}}}}}}else $u.warn("Could not find 'target_id' input")}g.sort($u.sortBy(f,"score"));if($u.hasContent(g))if(l){F=d.eq(0).parent().parent();m=F.find("input[name='target_id']");if($u.hasContent(m)){m.attr("value",h);$u.log(1,"Chain attacking: ",h);I.click(d.eq(0),b);j.setItem("lastBattleID",h);a.u("battle_mess",
"Attacked: "+j.getItem("lastBattleID",0));j.setItem("notSafeCount",0);return f}$u.warn("Could not find 'target_id' input")}else if(n.getItem("PlusOneKills",M)&&b==="Raid")if(c){F=d.eq(0).parent().parent();m=F.find("input[name='target_id']");if($u.hasContent(m)){Z=(k=m.attr("value"))?k.parseInt():0;m.attr("value","200000000000001");$u.log(1,"Target ID Overriden For +1 Kill. Expected Defender: ",Z);I.click(d.eq(0),b);j.setItem("lastBattleID",Z);a.u("battle_mess","Attacked: "+j.getItem("lastBattleID",
0));j.setItem("notSafeCount",0);return f}$u.warn("Could not find 'target_id' input")}else $u.log(1,"Not safe for +1 kill.");else{fa=j.getItem("lastBattleID",0);H=0;for(P=g.length;H<P;H+=1)if(!(!fa&&fa===g[H].id)){if($u.isDefined(g[H].button)){$u.log(2,"Found Target score: "+g[H].score.dp(2)+" id: "+g[H].userId+" Number: "+g[H].targetNumber);I.click(g[H].button,b);delete g[H].score;delete g[H].targetNumber;delete g[H].button;j.setItem("lastBattleID",g[H].userId);g[H].aliveTime=(new Date).getTime();
O=I.getItem(g[H].userId);i.extend(f,O,g[H]);I.setItem(O);a.u("battle_mess","Attacked: "+fa);j.setItem("notSafeCount",0);return f}$u.warn("Attack button is null or undefined")}}j.setItem("notSafeCount",j.getItem("notSafeCount",0)+1);if(j.getItem("notSafeCount",0)>100){a.u("battle_mess","Leaving Battle. Will Return Soon.");$u.log(1,"No safe targets limit reached. Releasing control for other processes: ",j.getItem("notSafeCount",0));j.setItem("notSafeCount",0);return M}a.u("battle_mess","No targets matching criteria");
$u.log(1,"No safe targets: ",j.getItem("notSafeCount",0));if(b==="Raid"){K=p.Ob[j.getItem("targetFromraid","")];if(j.getItem("page","")==="raid"&&K)a.ca(K);else{u.setItem("RaidNoTargetDelay",J.getItem("RaidNoTargetDelay",45,f));a.Q(a.zb+",raid")}}else a.Q(a.zb+",battle_on.gif");return f}catch(R){$u.error("ERROR in battle.freshmeat: "+R);return M}}};Q={Ci:[],soldiersSortable:[],item:[],itemSortable:[],vc:[],magicSortable:[],gd:{Weapon:/axe|blade|bow|cleaver|cudgel|dagger|edge|grinder|halberd|lance|mace|morningstar|rod|saber|scepter|spear|staff|stave|sword |sword$|talon|trident|wand|^Avenger$|Celestas Devotion|Crystal Rod|Daedalus|Deliverance|Dragonbane|Excalibur|Holy Avenger|Incarnation|Ironhart's Might|Judgement|Justice|Lightbringer|Oathkeeper|Onslaught|Punisher|Soulforge|Bonecrusher|Lion Fang|Exsanguinator|Lifebane|Deathbellow|Moonclaw/i,
Shield:/aegis|buckler|shield|tome|Defender|Dragon Scale|Frost Tear Dagger|Harmony|Sword of Redemption|Terra's Guard|The Dreadnought|Purgatory|Zenarean Crest|Serenes Arrow|Hour Glass/i,Helmet:/cowl|crown|helm|horns|mask|veil|Tiara|Virtue of Fortitude/i,Glove:/gauntlet|glove|hand|bracer|fist|Slayer's Embrace|Soul Crusher|Soul Eater|Virtue of Temperance/i,Armor:/armor|belt|chainmail|cloak|epaulets|gear|garb|pauldrons|plate|raiments|robe|tunic|vestment|Faerie Wings|Castle Rampart/i,Amulet:/amulet|bauble|charm|crystal|eye|flask|insignia|jewel|lantern|memento|necklace|orb|pendant|shard|signet|soul|talisman|trinket|Heart of Elos|Mark of the Empire|Paladin's Oath|Poseidons Horn| Ring|Ring of|Ruby Ore|Terra's Heart|Thawing Star|Transcendence|Tooth of Gehenna|Caldonian Band|Blue Lotus Petal| Bar|Magic Mushrooms|Dragon Ashes/i},
ta:function(){this.data={name:"",image:"",type:"",upkeep:0,hourly:0,atk:0,def:0,owned:0,cost:0,api:0,dpi:0,mpi:0}},types:["soldiers","item","magic"],ib:function(b){try{if(!$u.isString(b)||b===""||!Q.types.hasIndexOf(b)){$u.warn("Type passed to copy2sortable: ",b);e("Invalid type value!")}var c=new ca.order;i.extend(f,c.data,j.getItem(b.ucFirst()+"Sort",c.data));Q[b+"Sortable"]=[];i.merge(Q[b+"Sortable"],Q[b]);Q[b+"Sortable"].sort($u.sortBy(c.data.reverse.a,c.data.value.a,$u.sortBy(c.data.reverse.b,
c.data.value.b,$u.sortBy(c.data.reverse.c,c.data.value.c))));return f}catch(d){$u.error("ERROR in town.copy2sortable: "+d);return M}},Di:3,xi:2,zi:2,load:function(b){try{if(!$u.isString(b)||b===""||!Q.types.hasIndexOf(b)){$u.warn("Type passed to load: ",b);e("Invalid type value!")}Q[b]=J.getItem(b+".records","default");if(Q[b]==="default"||!i.isArray(Q[b]))Q[b]=J.setItem(b+".records",[]);Q[b+"hbest"]=Q[b+"hbest"]===M?JSON.hbest(Q[b]):Q[b+"hbest"];$u.log(3,"town.load "+b+" Hbest",Q[b+"hbest"]);Q.ib(b);
j.setItem(b.ucFirst()+"DashUpdate",f);$u.log(3,"town.load",b,Q[b]);return f}catch(c){$u.error("ERROR in town.load: "+c);return M}},save:function(b){try{if(!$u.isString(b)||b===""||!Q.types.hasIndexOf(b)){$u.warn("Type passed to save: ",b);e("Invalid type value!")}J.setItem(b+".records",Q[b],Q[b+"hbest"],M);j.setItem(b.ucFirst()+"DashUpdate",f);$u.log(3,"town.save",b,Q[b]);return f}catch(c){$u.error("ERROR in town.save: "+c);return M}},ph:function(b){try{var c="",d=0,g=0,h=0,l=0,m=[],k="";for(c in Q.gd)if(Q.gd.hasOwnProperty(c))if(m=
b.match(Q.gd[c])){d=0;for(g=m.length;d<g;d+=1){h=m[d].length;if(h>l){k=c;l=h}}}return k}catch(o){$u.error("ERROR in town.getItemType: "+o)}},Oc:function(b){try{var c=i(),d=i(),g="",h={},l=f,m=M;if(!$u.isString(b)||b===""||!Q.types.hasIndexOf(b)){$u.warn("Type passed to load: ",b);e("Invalid type value!")}Q[b]=[];(c=a.oa.find("td[class*='eq_buy_row']"))&&c.length&&c.each(function(){var o=i(this);h=new Q.ta;if((d=o.find("div[class='eq_buy_txt_int'] strong"))&&d.length===1){g=d.text();h.data.name=g?
g.trim():"";h.data.type=Q.ph(h.data.name)}else{$u.warn("Unable to get item name in",b);l=M}if(l){if((d=o.find("img"))&&d.length===1){g=d.attr("src");h.data.image=g?g.basename():""}else $u.log(4,"No image found for",b,h.data.name);if((d=o.find("div[class='eq_buy_txt_int'] span[class='negative']"))&&d.length===1){g=d.text();h.data.upkeep=g?g.R():0}else $u.log(4,"No upkeep found for",b,h.data.name);if((d=o.find("div[class='eq_buy_stats_int'] div"))&&d.length===2){g=d.eq(0).text();h.data.atk=g?g.R():
0;g=d.eq(1).text();h.data.def=g?g.R():0;h.data.api=(h.data.atk+h.data.def*0.7).dp(2);h.data.dpi=(h.data.def+h.data.atk*0.7).dp(2);h.data.mpi=((h.data.api+h.data.dpi)/2).dp(2)}else $u.warn("No atk/def found for",b,h.data.name);if((d=o.find("div[class='eq_buy_costs_int'] strong[class='gold']"))&&d.length===1){g=d.text();h.data.cost=g?g.R():0}else $u.log(4,"No cost found for",b,h.data.name);if((d=o.find("div[class='eq_buy_costs_int'] tr:last td").eq(0))&&d.length===1){g=d.text();h.data.owned=g?g.R():
0;h.data.hourly=h.data.owned*h.data.upkeep}else $u.warn("No number owned found for",b,h.data.name);Q[b].push(h.data);m=f}});if(m){Q.save(b);Q.ib(b);$u.log(2,"Got town details for",b)}else $u.log(1,"Nothing to save for",b);return f}catch(k){$u.error("ERROR in town.GetItems: "+k);return M}},zh:function(b){try{if(!$u.isString(b)||b==="")e("Invalid identifying name!");var c=0,d=0,g=M;c=0;for(d=Q.vc.length;c<d;c+=1)if(Q.vc[c].name===b){$u.log(3,"town.haveOrb",Q.vc[c]);if(Q.vc[c].owned)g=f;break}return g}catch(h){$u.error("ERROR in town.haveOrb: "+
h)}},ac:function(b,c){try{var d=0,g=0,h=-1,l=-1,m=0,k=M;for(d=Q.types.length-1;d>=0;d-=1){if(k)break;for(g=Q[Q.types[d]].length-1;g>=0;g-=1)if(Q[Q.types[d]][g].name&&Q[Q.types[d]][g].name===b){h=d;l=g;if(c&&Q[Q.types[d]][g].image&&Q[Q.types[d]][g].image===c){k=f;break}}}if(h>-1&&l>-1)m=Q[Q.types[h]][l].owned;return m}catch(o){$u.error("ERROR in town.getCount: "+o)}}};S={k:[],hbest:2,compress:f,load:function(){try{if(!n.getItem("enableTitles",f)&&!n.getItem("goblinHinting",f)&&!n.getItem("enableRecipeClean",
f))return f;S.k=ka.getItem("spreadsheet.records","default");if(S.k==="default"||!i.isArray(S.k)||!S.k.length){S.k=[];i.ajax({url:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20csv%20where%20url%3D'http%3A%2F%2Fspreadsheets.google.com%2Fpub%3Fkey%3D0At1LY6Vd3Bp9dFFXX2xCc0x3RjJpN1VNbER5dkVvTXc%26hl%3Den%26output%3Dcsv'&format=json",dataType:"json",success:function(c){$u.log(3,"msg",c);var d=[],g=0,h=0,l=0,m={},k=ea;g={};var o=0,r=[];h="";d=c.query.results.row;g=d[0];for(h in g)if(g.hasOwnProperty(h))o=
r.push(g[h].toLowerCase());g=1;for(h=d.length;g<h;g+=1){m={};for(l=0;l<o;l+=1)if(!$u.isDefined(r[l])||r[l]==="")$u.warn("Spreadsheet column is empty",l);else{k=d[g]["col"+l];if(!$u.isDefined(k)||k==="")k=ea;else if($u.isNaN(k)){if(r[l]==="attack"||r[l]==="defense")$u.warn("Spreadsheet "+r[l]+" cell is NaN",k);k=k.replace(/"/g,"")}else k=k.parseInt();m[r[l]]=k}S.k.push(m)}S.hbest=S.hbest===M?JSON.hbest(S.k):S.hbest;$u.log(3,"spreadsheet.records Hbest",S.hbest);ka.setItem("spreadsheet.records",S.k,
S.hbest,S.compress);$u.log(3,"spreadsheet.records",S.k)}})}else $u.log(3,"spreadsheet.records",S.k);return f}catch(b){$u.error("ERROR in spreadsheet.load: "+b);return M}},save:function(){try{S.setItem("spreadsheet.records",S.k);$u.log(3,"spreadsheet.save",S.k);return f}catch(b){$u.error("ERROR in spreadsheet.save: "+b);return M}},clear:function(){try{ka.deleteItem("spreadsheet.records");S.k=[];$u.log(3,"spreadsheet.clear",S.k);return f}catch(b){$u.error("ERROR in spreadsheet.clear: "+b);return M}},
wh:function(b,c){try{var d=0,g=-1,h=0,l="",m=M,k=M;for(d=S.k.length-1;d>=0;d-=1)if(S.k[d].name&&S.k[d].name===b){g=d;if(S.k[d].image&&S.k[d].image===c)break}if(g>-1){l=S.k[g].name+": "+S.k[g].type;if($u.isDefined(S.k[g].attack)&&$u.isDefined(S.k[g].defense))l+=", "+S.k[g].attack+"atk,"+S.k[g].defense+"def";if($u.isDefined(S.k[g].hero)){l+=", Hero: "+S.k[g].hero;h=x.Oh(S.k[g].hero);l+=" (Owned: "+h+")";m=h?M:f}if($u.isDefined(S.k[g].recipe1)){l+=", Recipe1: "+S.k[g].recipe1;h=S.k[g].recipe1==="Map of Atlantis"?
a.p.other.atlantis:Q.ac(S.k[g].recipe1,S.k[g].recipe1image);l+=" (Owned: "+h+")";m=h?M:f}if($u.isDefined(S.k[g].recipe2)){l+=", Recipe2: "+S.k[g].recipe2;h=Q.ac(S.k[g].recipe2,S.k[g].recipe2image);l+=" (Owned: "+h+")";m=h?M:f}if($u.isDefined(S.k[g].recipe3)){l+=", Recipe3: "+S.k[g].recipe3;h=Q.ac(S.k[g].recipe3,S.k[g].recipe3image);l+=" (Owned: "+h+")";m=h?M:f}if($u.isDefined(S.k[g].recipe4)){l+=", Recipe4: "+S.k[g].recipe4;h=Q.ac(S.k[g].recipe4,S.k[g].recipe4image);l+=" (Owned: "+h+")";m=h?M:f}if($u.isDefined(S.k[g].summon)){l+=
", Summon: "+S.k[g].summon;k=f}if($u.isDefined(S.k[g].comment))l+=", Comment: "+S.k[g].comment}return{title:l,opacity:k,hide:m}}catch(o){$u.error("ERROR in spreadsheet.getTitle: "+o)}},Gb:function(b){try{var c=i("#"+a.domain.id[a.domain.which]+"globalContainer img");c&&c.length&&c.each(function(){var g=i(this),h=i(),l=h="";l="";var m={};if(h=g.attr("title")){l=g.attr("src").basename();if((m=S.wh(h,l))&&i.isPlainObject(m)&&!i.isEmptyObject(m)&&m.title){g.attr("title",m.title);if(b&&(m.opacity||m.hide)){h=
g.parent().parent();l=h.attr("style");l+=m.opacity?" opacity: 0.3;":"";l+=m.hide?" display: none;":"";h.attr("style",l)}}}});return f}catch(d){$u.error("ERROR in spreadsheet.doTitles: "+d);return M}},Bh:function(b,c){try{var d=0,g=-1;for(d=S.k.length-1;d>=0;d-=1)if(S.k[d].name&&S.k[d].name===b){g=d;if(S.k[d].image&&S.k[d].image===c)break}return g>-1&&$u.isDefined(S.k[g].summon)?f:M}catch(h){$u.error("ERROR in spreadsheet.isSummon: "+h)}}};q={hb:{},types:["gifts","queue","history"],load:function(b){try{if(!$u.isString(b)||
b===""||!q.types.hasIndexOf(b)){$u.warn("Type passed to load: ",b);e("Invalid type value!")}q[b].k=J.getItem("gifting."+b,"default");if(q[b].k==="default"||!i.isArray(q[b].k))q[b].k=J.setItem("gifting."+b,[]);q[b].hbest=q[b].hbest===M?JSON.hbest(q[b].k):q[b].hbest;$u.log(3,"gifting."+b+" Hbest",q[b].hbest);$u.log(3,"gifting.load",b,q[b].k);j.setItem("Gift"+b.ucFirst()+"DashUpdate",f);return f}catch(c){$u.error("ERROR in gifting.load: "+c);return M}},save:function(b){try{if(!$u.isString(b)||b===""||
!q.types.hasIndexOf(b)){$u.warn("Type passed to load: ",b);e("Invalid type value!")}J.setItem("gifting."+b,q[b].k,q[b].hbest,M);$u.log(3,"gifting.save",b,q[b].k);j.setItem("Gift"+b.ucFirst()+"DashUpdate",f);return f}catch(c){$u.error("ERROR in gifting.save: "+c);return M}},clear:function(b){try{if(!$u.isString(b)||b===""||!q.types.hasIndexOf(b)){$u.warn("Type passed to clear: ",b);e("Invalid type value!")}q[b].k=J.setItem("gifting."+b,[]);q.hb=J.setItem("GiftEntry",{});j.setItem("Gift"+b.ucFirst()+
"DashUpdate",f);return f}catch(c){$u.error("ERROR in gifting.clear: "+c);return M}},init:function(){try{var b=f;q.load("gifts")||(b=M);q.load("queue")||(b=M);q.load("history")||(b=M);q.queue.fix();q.history.fix();return b}catch(c){$u.error("ERROR in gifting.init: "+c)}},accept:function(){try{var b=i("div[class='messages'] a[href*='profile.php?id='] img",a.C).eq(0),c="",d=0,g={};if($u.hasContent(b)){d=$u.setContent(b.attr("uid"),"0").parseInt();if($u.hasContent(d)&&d>0){g=new q.queue.ta;g.data.userId=
d;c=$u.setContent(b.attr("title"),"").trim();if($u.hasContent(c))g.data.name=c;else{$u.warn("No name found in",b);g.data.name="Unknown"}}else $u.warn("No uid found in",b)}else $u.warn("No gift messages found!");q.Ac(J.setItem("GiftEntry",g.data));return!i.isEmptyObject(q.bc())}catch(h){$u.error("ERROR in gifting.accept: "+h)}},Eh:function(){try{q.hb=J.getItem("GiftEntry","default");if(q.hb==="default"||!i.isPlainObject(q.hb))q.hb=J.setItem("GiftEntry",{});return f}catch(b){$u.error("ERROR in gifting.loadCurrent: "+
b);return M}},bc:function(){try{return q.hb}catch(b){$u.error("ERROR in gifting.getCurrent: "+b)}},Ac:function(b){try{if(!$u.hasContent(b)||!i.isPlainObject(b))e("Not passed a record");if($u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b,b.userId);e("Invalid identifying userId!")}q.hb=J.setItem("GiftEntry",b);return q.hb}catch(c){$u.error("ERROR in gifting.setCurrent: "+c)}},Tg:function(){try{q.hb=J.setItem("GiftEntry",{});j.setItem("GiftingRefresh",0);return q.hb}catch(b){$u.error("ERROR in gifting.clearCurrent: "+
b)}},Zg:function(){try{var b=q.bc();!i.isEmptyObject(b)&&b.checked&&q.he(f);if(i.isEmptyObject(b)&&j.getItem("HaveGift",M)){if(a.Q("army","invite_on.gif"))return f;if(!q.accept()){j.setItem("HaveGift",M);return M}u.setItem("ClickedFacebookURL",30);a.Uc(a.domain.protocol[a.domain.Hb]+"apps.facebook.com/reqs.php#confirm_46755028429_0");return f}if(!i.isEmptyObject(b)&&!b.checked){$u.log(1,"Clearing incomplete pending gift",b);q.hb=J.setItem("GiftEntry",{})}return ea}catch(c){$u.error("ERROR in gifting.collecting: "+
c)}},Yg:function(){try{var b=M,c=i(),d=M,g=j.getItem("GiftingRefresh",0),h=[];if(!window.location.href.hasIndexOf(a.domain.url[1]))return M;b=q.bc();if(i.isEmptyObject(b))return M;if(!b.checked||g>0){$u.log(1,"On FB page with gift ready to go");c=i("#globalContainer .mbl .uiListItem div[id*='app_46755028429_']");if($u.hasContent(c)){h=q.ja.list();c.each(function(m){try{var k=i(this),o="",r="",s=0,v="",B=i("span[class='fb_protected_wrapper']",k),G=i(".uiButtonConfirm input[name*='gift_accept.php'],input[name*='army.php']",
k);if($u.hasContent(G)){s=$u.setContent(G.attr("name"),"uid=0").regex(/uid=(\d+)/i);if(b.userId!==s)return f;if($u.hasContent(B)){o=$u.setContent(B.text(),"").trim();r=o.regex(/has sent you a (.*) in Castle Age!/i);v=o.regex(/(.*) has sent you a .* in Castle Age!/i);b.name=$u.hasContent(b.name)?b.name:$u.hasContent(v)?v:"Unknown";$u.hasContent(r)||$u.warn("No gift type found in ",o)}else $u.warn("No fb_protected_wrapper in giftRequest",m);if(r===""||!h.hasIndexOf(r)){$u.log(1,"Unknown gift type",
r,h);r="Unknown Gift"}else $u.log(1,"gift type",r,h);b.gift=r;b.found=f;b.checked=f;q.Ac(b);u.setItem("ClickedFacebookURL",35);d||(g=j.setItem("GiftingRefresh",g+1));d=f;a.ca(G);return M}else{d||(g=j.setItem("GiftingRefresh",g+1));d=f;$u.warn("No input found in giftRequest",m)}return f}catch(A){$u.warn("ERROR in gifting.collect: skipping"+A);return f}})}else{d||(g=j.setItem("GiftingRefresh",g+1));d=f;$u.warn("No gifts found for CA")}b.checked=f;q.Ac(b)}if(!u.aa("ClickedFacebookURL"))return M;if(b.found)$u.log(1,
"Gift click timed out");else{b.gift="Unknown Gift";q.Ac(b);$u.log(1,"Unable to find gift",b)}d&&g===1&&$u.reload();j.setItem("GiftingRefresh",0);a.Uc(a.domain.protocol[a.domain.Hb]+a.domain.url[0]+"/gift_accept.php?act=acpt&uid="+b.userId);return f}catch(l){$u.error("ERROR in gifting.collect: "+l);return M}},he:function(b){try{var c=q.bc(),d=M;if(!i.isEmptyObject(c)){if(b||a.Ha("gift_yes.gif")){d=n.getItem("CollectOnly",M);if(!d||d&&n.getItem("CollectAndQueue",M))q.queue.setItem(c);q.history.Sh(c)}q.Tg()}u.setItem("NoGiftDelay",
0);return f}catch(g){$u.error("ERROR in gifting.collected: "+g);return M}},Qh:function(){try{var b=i(),c=i(),d="",g=f;b=i("#pop_content");if($u.hasContent(b)){c=i("input[name='sendit']",b);if($u.hasContent(c)){$u.log(1,"Sending gifts to Facebook");a.ca(c);return f}c=i("input[name='skip_ci_btn']",b);if($u.hasContent(c)){$u.log(1,"Denying Email Nag For Gift Send");a.ca(c);return f}c=i("input[name='ok']",b);if($u.hasContent(c)){if(d=c.parent().parent().prev().text())if(/you have run out of requests/.test(d)){$u.log(2,
"Out of requests: ",d);u.setItem("MaxGiftsExceeded",10800,300);g=M}else $u.warn("Popup message: ",d);else $u.warn("Popup message but no text found",c);a.ca(c);return g}if(d=b.text())if(/Loading/.test(d)){$u.log(2,"Popup is loading ...");return f}else{$u.warn("Unknown popup!",b.text());return M}else{$u.warn("Popup message but no text found",b);return M}}if(q.Ca)return f;return ea}catch(h){$u.error("ERROR in gifting.popCheck: "+h)}},ja:{options:["Same Gift As Received","Random Gift"],hbest:0,k:[],ta:function(){this.data=
{name:"",image:""}},getItem:function(b){try{var c=0,d=0,g=M;if(!$u.isString(b)||b===""){$u.warn("name",b);e("Invalid identifying name!")}c=0;for(d=q.ja.k.length;c<d;c+=1)if(q.ja.k[c].name===b){g=q.ja.k[c];break}return g}catch(h){$u.error("ERROR in gifting.gifts.getItem: "+h)}},oh:function(b){try{var c=0,d=0,g="";if(!$u.isString(b)||b===""){$u.warn("name",b);e("Invalid identifying name!")}if(b!=="Unknown Gift"){c=0;for(d=q.ja.k.length;c<d;c+=1)if(q.ja.k[c].name===b){g=q.ja.k[c].image;break}c>=d&&$u.warn("Gift not in list! ",
b)}return g}catch(h){$u.error("ERROR in gifting.gifts.getImg: "+h)}},populate:function(){try{var b=i("#"+a.domain.id[a.domain.which]+"giftContainer div[id*='"+a.domain.id[a.domain.which]+"gift']"),c={},d=i(),g="",h=[],l=M;if($u.hasContent(b)){q.clear("gifts");b.each(function(){var k=i(this);c=new q.ja.ta;d=k.children().eq(0);if($u.hasContent(d)){g=$u.setContent(d.text(),"").trim().replace("!","");if($u.hasContent(g))c.data.name=g;else{$u.warn("Unable to get gift name! No text in ",d);return f}}else{$u.warn("Unable to get gift name! No child!");
return f}d=i("img[class*='imgButton']",k);if($u.hasContent(d))if(g=$u.setContent(d.attr("src"),"").basename())c.data.image=g;else{$u.warn("Unable to get gift image! No src in ",d);return f}else{$u.warn("Unable to get gift image! No img!");return f}if(q.ja.getItem(c.data.name)){c.data.name+=" #2";$u.log(2,"Gift exists, no auto return for ",c.data.name)}q.ja.k.push(c.data);return l=f})}if(l){h=q.ja.list();g=n.getItem("GiftChoice",q.ja.options[0]);if(!h.hasIndexOf(g)){$u.log(1,"Gift choice invalid, changing from/to ",
g,q.ja.options[0]);g=n.setItem("GiftChoice",q.ja.options[0])}a.Va("GiftChoice",h,g);q.save("gifts")}return l}catch(m){$u.error("ERROR in gifting.gifts.populate: "+m)}},list:function(){try{var b=0,c=0,d=[],g=q.ja.options.slice();b=0;for(c=q.ja.k.length;b<c;b+=1)d.push(q.ja.k[b].name);return i.merge(g,d)}catch(h){$u.error("ERROR in gifting.gifts.list: "+h)}},random:function(){try{return q.ja.k[Math.floor(Math.random()*q.ja.k.length)].name}catch(b){$u.error("ERROR in gifting.gifts.random: "+b)}},length:function(){try{return q.ja.k.length}catch(b){$u.error("ERROR in gifting.gifts.length: "+
b)}}},queue:{k:[],ta:function(){this.data={userId:0,name:"",gift:"",checked:M,found:M,chosen:M,sent:M,last:0}},fix:function(){try{var b=0,c=M;for(b=q.queue.k.length-1;b>=0;b-=1)if($u.isNaN(q.queue.k[b].userId)||q.queue.k[b].userId<1||q.queue.k[b].sent===f){$u.warn("gifting.queue.fix - delete",q.queue.k[b]);q.queue.k.splice(b,1);c=f}c&&q.save("queue");return c}catch(d){$u.error("ERROR in gifting.queue.fix: "+d)}},hbest:2,setItem:function(b){try{if(!$u.hasContent(b)||!i.isPlainObject(b))e("Not passed a record");
if($u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b.userId);e("Invalid identifying userId!")}var c=0,d=0,g=M,h=M;if(n.getItem("UniqueGiftQueue",f)){c=0;for(d=q.queue.k.length;c<d;c+=1)if(q.queue.k[c].userId===b.userId){if(q.queue.k[c].name!==b.name){q.queue.k[c].name=b.name;h=f;$u.log(2,"Updated users name",b,q.queue.k)}g=f;$u.log(2,"found in queue",q.queue.k[c]);break}}if(!g){q.queue.k.push(b);h=f;$u.log(2,"Added gift to queue",b,q.queue.k)}h&&q.save("queue");return f}catch(l){$u.error("ERROR in gifting.queue.setItem: "+
l,b);return M}},gh:function(b){try{if($u.isNaN(b)||b<0||b>=q.queue.k.length)e("Invalid index! ("+b+")");q.queue.k.splice(b,1);q.save("queue");return f}catch(c){$u.error("ERROR in gifting.queue.deleteIndex: "+c,b);return M}},length:function(){try{return q.queue.k.length}catch(b){$u.error("ERROR in gifting.queue.length: "+b)}},od:"",Qg:function(){try{var b=0,c=0,d=0,g="",h="",l=M,m=[],k=0,o=M,r=[],s=0,v=M;if(l=n.getItem("FilterReturnId",M)){m=n.ab("FilterReturnIdList","");k=m.length}if(o=n.getItem("FilterReturnGift",
M)){r=n.ab("FilterReturnGiftList","");s=r.length}h=n.getItem("GiftChoice",q.ja.options[0]);b=0;for(d=q.queue.k.length;b<d;b+=1)if(u.ya(q.queue.k[b].last||0,J.getItem("LastGiftUserDelaySecs",3600,f)))if(!q.queue.k[b].sent)if(l&&k&&m.hasIndexOf(q.queue.k[b].userId))$u.log(2,"chooseGift Filter Id",q.queue.k[b].userId);else{if(o&&s){v=M;for(c=0;c<s;c+=1)if(q.queue.k[b].gift.hasIndexOf(r[c])){$u.log(2,"chooseGift Filter Gift",q.queue.k[b].gift);v=f;break}if(v)continue}switch(h){case q.ja.options[0]:g=
q.queue.k[b].gift;break;case q.ja.options[1]:if(q.od)g=q.queue.od;else{g=q.ja.random();q.queue.od=g}break;default:g=h}break}g||u.setItem("NoGiftDelay",J.getItem("NoGiftDelaySecs",1800,f),300);return g}catch(B){$u.error("ERROR in gifting.queue.chooseGift: "+B)}},Pg:function(b){try{var c=0,d=0,g=0,h="",l=i("div[class='unselected_list']",a.oa),m=i("div[class='selected_list']",a.oa),k=i(),o=i(),r=f,s=f,v=M,B=M,G=[],A=0,w=M,L=[],y=0,O=M,T=[],H="",P=[],U=[],F=[];if($u.isNaN(b)||b<1)e("Invalid howmany! ("+
b+")");v=n.getItem("ReturnOnlyOne",M);if(B=n.getItem("FilterReturnId",M)){G=n.ab("FilterReturnIdList","");A=G.length}if(w=n.getItem("FilterReturnGift",M)){L=n.ab("FilterReturnGiftList","");y=L.length}if(n.getItem("GiftChoice",q.ja.options[0])!==q.ja.options[0])s=M;c=0;for(g=q.queue.k.length;c<g;c+=1){q.queue.k[c].chosen=M;if(!(T.length>=b))if(u.ya(q.queue.k[c].last||0,J.getItem("LastGiftUserDelaySecs",3600,f)))if(!q.queue.k[c].sent)if(B&&A&&G.hasIndexOf(q.queue.k[c].userId))$u.log(2,"chooseFriend Filter Id",
q.queue.k[c].userId);else{if(w&&y){O=M;for(d=0;d<y;d+=1)if(q.queue.k[c].gift.hasIndexOf(L[d])){$u.log(2,"chooseFriend Filter Gift",q.queue.k[c].gift);O=f;break}if(O)continue}if(v)if(q.history.Og(q.queue.k[c].userId)){$u.log(2,"Sent Today: ",q.queue.k[c].userId);q.queue.k[c].last=(new Date).getTime();continue}if(r){h=q.queue.k[c].gift;r=M}if(q.queue.k[c].gift===h||!s)T.push(q.queue.k[c].userId)}}if($u.hasContent(T)){c=0;for(g=T.length;c<g;c+=1){H+="input[value='"+T[c]+"']";if(c>=0&&c<g-1)H+=","}k=
i(H,l);if($u.hasContent(k))k.each(function(){var fa=i(this),K=$u.setContent(fa.attr("value"),"0").parseInt();if(/none/.test($u.setContent(fa.parent().attr("style"),""))){$u.log(2,"Id not found, perhaps gift pending:",K);U.push(K)}else{a.Ca=M;a.ca(fa);$u.log(2,"Id clicked:",K);P.push(K)}});else{$u.log(2,"Ids not found:",T,H);i.merge(U,T)}if($u.hasContent(P)){c=0;for(g=P.length;c<g;c+=1){H+="input[value='"+P[c]+"']";if(c>=0&&c<g-1)H+=","}o=i(H,m);if($u.hasContent(o))o.each(function(){var fa=i(this),
K=$u.setContent(fa.attr("value"),"0").parseInt();if(/none/.test($u.setContent(fa.parent().attr("style"),""))){$u.log(2,"Selected id is none:",K);U.push(K)}else{$u.log(2,"User Chosen:",K);F.push(K)}});else{$u.log(2,"Selected ids not found:",H);i.merge(U,P)}}$u.log(2,"chosenList/pendingList",F,U);c=0;for(g=q.queue.k.length;c<g;c+=1)if(F.hasIndexOf(q.queue.k[c].userId)){$u.log(2,"Chosen",q.queue.k[c].userId);q.queue.k[c].chosen=f;q.queue.k[c].last=(new Date).getTime()}else if(U.hasIndexOf(q.queue.k[c].userId)){$u.log(2,
"Pending",q.queue.k[c].userId);q.queue.k[c].last=(new Date).getTime()}a.Ca=M;q.save("queue")}return F.length}catch(Z){$u.error("ERROR in gifting.queue.chooseFriend: "+Z)}},rd:function(){try{var b=0,c=i(),d="",g=M;if(window.location.href.hasIndexOf("act=create")){c=i("#"+a.domain.id[a.domain.which]+"results_main_wrapper");if($u.hasContent(c)){d=c.text();if($u.hasContent(d))if(/You have sent \d+ gift/.test(d)){for(b=q.queue.k.length-1;b>=0;b-=1)if(q.queue.k[b].chosen){q.queue.k[b].sent=f;q.history.rd(q.queue.k[b]);
q.queue.k.splice(b,1)}$u.log(1,"Confirmed gifts sent out.");g=f;q.save("queue")}else if(/You have exceed the max gift limit for the day/.test(d)){$u.log(1,"Exceeded daily gift limit.");u.setItem("MaxGiftsExceeded",J.getItem("MaxGiftsExceededDelaySecs",10800,f),300)}else $u.log(2,"Result message",d);else $u.log(2,"No result message")}}else $u.log(2,"Not a gift create request");return g}catch(h){$u.error("ERROR in gifting.queue.sent: "+h)}}},history:{k:[],ta:function(){this.data={userId:0,name:"",sent:0,
lastSent:0,received:0,lastReceived:0}},fix:function(){try{var b=0,c=M;for(b=q.history.k.length-1;b>=0;b-=1)if($u.isNaN(q.history.k[b].userId)||q.history.k[b].userId<1){$u.warn("gifting.history.fix - delete",q.history.k[b]);q.history.k.splice(b,1);c=f}c&&q.save("history");return c}catch(d){$u.error("ERROR in gifting.history.fix: "+d)}},hbest:0,Sh:function(b){try{if(!$u.hasContent(b)||!i.isPlainObject(b))e("Not passed a record");if($u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b.userId);e("Invalid identifying userId!")}var c=
0,d=0,g=M,h={};c=0;for(d=q.history.k.length;c<d;c+=1)if(q.history.k[c].userId===b.userId){if(q.history.k[c].name!==b.name)q.history.k[c].name=b.name;q.history.k[c].received+=1;q.history.k[c].lastReceived=(new Date).getTime();g=f;break}if(g)$u.log(2,"Updated gifting.history record",q.history.k[c],q.history.k);else{h=new q.history.ta;h.data.userId=b.userId;h.data.name=b.name;h.data.received=1;h.data.lastReceived=(new Date).getTime();q.history.k.push(h.data);$u.log(2,"Added gifting.history record",h.data,
q.history.k)}q.save("history");return f}catch(l){$u.error("ERROR in gifting.history.received: "+l,b);return M}},rd:function(b){try{if(!$u.hasContent(b)||!i.isPlainObject(b))e("Not passed a record");if($u.isNaN(b.userId)||b.userId<1){$u.warn("userId",b.userId);e("Invalid identifying userId!")}var c=0,d=0,g=M,h={};c=0;for(d=q.history.k.length;c<d;c+=1)if(q.history.k[c].userId===b.userId){if(q.history.k[c].name!==b.name)q.history.k[c].name=b.name;q.history.k[c].sent+=1;q.history.k[c].lastSent=(new Date).getTime();
g=f;break}if(g)$u.log(2,"Updated gifting.history record",q.history.k[c],q.history.k);else{h=new q.history.ta;h.data.userId=b.userId;h.data.name=b.name;h.data.sent=1;h.data.lastSent=(new Date).getTime();q.history.k.push(h.data);$u.log(2,"Added gifting.history record",h.data,q.history.k)}q.save("history");return f}catch(l){$u.error("ERROR in gifting.history.sent: "+l,b);return M}},Og:function(b){try{if($u.isNaN(b)||b<1){$u.warn("userId",b);e("Invalid identifying userId!")}var c=0,d=0,g=M;c=0;for(d=
q.history.k.length;c<d;c+=1)if(q.history.k[c].userId===b){g=!u.ya(q.history.k[c].lastSent||0,J.getItem("OneGiftPerPersonDelaySecs",86400,f));break}return g}catch(h){$u.error("ERROR in gifting.history.checkSentOnce: "+h,b)}},length:function(){try{return q.history.k.length}catch(b){$u.error("ERROR in gifting.history.length: "+b)}}}};window.gifting=q;q.gifts=q.ja;q.queue=q.queue;q.history=q.history;D={k:[],ha:[],da:[],Ph:25,Tb:f,ta:function(){this.data={user:"",name:"",userId:"",lvl:0,last:0,change:0,
elite:M}},ib:function(){try{var b=new ca.order;i.extend(f,b.data,j.getItem("ArmySort",b.data));D.ha=[];i.merge(D.ha,D.k);D.ha.sort($u.sortBy(b.data.reverse.a,b.data.value.a,$u.sortBy(b.data.reverse.b,b.data.value.b,$u.sortBy(b.data.reverse.c,b.data.value.c))));return f}catch(c){$u.error("ERROR in army.copy2sortable: "+c);return M}},hbest:3,load:function(){try{D.k=J.getItem("army.records","default");if(D.k==="default"||!i.isArray(D.k))D.k=J.setItem("army.records",[]);D.ib();D.hbest=D.hbest===M?JSON.hbest(D.k):
D.hbest;$u.log(3,"army.load Hbest",D.hbest);j.setItem("ArmyDashUpdate",f);$u.log(3,"army.load",D.k);return f}catch(b){$u.error("ERROR in army.load: "+b);return M}},save:function(){try{J.setItem("army.records",D.k,D.hbest,M);j.setItem("ArmyDashUpdate",f);$u.log(3,"army.save",D.k);return f}catch(b){$u.error("ERROR in army.save: "+b);return M}},Fh:function(){try{D.da=ka.getItem("army.recordsTemp","default",f);if(D.da==="default"||!i.isArray(D.da))D.da=ka.setItem("army.recordsTemp",[]);$u.log(3,"army.loadTemp",
D.da);return f}catch(b){$u.error("ERROR in army.loadTemp: "+b);return M}},Yh:function(){try{ka.setItem("army.recordsTemp",D.da);$u.log(3,"army.saveTemp",D.da);return f}catch(b){$u.error("ERROR in army.saveTemp: "+b);return M}},ie:function(){try{ka.deleteItem("army.recordsTemp");ka.deleteItem("army.currentPage");D.da=[];$u.log(3,"army.deleteTemp deleted");return f}catch(b){$u.error("ERROR in army.saveTemp: "+b);return M}},init:function(){D.Fh();D.load()},setItem:function(b){try{var c=0,d=0,g=M;c=0;
for(d=D.k.length;c<d;c+=1)if(D.k[c].userId===b.userId){D.k[c]=b;g=f;break}if(g)$u.log(3,"Updated record'");else{$u.log(3,"Added record'");D.k.push(b)}D.save();D.ib();return b}catch(h){$u.error("ERROR in army.setItem: "+h)}},getItem:function(b){try{var c=0,d=0,g=M;c=0;for(d=D.k.length;c<d;c+=1)if(D.k[c].userId===b){g=f;break}g||$u.log(1,"Unable to find 'userId'",b);return g?D.k[c]:{}}catch(h){$u.error("ERROR in army.getItem: "+h)}},deleteItem:function(b){try{var c=0,d=0,g=M;c=0;for(d=D.k.length;c<
d;c+=1)if(D.k[c].userId===b){D.k[c].splice(c,1);g=f;break}if(g){D.save();D.ib()}else $u.log(1,"Unable to find 'userId'",b);return f}catch(h){$u.error("ERROR in army.setItem: "+h);return M}},page:function(){try{if(!D.Tb){var b=i(),c=i(),d={},g="",h="",l=0,m=0,k=0,o=0,r=ka.getItem("army.currentPage",1,f);a.Zc=f;window.setTimeout(function(){if(r===1){b=i("a[href*='army_member.php?page=']",a.C).last();g=$u.hasContent(b)?b.attr("href"):"";l=$u.hasContent(g)?g.regex(/page=(\d+)/):ea;m=$u.setContent(l,1);
j.setItem("ArmyPageCount",m)}else m=j.getItem("ArmyPageCount",1);c=i("a[href*='comments.php?casuser=']",a.C);c.each(function(){var v=i(this);d=new D.ta;g=v.attr("href");l=$u.hasContent(g)?g.regex(/casuser=(\d+)/):ea;d.data.userId=$u.setContent(l,0);g=v.parents("tr").eq(0).text().trim().innerTrim();h=$u.hasContent(g)?g.regex(/(.+)\s+"/):"";d.data.user=$u.hasContent(h)?h.toString():"";h=$u.hasContent(g)?g.regex(/"(.+)"/):"";d.data.name=$u.hasContent(h)?h.toString():"";l=$u.hasContent(g)?g.regex(/Level\s+(\d+)/):
ea;d.data.lvl=$u.setContent(l,0);d.data.last=(new Date).getTime();$u.hasContent(d.data.userId)&&d.data.userId>0?D.da.push(d.data):$u.warn("army.page skipping record",d.data)});if(r===m){c=i("img[src*='bonus_member.jpg']",a.C).parent().parent().find("a[href*='oracle.php']");if($u.hasContent(c)){g=c.text();l=$u.hasContent(g)?g.regex(/Extra members x(\d+)/):ea;o=$u.setContent(l,0);for(k=1;k<=o;k+=1){d=new D.ta;d.data.userId=0-k;d.data.name="Extra member "+k;d.data.lvl=0;d.data.last=(new Date).getTime();
D.da.push(d.data)}}}ka.setItem("army.currentPage",D.Yh()?r+1:r);$u.log(2,"army.page",r,m,D.da);D.Tb=f;a.Zc=M},400)}return f}catch(s){$u.error("ERROR in army.page: "+s);D.Tb=f;return a.Ca=M}},Vh:function(){try{if(!n.getItem("EnableArmy",f)||!u.aa("army_member"))return M;var b=0,c=0,d=n.getItem("ArmyScanDays",7);c=ka.getItem("army.currentPage",1,f);b=j.getItem("ArmyPageCount",0);if(!b)b=(b=Math.ceil((a.p.army.actual-1)/D.Ph))?b:0;if(c>b){D.Tb=M;$u.log(3,"army.run",b);if(a.p.army.actual-1!==D.da.length){$u.log(2,
"Army size mismatch. Next schedule set 30 mins.",a.p.army.actual-1,D.da.length);u.setItem("army_member",1800,300)}else{D.merge();u.setItem("army_member",d*86400,300);$u.log(2,"Army merge complete. Next schedule set "+d+" days.",D.k)}D.ie();return M}else if(D.Tb){D.Tb=M;a.Ka("army_member.php?page="+c)}return f}catch(g){$u.error("ERROR in army.run: "+g);return M}},merge:function(){try{var b=0,c=0,d={};b=0;for(c=D.da.length;b<c;b+=1){d=D.getItem(D.da[b].userId);if($u.hasContent(d)){D.da[b].elite=$u.setContent(d.elite,
M);D.da[b].change=D.da[b].lvl>d.lvl?D.da[b].last:$u.hasContent(d.change)&&d.change>0?d.change:D.da[b].last;if(!$u.hasContent(D.da[b].name)&&$u.hasContent(d.name))D.da[b].name=d.name;if($u.hasContent(D.da[b].name)&&$u.hasContent(d.name)&&D.da[b].user!==d.user)D.da[b].name=d.name;if(!$u.hasContent(D.da[b].user)&&$u.hasContent(d.user))D.da[b].user=d.user;if($u.hasContent(D.da[b].user)&&$u.hasContent(d.user)&&D.da[b].user!==d.user)D.da[b].user=d.user;if(!$u.hasContent(D.da[b].lvl)&&$u.hasContent(d.lvl))D.da[b].lvl=
d.lvl;if(!$u.hasContent(D.da[b].elite)&&$u.hasContent(d.elite))D.da[b].elite=d.elite}else D.da[b].change=D.da[b].last}D.k=D.da.slice();D.save();D.ib();return f}catch(g){$u.error("ERROR in army.merge: "+g);return M}},me:function(){try{var b=0,c=0,d=[];b=0;for(c=D.k.length;b<c;b+=1)$u.hasContent(D.k[b].userId)&&D.k[b].userId>0&&d.push(D.k[b].userId);return d}catch(g){$u.error("ERROR in army.getIdList: "+g)}},mh:function(){try{var b=0,c=0,d=[];b=0;for(c=D.k.length;b<c;b+=1)$u.hasContent(D.k[b].userId)&&
D.k[b].userId>0&&D.k[b].elite&&d.push(D.k[b].userId);return d}catch(g){$u.error("ERROR in army.getEliteList: "+g);return[]}}};a={yi:(new Date).getTime(),xc:0,le:M,Ca:M,Zc:M,yc:M,X:{},K:{},rc:"",Sb:M,oa:{},domain:{which:-1,protocol:["http://","https://"],Hb:0,url:["apps.facebook.com/castle_age","apps.facebook.com/reqs.php#confirm_46755028429_0","web3.castleagegame.com/castle_ws"],id:["app46755028429_","",""],ajax:["a46755028429_","",""],link:"http://apps.facebook.com/castle_age"},start:function(){function b(){a.Kb=
8E3;a.sb();a.Zd()}$u.set_log_version(ja+(ma?"d"+ma:""));$u.log(1,"DOM load completed");window.clearTimeout(va);if(window.location.href.hasIndexOf("apps.facebook.com/castle_age/"))a.domain.which=0;else if(window.location.href.hasIndexOf("apps.facebook.com/reqs.php#confirm_46755028429_0"))a.domain.which=1;else if(window.location.href.hasIndexOf("web3.castleagegame.com/castle_ws/"))a.domain.which=2;else{a.Lc();$u.error("Unknown domain!");return}if(window.location.href.hasIndexOf("http://"))a.domain.Hb=
0;else if(window.location.href.hasIndexOf("https://"))a.domain.Hb=1;else $u.warn("Unknown protocol! Using default.",a.domain.protocol[a.domain.Hb]);a.domain.link=a.domain.protocol[a.domain.Hb]+a.domain.url[a.domain.which];$u.log(1,"Domain",a.domain.which,a.domain.protocol[a.domain.Hb],a.domain.url[a.domain.which]);a.rc=document.title;a.Ch();J=new $u.storage({namespace:"caap"});ka=new $u.storage({namespace:"caap",storage_type:"sessionStorage"});var c=0,d=M,g="",h=i();J.clear("0");if(a.Lc())b();else{if(a.domain.which>=
0&&a.domain.which<2){if((h=i("#navAccountName"))&&h.length){c=(g=h.attr("href"))?g.regex(/id=(\d+)/i):0;if($u.isNumber(c)&&c>0){a.p.FBID=c;d=f}}if(!d){if(g=i("script").text()){c=g.regex(/user:(\d+),/i);if($u.isNumber(c)&&c>0){a.p.FBID=c;d=f}else{c=g.regex(/."user.":(\d+),/i);if($u.isNumber(c)&&c>0){a.p.FBID=c;d=f}}}if(!d){c=window.Rh.ki?window.Rh.ki.parseInt():0;if($u.isNumber(c)&&c>0){a.p.FBID=c;d=f}}}}else{h=i("img[src*='graph.facebook.com']");g=h.attr("src");c=$u.hasContent(g)?g.regex(/facebook.com\/(\d+)\//):
0;if($u.isNumber(c)&&c>0){a.p.FBID=c;d=f}}if(d){J.set_storage_id(c.toString());ka.set_storage_id(c.toString());n.load();$u.set_log_level(n.getItem("DebugLevel",$u.get_log_level()));pa.Ce();a.Gh();u.load();j.load();a.qg(c,$u.setContent(h.text(),""));q.init();q.Eh();j.setItem("clickUrl",window.location.href);u.setItem("clickedOnSomething",0);if($u.is_firefox)ma===0?a.Uh():a.hh();if(ma>0){if(j.getItem("LastVersion",0)!==ja||j.getItem("LastDevVersion",0)!==ma){j.setItem("LastVersion",ja);j.setItem("LastDevVersion",
ma)}}else if(j.getItem("LastVersion",0)!==ja){j.setItem("LastVersion",ja);j.setItem("LastDevVersion",0)}if(a.domain.which===0||a.domain.which===2){j.setItem("caapPause","none");j.setItem("ReleaseControl",f);window.setTimeout(a.init,200)}b()}else{$u.error("No Facebook UserID!!! Reloading ...",c,window.location.href);$u.reload()}}},Gh:function(){try{var b={ffmode:M,match:0,total:0},c={nc:0,total:0},d="";b=J.used();if(b.ffmode){$u.log(1,"CAAP GM storage used (chars): "+b.match);$u.log(1,"GM storage used (chars): "+
b.total)}else{c.nc=(b.match*2.048/5242880*100).dp();$u.log(1,"CAAP localStorage used: "+c.nc+"%");c.total=(b.total*2.048/5242880*100).dp();if(c.total>=90){$u.warn("Total localStorage used: "+c.total+"%");d="<div style='text-align: center;'>";d+="<span style='color: red; font-size: 14px; font-weight: bold;'>WARNING!</span><br />";d+="localStorage usage for domain: "+c.total+"%<br />";d+="CAAP is using: "+c.total+"%";d+="</div>";window.setTimeout(function(){i().alert(d)},5E3)}else $u.log(1,"Total localStorage used: "+
c.total+"%")}return f}catch(g){$u.error("ERROR in release lsUsed: "+g);return M}},kg:function(){try{a.xc+=1;$u.log(4,"pageLoadCounter",a.xc);return a.xc}catch(b){$u.error("ERROR in IncrementPageLoadCounter: "+b)}},Uh:function(){try{if(j.getItem("SUC_remote_version",0)>ja)a.Sb=f;var b=function(d){if(d||u.aa("SUC_last_update"))try{GM_xmlhttpRequest({method:"GET",url:"http://castle-age-auto-player.googlecode.com/files/Castle-Age-Autoplayer.user.js",headers:{"Cache-Control":"no-cache"},onload:function(h){var l=
h.responseText.match(/@version\s*(.*?)\s*$/m)[1];h=h.responseText.match(/@name\s*(.*?)\s*$/m)[1];u.setItem("SUC_last_update",864E5);j.setItem("SUC_target_script_name",h);j.setItem("SUC_remote_version",l);$u.log(1,"Remote version ",l);if(l>ja){a.Sb=f;d&&confirm('There is an update available for the Greasemonkey script "'+h+'."\nWould you like to go to the install page now?')&&GM_openInTab("http://senses.ws/caap/index.php?topic=771.msg3582#msg3582")}else d&&alert('No update is available for "'+h+'."')}})}catch(g){d&&
alert("An error occurred while checking for updates:\n"+g)}};GM_registerMenuCommand(j.getItem("SUC_target_script_name","???")+" - Manual Update Check",function(){b(f)});b(M)}catch(c){$u.error("ERROR in release updater: "+c)}},hh:function(){try{if(j.getItem("SUC_remote_version",0)>ja||j.getItem("SUC_remote_version",0)>=ja&&j.getItem("DEV_remote_version",0)>ma)a.Sb=f;var b=function(d){if(d||u.aa("SUC_last_update"))try{GM_xmlhttpRequest({method:"GET",url:"http://castle-age-auto-player.googlecode.com/svn/trunk/Castle-Age-Autoplayer.user.js",
headers:{"Cache-Control":"no-cache"},onload:function(h){var l=h.responseText.match(/@version\s*(.*?)\s*$/m)[1],m=h.responseText.match(/@dev\s*(.*?)\s*$/m)[1];h=h.responseText.match(/@name\s*(.*?)\s*$/m)[1];u.setItem("SUC_last_update",864E5);j.setItem("SUC_target_script_name",h);j.setItem("SUC_remote_version",l);j.setItem("DEV_remote_version",m);$u.log(1,"Remote version ",l,m);if(l>ja||l>=ja&&m>ma){a.Sb=f;d&&confirm('There is an update available for the Greasemonkey script "'+h+'."\nWould you like to go to the install page now?')&&
GM_openInTab("http://code.google.com/p/castle-age-auto-player/updates/list")}else d&&alert('No update is available for "'+h+'."')}})}catch(g){d&&alert("An error occurred while checking for updates:\n"+g)}};GM_registerMenuCommand(j.getItem("SUC_target_script_name","???")+" - Manual Update Check",function(){b(f)});b(M)}catch(c){$u.error("ERROR in development updater: "+c)}},init:function(){try{if(a.domain.which===2){a.Ma.selector="#globalcss";a.Ga.selector="#app_body_container"}j.setItem(a.za.yh.name+
"Requested",M);j.setItem(a.za.Na.name+"Requested",M);j.setItem(a.za.bd.name+"Requested",M);n.getItem("HideAds",M)&&i(".UIStandardFrame_SidebarAds").css("display","none");if(n.getItem("HideAdsIframe",M)){i("iframe[name*='fb_iframe']").eq(0).parent().css("display","none");i("div[style*='tool_top.jpg']").css("display","none")}n.getItem("HideFBChat",M)&&window.setTimeout(function(){i("div[class*='fbDockWrapper fbDockWrapperBottom fbDockWrapperRight']").css("display","none")},100);var b=J.getItem("ShiftDown",
"",f);$u.hasContent(b)&&i(a.Ma.selector).css("padding-top",b);x.load();p.load();E.load();V.load();I.load();a.og();a.pg();Q.load("soldiers");Q.load("item");Q.load("magic");D.init();S.load();a.Ee();a.Ge();a.Oe();a.Fe();a.Hc();a.ff();a.ub=(new a.Pb).data;a.Ib={};return f}catch(c){$u.error("ERROR in init: "+c);return M}},Dc:5E3,Uc:function(b,c){try{$u.hasContent(b)||e("No url passed to VisitUrl");a.Kb=$u.setContent(c,a.Dc);j.getItem("clickUrl","").hasIndexOf(b)||j.setItem("clickUrl",b);if(a.Ca===M){u.setItem("clickedOnSomething",
0);a.Ca=f}if(!n.getItem("bookmarkMode",M))window.location.href=b;return f}catch(d){$u.error("ERROR in caap.VisitUrl: "+d);return M}},ca:function(b,c){try{$u.hasContent(b)||e("Null object passed to Click");if(a.Ca===M){u.setItem("clickedOnSomething",0);a.Ca=f}a.Kb=$u.setContent(c,a.Dc);var d=document.createEvent("MouseEvents");d.initMouseEvent("click",f,f,window,0,0,0,0,0,M,M,M,M,0,ea);return!(b.jquery?b.get(0):b).dispatchEvent(d)}catch(g){$u.error("ERROR in caap.Click: "+g)}},Ka:function(b,c){try{$u.hasContent(b)||
e("No link passed to ClickAjaxLinkSend");a.Kb=$u.setContent(c,a.Dc);j.getItem("clickUrl","").hasIndexOf(b)||j.setItem("clickUrl",a.domain.link+"/"+b);if(a.Ca===M){u.setItem("clickedOnSomething",0);a.Ca=f}window.location.href="javascript:void("+a.domain.ajax[a.domain.which]+"ajaxLinkSend('globalContainer', '"+b+"'))";return f}catch(d){$u.error("ERROR in caap.ClickAjaxLinkSend: "+d);return M}},Tf:function(b,c){try{$u.hasContent(b)||e("No link passed to ClickGetCachedAjax");a.Kb=$u.setContent(c,a.Dc);
j.getItem("clickUrl","").hasIndexOf(b)||j.setItem("clickUrl",a.domain.link+"/"+b);if(a.Ca===M){u.setItem("clickedOnSomething",0);a.Ca=f}window.location.href="javascript:void("+a.domain.ajax[a.domain.which]+"get_cached_ajax('"+b+"', 'get_body'))";return f}catch(d){$u.error("ERROR in caap.ClickGetCachedAjax: "+d);return M}},Q:function(b,c){try{var d=[],g=0,h=i(),l="",m=i();if(!$u.hasContent(a.C)){$u.warn("No content to Navigate to",c,b);return M}if($u.hasContent(c)&&a.Ha(c))return M;d=$u.hasContent(b)?
b.split(","):[];for(g=d.length-1;g>=0;g-=1){h=i("a[href*='"+d[g]+".php']").not("a[href*='"+d[g]+".php?']",a.C);if($u.hasContent(h)){$u.log(2,"Go to",d[g]);a.ca(h);return f}l=$u.setContent(d[g],"");l=l.hasIndexOf(".")?l:l+".";m=$u.hasContent(l)?a.Wa(l):m;if($u.hasContent(m)){$u.log(2,"Click on image",m.attr("src").regex(/([\w.]+$)/));a.ca(m);return f}}$u.warn("Unable to Navigate to",c,b);return M}catch(k){$u.error("ERROR in caap.NavigateTo: "+k,c,b)}},Wa:function(b,c,d,g){try{g=$u.isNumber(g)?g:$u.isNaN(g)?
0:g.parseInt();c=$u.setContent(c,$u.isDefined(d)&&$u.isDefined(d.body)?d.body:window.document.body);c=c.jquery?c:i(c);return i("input[src*='"+b+"'],img[src*='"+b+"'],div[style*='"+b+"']",c).eq(g)}catch(h){$u.error("ERROR in caap.CheckForImage: "+h)}},Ha:function(b,c,d,g){try{return $u.hasContent(a.Wa(b,c,d,g))}catch(h){$u.error("ERROR in caap.HasImage: "+h)}},fe:function(b,c){try{var d=/.*(http:.*)/,g=/"/g;i(c,b).each(function(){var l=i(this),m="",k="";k=[];m=l.html();k=$u.hasContent(m)?m.trim().split("<br>"):
[];k=$u.hasContent(k[1])?k[1].replace(g,"").regex(d):"";k=$u.hasContent(k)?k.split(" "):[];k=$u.hasContent(k)?m.replace(k[0],"<a href='"+k[0]+"'>"+k[0]+"</a>"):"";$u.hasContent(k)&&l.html(k)});return f}catch(h){$u.error("ERROR in caap.chatLink: "+h);return M}},Rc:function(b,c,d,g,h,l){try{var m=n.getItem(b,"defaultValue"),k=b?" id='caap_"+b+"'":"",o="",r="",s=0,v=0;m=m!=="defaultValue"?m:n.setItem(b,$u.setContent(h,c[0]));v=c.length;for(s=0;s<v;s+=1)if(m===c[s])break;o=d[s]?" title='"+d[s]+"'":"";
l=l?" style='"+l+"'":"";g=g?" "+g:"";r="<select class='caap_ff caap_fs caap_ww'"+k+l+o+g+">";r+="<option disabled='disabled' value='not selected'>Choose one</option>";for(s=0;s<v;s+=1)r+="<option value='"+c[s]+"'"+(m===c[s]?" selected='selected'":"")+o+">"+c[s]+"</option>";r+="</select>";return r}catch(B){$u.error("ERROR in MakeDropDown: "+B);return""}},nb:function(b,c){try{b=b?" id='"+b+"'":"";c=c?" style='"+c+"'":"";return"<div class='caap_ff caap_fn caap_ww'"+b+c+">"}catch(d){$u.error("ERROR in startTR: "+
d);return""}},jb:"</div>",ba:function(b,c,d,g){try{g=g?" style='"+g+"'":"";return"<div"+(" class='caap_ff caap_fn"+(c?" caap_in":"")+(d?" caap_tr":"")+"'")+g+">"+b+"</div>"}catch(h){$u.error("ERROR in MakeTD: "+h);return""}},Ud:function(b,c,d,g,h){try{var l=n.getItem(c,"defaultValue"),m="<div class='caap_ff caap_fn caap_ww' id='caap_"+c+"'>";l!=="defaultValue"||n.setItem(c,$u.setContent(g,1));m+='<div style="width: '+(h?"42%;padding-left: 5%;":"47%")+';display: inline-block;">'+b+"</div>";m+="<div style='width: 45%;padding-right: 5%;display: inline-block;' id='caap_"+
c+"_slider' title='"+d+"'></div>";m+="</div>";return m}catch(k){$u.error("ERROR in MakeTD: "+k);return""}},Vd:function(b,c,d,g,h,l){try{i("#caap_"+b+"_slider",a.X).slider({orientation:"horizontal",range:"min",min:c,max:d,step:g,value:n.getItem(b,h),slide:function(k,o){if(l){j.setItem(b.replace("Cust",""),n.setItem(b,o.value));a.Ab()}else n.setItem(b,o.value)}});return f}catch(m){$u.error("ERROR in MakeTD: "+m);return M}},Mb:function(b,c,d,g){try{var h=b?" id='caap_"+b+"'":"";d=d?" title='"+d+"'":
"";var l=n.getItem(b,"defaultValue");l=(l=l!=="defaultValue"?l:n.setItem(b,$u.setContent(c,M)))?" checked":"";g=g?" style='"+g+"'":"";return"<input class='caap_ff caap_fn' type='checkbox'"+h+g+d+l+" />"}catch(m){$u.error("ERROR in MakeCheckBox: "+m);return""}},Sc:function(b,c,d,g,h,l){try{h=$u.setContent(h,"number");var m=n.getItem(b,"defaultValue"),k=h==="number",o=b?" id='caap_"+b+"'":"";c=c?" title='"+c+"'":"";var r=k?" type='text' min='0' step='1'":" type='text'";l+=h==="color"?"background-color:"+
m+"; color:"+$u.bestTextColor(m)+";":"";l=l?" style='"+l+"'":"";h=h?" data-subtype='"+h+"'":"";d=k&&$u.isNumber(d)?d:k&&$u.hasContent(d)&&$u.isString(d)&&!$u.isNaN(d)?d.parseFloat():!k&&$u.isString(d)?d:"";k&&$u.hasContent(d)&&$u.isNaN(d)&&$u.warn("MakeNumberForm - default value is not a number!",b,d);m=m!=="defaultValue"?m:n.setItem(b,d);g=$u.setContent(g,"");return"<input class='caap_ff caap_fs caap_tr caap_ww'"+r+h+o+l+g+c+" value='"+m+"' />"}catch(s){$u.error("ERROR in MakeNumberForm: "+s);return""}},
v:function(b,c,d,g,h,l,m){try{var k="";k=a.nb();k+=a.ba(b,h,l,"width: "+(h?85:90)+"%; display: inline-block;");k+=a.ba(a.Mb(c,d,g,m),M,f,"width: 10%; display: inline-block;");k+=a.jb;return k}catch(o){$u.error("ERROR in MakeCheckTR: "+o);return""}},Fa:function(b,c){try{var d=b?" id='caap_"+b+(c?"_not":"")+"_hide'":"",g=" style='display: "+(n.getItem(b,M)?c?"none":"block":c?"block":"none")+";'";return"<div class='caap_ff caap_fn caap_ww'"+d+g+">"}catch(h){$u.error("ERROR in startCheckHide: "+h);return""}},
si:function(){return"</div>"},V:function(b,c,d,g,h,l,m,k,o){try{m=$u.setContent(m,M);k=$u.setContent(k,M);o=$u.setContent(o,30);var r="";r=a.nb();r+=a.ba(b,m,k,"width: "+(m?92-o:97-o)+"%; display: inline-block;");r+=a.ba(a.Sc(c,d,g,h,l,""),M,f,"width: "+o+"%; display: inline-block;");r+=a.jb;return r}catch(s){$u.error("ERROR in MakeNumberFormTR: "+s);return""}},sa:function(b,c,d,g,h,l,m,k,o,r){try{var s="";s=a.nb();s+=a.ba(b,m,k,"width: "+(m?95-o:100-o)+"%; display: inline-block;");s+=a.ba(a.Rc(c,
d,g,h,l,r),M,f,"width: "+o+"%; display: inline-block;");s+=a.jb;return s}catch(v){$u.error("ERROR in MakeDropDownTR: "+v);return""}},Pa:function(b,c,d,g){try{var h=n.getItem(b,"Never");return"<div class='caap_ff caap_fn caap_ww'"+(" id='caap_"+b+c+"_hide'")+(" style='display: "+((g?h!==d:h===d)?"block":"none")+";'")+">"}catch(l){$u.error("ERROR in startDropHide: "+l);return""}},ti:function(){return"</div>"},$a:function(b,c){try{var d=j.getItem("Control_"+b,"none"),g=d==="none"?"+":"-",h="";h='<a style="font-weight: bold;font-family: \'lucida grande\', tahoma, verdana, arial, sans-serif; font-size: 11px;" id="caap_Switch_'+
b+'" href="javascript:;" style="text-decoration: none;"> ';h+=g+" "+c+"</a><br /><div id='caap_"+b+"' style='display: "+d+";'>";return h}catch(l){$u.error("ERROR in startToggle: "+l);return""}},Ya:"<hr /></div>",rb:function(b,c,d){try{d=$u.setContent(d,"");var g=n.getItem(b,"defaultValue");g=g==="defaultValue"?n.setItem(b,d):g;return'<textarea style="font-family: \'lucida grande\', tahoma, verdana, arial, sans-serif; font-size: 11px;" title="'+c+"\" type='text' id='caap_"+b+"' "+($u.is_chrome?" rows='3' cols='25'":
" rows='3' cols='21'")+">"+g+"</textarea>"}catch(h){$u.error("ERROR in MakeTextBox: "+h);return""}},u:function(b,c){try{if(n.getItem("SetTitle",M)&&b==="activity_mess"){var d=n.getItem("SetTitleAction",M)?c.replace("Activity: ","")+" - ":"";d+=n.getItem("SetTitleName",M)?a.p.PlayerName+" - ":"";document.title=d+a.rc}i("#caap_"+b,a.X).html(c)}catch(g){$u.error("ERROR in SetDivContent: "+g)}},hd:["Land of Fire","Land of Earth","Land of Mist","Land of Water","Demon Realm","Undead Realm","Underworld",
"Kingdom of Heaven","Ivory City","Earth II","Water II"],$c:["Ambrosia","Malekus","Corvintheus","Aurora","Azeron"],Vc:["Atlantis"],Eb:function(b,c){try{i("#caap_"+b+" option",a.X).removeAttr("selected");i("#caap_"+b+" option[value='"+c+"']",a.X).attr("selected","selected");return f}catch(d){$u.error("ERROR in SelectDropOption: "+d);return M}},Kg:function(){this.data={name:"",energy:0,general:"none",expRatio:0}},ra:function(){return(new a.Kg).data},hc:function(b,c){try{if(!$u.isString(b)||!$u.hasContent(c))e("No valid id supplied!");
$u.hasContent(c)||e("No value supplied!");var d=j.getItem("AutoQuest",a.ra());d[b]=c;j.setItem("AutoQuest",d);return f}catch(g){$u.error("ERROR in updateAutoQuest: "+g);return M}},lc:function(){try{i("#stopAutoQuest",a.X).text("Stop auto quest: "+j.getItem("AutoQuest",a.ra()).name+" (energy: "+j.getItem("AutoQuest",a.ra()).energy+")").css("display","block");return f}catch(b){$u.error("ERROR in ShowAutoQuest: "+b);return M}},Ld:function(){try{i("#stopAutoQuest",a.X).text("").css("display","none");
return f}catch(b){$u.error("ERROR in ClearAutoQuest: "+b);return M}},yb:function(b){try{j.setItem("AutoQuest",$u.setContent(b,a.ra()));a.Eb("WhyQuest",n.setItem("WhyQuest","Manual"));a.Ld();return f}catch(c){$u.error("ERROR in ManualAutoQuest: "+c);return M}},Va:function(b,c,d){try{i("#caap_"+b+" option",a.X).remove();i("#caap_"+b,a.X).append("<option disabled='disabled' value='not selected'>Choose one</option>");for(var g=0,h=c.length;g<h;g+=1){if(g===0&&!d){n.setItem(b,c[g]);$u.log(1,"Saved: "+
b+"  Value: "+c[g])}i("#caap_"+b,a.X).append("<option value='"+c[g]+"'>"+c[g]+"</option>")}d?i("#caap_"+b+" option[value='"+d+"']",a.X).attr("selected","selected"):i("#caap_"+b+" option:eq(1)",a.X).attr("selected","selected");return f}catch(l){$u.error("ERROR in ChangeDropDownList: "+l);return M}},Ma:{selector:".UIStandardFrame_Content",x:0,y:0},Mc:function(b){try{return{y:b?i(a.Ma.selector).offset().top:a.Ma.y,x:a.Ma.x===""||b?i(a.Ma.selector).offset().left+i(a.Ma.selector).width()+10:i(a.Ma.selector).offset().left+
a.Ma.x}}catch(c){$u.error("ERROR in GetControlXY: "+c);return{x:0,y:0}}},Dg:function(){try{j.setItem("caap_div_menuTop",a.X.offset().top);j.setItem("caap_div_menuLeft",a.X.offset().left-i(a.Ma.selector).offset().left);j.setItem("caap_top_zIndex","1");j.setItem("caap_div_zIndex","2")}catch(b){$u.error("ERROR in SaveControlXY: "+b)}},Ga:{selector:"#app46755028429_app_body_container",x:0,y:0},Wb:function(b){try{return{y:b?i(a.Ga.selector).offset().top-10:a.Ga.y,x:a.Ga.x===""||b?i(a.Ga.selector).offset().left:
i(a.Ga.selector).offset().left+a.Ga.x}}catch(c){$u.error("ERROR in GetDashboardXY: "+c);return{x:0,y:0}}},Eg:function(){try{j.setItem("caap_top_menuTop",a.K.offset().top);j.setItem("caap_top_menuLeft",a.K.offset().left-i(a.Ga.selector).offset().left);j.setItem("caap_div_zIndex","1");j.setItem("caap_top_zIndex","2")}catch(b){$u.error("ERROR in SaveDashboardXY: "+b)}},Ee:function(){try{var b="<div id='caap_div'>",c=0,d=0,g={x:0,y:0},h=j.getItem("StyleBackgroundLight","#E0C691"),l="",m="",k=["banner",
"activity_mess","idle_mess","quest_mess","battle_mess","monster_mess","guild_monster_mess","arena_mess","fortify_mess","heal_mess","demipoint_mess","demibless_mess","level_mess","exp_mess","debug1_mess","debug2_mess","control"];c=0;for(d=k.length;c<d;c+=1)b+="<div class='caap_ww' id='caap_"+k[c]+"'></div>";b+="</div>";a.Ma.x=j.getItem("caap_div_menuLeft","");a.Ma.y=j.getItem("caap_div_menuTop",i(a.Ma.selector).offset().top);g=a.Mc();i(b).css({"font-family":"'lucida grande', tahoma, verdana, arial, sans-serif",
"font-size":"11px",width:"180px",background:h,opacity:j.getItem("StyleOpacityLight",1),color:$u.bestTextColor(h),padding:"4px",border:"2px solid #444",top:g.y+"px",left:g.x+"px",zIndex:j.getItem("caap_div_zIndex","2"),position:"absolute","-moz-border-radius":"5px","-webkit-border-radius":"5px","border-radius":"5px"}).appendTo(document.body);a.X=i("#caap_div");m+="<div id='caap_BannerHide' style='display: "+(n.getItem("BannerDisplay",f)?"block":"none")+"'>";m+="<img src='data:image/png;base64,"+ha.header+
"' alt='Castle Age Auto Player' /><br /><hr /></div>";a.u("banner",m);l+=a.Re();l+=a.He();l+=a.De();l+=a.Se();l+=a.Be();l+=a.Pe();l+=a.Ne();l+=a.ye();l+=a.Te();l+=a.Le();l+=a.Ue();l+=a.Ie();l+=a.ze();l+=a.Me();l+=a.Ae();l+=a.Qe();l+=a.Ke();a.u("control",l);a.Gc(j.getItem("LastAction","Idle"));i("input[type='button']",a.X).button();a.Vd("CustStyleOpacityLight",0.5,1,0.01,1,f);a.Vd("CustStyleOpacityDark",0.5,1,0.01,1,f);return f}catch(o){$u.error("ERROR in AddControl: "+o);return M}},Re:function(){try{return"<div id='caapPaused' style='font-weight: bold; display: "+
j.getItem("caapPause","block")+"'>Paused on mouse click.<br /><a href='javascript:;' id='caapRestart' >Click here to restart</a></div><hr />"}catch(b){$u.error("ERROR in AddPauseMenu: "+b);return""}},He:function(){try{var b="";b+=a.v("Disable Autoplayer","Disabled",M,"Disable auto running of CAAP. Stays persistent even on page reload and the autoplayer will not autoplay.");b+="<hr />";return b}catch(c){$u.error("ERROR in AddDisableMenu: "+c);return""}},De:function(){try{var b="";b=a.$a("CashandHealth",
"CASH and HEALTH");b+=a.v("Bank Immediately","BankImmed",M,"Bank as soon as possible. May interrupt player and monster battles.");b+=a.v("Auto Buy Lands","autoBuyLand",M,"Automatically buy lands in groups of 10 based on best Return On Investment value.");b+=a.v("Auto Sell Excess Lands","SellLands",M,"Automatically sell off any excess lands above your level allowance.");b+=a.V("Keep In Bank","minInStore","Minimum cash to keep in the bank. Press tab to save",1E5,"","",M,M,62);b+=a.V("Bank Above","MaxInCash",
"Maximum cash to have on hand, bank anything above this, press tab to save (leave blank to disable).","","","",M,M,40);b+=a.V("But Keep On Hand","MinInCash","Minimum cash to have on hand, press tab to save","","","",f,M,40);b+=a.V("Heal If Health Below","MinToHeal","Minimum health to have before healing, press tab to save (leave blank to disable).","","","");b+=a.V("Not If Stamina Below","MinStamToHeal","Minimum Stamina to have before healing, press tab to save (leave blank to disable).","","","",
f,M);b+=a.Ya;return b}catch(c){$u.error("ERROR in AddCashHealthMenu: "+c);return""}},Se:function(){try{var b=["Quest","Demi Quests","Atlantis"],c=j.getItem("AutoQuest",a.ra()).name,d="";d=a.$a("Quests","QUEST");d+=a.sa("Quest When","WhenQuest",["Energy Available","At Max Energy","At X Energy","Not Fortifying","Never"],["Energy Available - will quest whenever you have enough energy.","At Max Energy - will quest when energy is at max and will burn down all energy when able to level up.","At X Energy - allows you to set maximum and minimum energy values to start and stop questing. Will burn down all energy when able to level up.",
"Not Fortifying - will quest only when your fortify settings are matched.","Never - disables questing."],"","Never",M,M,62);d+=a.Pa("WhenQuest","","Never",f);d+=a.Pa("WhenQuest","XEnergy","At X Energy",M);d+=a.V("Start At Or Above","XQuestEnergy","Start questing when energy is at or above this value.",1,"","",f,M);d+=a.V("Stop At Or Below","XMinQuestEnergy","Stop quest when energy is at or below this value.",0,"","",f,M);d+="</div>";d+=a.sa("Quest Area","QuestArea",b,"","","",M,M,62);switch(n.getItem("QuestArea",
b[0])){case "Quest":d+=a.sa("Sub Area","QuestSubArea",a.hd,"","","",M,M,62);break;case "Demi Quests":d+=a.sa("Sub Area","QuestSubArea",a.$c,"","","",M,M,62);break;default:d+=a.sa("Sub Area","QuestSubArea",a.Vc,"","","",M,M,62)}d+=a.sa("Quest For","WhyQuest",["Advancement","Max Influence","Max Gold","Max Experience","Manual"],["Advancement performs all the main quests in a sub quest area but not the secondary quests.","Max Influence performs all the main and secondary quests in a sub quest area.",
"Max Gold performs the quest in the specific area that yields the highest gold.","Max Experience performs the quest in the specific area that yields the highest experience.","Manual performs the specific quest that you have chosen."],"","",M,M,62);d+=a.v("Switch Quest Area","switchQuestArea",f,"Allows switching quest area after Advancement or Max Influence");d+=a.v("Use Only Subquest General","ForceSubGeneral",M,"Always do a quest with the Subquest General you selected under the Generals section. NOTE: This will keep the script from automatically switching to the required general for experience of primary quests.");
d+=a.v("Quest For Orbs","GetOrbs",M,"Perform the Boss quest in the selected land for orbs you do not have.");d+="<a id='stopAutoQuest' style='display: "+(c?"block":"none")+"' href='javascript:;' title='This will stop and remove the chosen quest and set questing to manual.'>";d+=c?"Stop auto quest: "+c+" (energy: "+j.getItem("AutoQuest",a.ra()).energy+")":"";d+="</a>";d+="</div>";d+=a.Ya;return d}catch(g){$u.error("ERROR in AddQuestMenu: "+g);return""}},Be:function(){try{var b="";b=a.$a("Battling",
"BATTLE");b+=a.sa("Battle When","WhenBattle",["Stamina Available","At Max Stamina","At X Stamina","No Monster","Stay Hidden","Demi Points Only","Never"],["Stamina Available will battle whenever you have enough stamina","At Max Stamina will battle when stamina is at max and will burn down all stamina when able to level up","At X Stamina you can set maximum and minimum stamina to battle","No Monster will battle only when there are no active monster battles or if Get Demi Points First has been selected.",
'Stay Hidden uses stamina to try to keep you under 10 health so you cannot be attacked, while also attempting to maximize your stamina use for Monster attacks. YOU MUST SET MONSTER TO "STAY HIDDEN" TO USE THIS FEATURE.',"Demi Points Only will battle only when Daily Demi Points are required, can use in conjunction with Get Demi Points First.","Never - disables player battles"],"","Never",M,M,62);b+=a.Pa("WhenBattle","","Never",f);b+="<div id='caap_WhenBattleStayHidden_hide' style='color: red; font-weight: bold; display: ";
b+=(n.getItem("WhenBattle","Never")==="Stay Hidden"&&n.getItem("WhenMonster","Never")!=="Stay Hidden"?"block":"none")+"'>";b+="Warning: Monster Not Set To 'Stay Hidden'";b+="</div>";b+=a.Pa("WhenBattle","XStamina","At X Stamina",M);b+=a.V("Start At Or Above","XBattleStamina","Start battling if stamina is above this points",1,"","",f,M);b+=a.V("Stop At Or Below","XMinBattleStamina","Don't battle if stamina is below this points",0,"","",f,M);b+="</div>";b+=a.Pa("WhenBattle","DemiOnly","Demi Points Only",
M);b+=a.v("Observe Get Demi Points First","observeDemiFirst",M,"If you are setting Get demi Points First and No Attack If % Under in Monster then enabling this option will cause Demi Points Only to observe the Demi Points requested in the case where No Attack If % Under is triggered.");b+="</div>";b+=a.sa("Battle Type","BattleType",["Invade","Duel","War"],["Battle using Invade button","Battle using Duel button - no guarentee you will win though","War using Duel button - no guarentee you will win though"],
"","",M,M,62);b+=a.v("Wait For Safe Health","waitSafeHealth",M,"Wait until health is 13 instead of 10, prevents you killing yourself but leaves you unhidden for upto 15 minutes");b+=a.v("Siege Weapon Assist Raids","raidDoSiege",f,"(EXPERIMENTAL) Turns on or off automatic siege assist for all raids only.");b+=a.v("Collect Raid Rewards","raidCollectReward",M,"(EXPERIMENTAL) Automatically collect raid rewards.");b+=a.v("Clear Complete Raids","clearCompleteRaids",M,"");b+=a.v("Ignore Battle Losses","IgnoreBattleLoss",
M,"Ignore battle losses and attack regardless.  This will also delete all battle loss records.");b+=a.V("Chain Battle Points","ChainBP","Number of battle points won to initiate a chain attack. Specify 0 to always chain attack.","","");b+=a.V("Chain Gold","ChainGold","Amount of gold won to initiate a chain attack. Specify 0 to always chain attack.","","","",M,M,30);b+=a.V("Max Chains","MaxChains","Maximum number of chain hits after the initial attack.",4,"","");b+=a.sa("Target Type","TargetType",["Freshmeat",
"Userid List","Raid"],["Use settings to select a target from the Battle Page","Select target from the supplied list of userids","Raid Battles"],"","",M,M,62);b+=a.Pa("TargetType","Freshmeat","Freshmeat",M);b+=a.ba("Attack targets that are not:");b+=a.V("Lower Than Rank Minus","FreshMeatMinRank","The lowest relative rank below yours that you are willing to spend your stamina on. Leave blank to attack any rank.","","","");b+=a.V("Higher Than X*Army","FreshMeatARBase","This value sets the base for your army ratio calculation. It is basically a multiplier for the army size of a player at your equal level. A value of 1 means you will battle an opponent the same level as you with an army the same size as you or less. Default .5",
0.5,"","");b+="</div>";b+=a.Pa("TargetType","Raid","Raid",M);b+=a.v("Power Attack","RaidPowerAttack",M,"Attack raids using the x5 button. (Not recommended).",f);b+=a.v("Attempt +1 Kills","PlusOneKills",M,"Force +1 kill scenario if 80% or more of targets are withn freshmeat settings. Note: Since Castle Age choses the target, selecting this option could result in a greater chance of loss.",f);b+=a.ba("Join Raids in this order <a href='http://senses.ws/caap/index.php?topic=1502.0' target='_blank' style='color: blue'>(INFO)</a>");
b+=a.rb("orderraid","List of search words that decide which raids to participate in first.  Use words in player name or in raid name. To specify max damage follow keyword with :max token and specifiy max damage values. Use 'k' and 'm' suffixes for thousand and million.","");b+="</div>";b+=a.Pa("TargetType","UserId","Userid List",M);b+=a.rb("BattleTargets","User IDs(not user name).  Click with the right mouse button on the link to the users profile & copy link.  Then paste it here and remove everything but the last numbers. (ie. 123456789)",
"");b+="</div>";b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddBattleMenu: "+c);return""}},Pe:function(){try{var b=["Ambrosia","Malekus","Corvintheus","Aurora","Azeron"],c=0,d="",g="";g+=a.$a("Monster","MONSTER");g+=a.sa("Attack When","WhenMonster",["Stamina Available","At Max Stamina","At X Stamina","Stay Hidden","Never"],["Stamina Available will attack whenever you have enough stamina","At Max Stamina will attack when stamina is at max and will burn down all stamina when able to level up",
"At X Stamina you can set maximum and minimum stamina to battle",'Stay Hidden uses stamina to try to keep you under 10 health so you cannot be attacked, while also attempting to maximize your stamina use for Monster attacks. YOU MUST SET BATTLE WHEN TO "STAY HIDDEN" TO USE THIS FEATURE.',"Never - disables attacking monsters"],"","Never",M,M,62);g+=a.Pa("WhenMonster","","Never",f);g+="<div id='caap_WhenMonsterStayHidden_hide' style='color: red; font-weight: bold; display: ";g+=(n.getItem("WhenMonster",
"Never")==="Stay Hidden"&&n.getItem("WhenBattle","Never")!=="Stay Hidden"?"block":"none")+"'>";g+="Warning: Battle Not Set To 'Stay Hidden'";g+="</div>";g+=a.Pa("WhenMonster","XStamina","At X Stamina",M);g+=a.V("Start At Or Above","XMonsterStamina","Start attacking if stamina is above this points",1,"","",f,M);g+=a.V("Stop At Or Below","XMinMonsterStamina","Don't attack if stamina is below this points",0,"","",f,M);g+="</div>";g+=a.V("Monster delay secs","seedTime","Max random delay (in seconds) to battle monsters",
300,"","");g+=a.v("Use Tactics","UseTactics",M,"Use the Tactics attack method, on monsters that support it, instead of the normal attack. You must be level 50 or above.");g+=a.Fa("UseTactics");g+=a.V("Health threshold","TacticsThreshold","If monster health falls below this percentage then use the regular attack buttons instead of tactics.",75,"","",f,M);g+="</div>";g+=a.v("Power Attack Only","PowerAttack",f,"Use power attacks. Only do normal attacks if power attack not possible");g+=a.Fa("PowerAttack");
g+=a.v("Power Attack Max","PowerAttackMax",M,"Use maximum power attacks globally on Skaar, Genesis, Ragnarok, and Bahamut types. Only do normal power attacks if maximum power attack not possible",f);g+="</div>";g+=a.v("Power Fortify Max","PowerFortifyMax",M,"Use maximum power fortify globally. Only do normal fortify attacks if maximum power fortify not possible. Also includes other energy attacks, Strengthen, Deflect and Cripple. NOTE: Setting a high forty% can waste energy and no safety on other types.");
g+=a.v("Siege Weapon Assist Monsters","monsterDoSiege",f,"Turns on or off automatic siege assist for all monsters only.");g+=a.v("Collect Monster Rewards","monsterCollectReward",M,"Automatically collect monster rewards.");g+=a.v("Clear Complete Monsters","clearCompleteMonsters",M,"");g+=a.v("Achievement Mode","AchievementMode",f,"Check if monsters have reached achievement damage level first. Switch when achievement met.");g+=a.v("Get Demi Points First","DemiPointsFirst",M,"Don't attack monsters until you've gotten all your demi points from battling. Set 'Battle When' to 'No Monster'");
g+=a.Fa("DemiPointsFirst");for(c=0;c<b.length;c+=1){d+="<span title='"+b[c]+"'>";d+="<img alt='"+b[c]+"' src='data:image/jpg;base64,"+ha[b[c]]+"' height='15px' width='15px'/>";d+=a.Mb("DemiPoint"+c,f);d+="</span>"}g+=a.ba(d,M,M,"white-space: nowrap;");g+="</div>";g+=a.V("Fortify If % Under","MaxToFortify","Fortify if ship health is below this % (leave blank to disable)",50,"","");g+=a.V("Quest If % Over","MaxHealthtoQuest","Do Quests if ship health is above this % and quest mode is set to Not Fortify (leave blank to disable)",
60,"","");g+=a.V("No Attack If % Under","MinFortToAttack","Don't attack if ship health is below this % (leave blank to disable)",10,"","");g+=a.v("Don't Wait Until Strengthen","StrengthenTo100",f,"Don't wait until the character class gets a bonus for strengthening but perform strengthening as soon as the energy is available.");g+=a.ba("Attack Monsters in this order <a href='http://senses.ws/caap/index.php?topic=1502.0' target='_blank' style='color: blue'>(INFO)</a>");g+=a.rb("orderbattle_monster",
"List of search words that decide which monster to attack first. Use words in player name or in monster name. To specify max damage follow keyword with :max token and specifiy max damage values. Use 'k' and 'm' suffixes for thousand and million. To override achievement use the ach: token and specify damage values.","","");g+="</div>";g+=a.Ya;return g}catch(h){$u.error("ERROR in AddMonsterMenu: "+h);return""}},Ne:function(){try{var b="";b+=a.$a("GuildMonsters","GUILD MONSTERS");b+=a.sa("Attack When",
"WhenGuildMonster",["Stamina Available","At Max Stamina","At X Stamina","Never"],["Stamina Available will attack whenever you have enough stamina","At Max Stamina will attack when stamina is at max and will burn down all stamina when able to level up","At X Stamina you can set maximum and minimum stamina to battle","Never - disables attacking monsters"],"","Never",M,M,62);b+=a.Pa("WhenGuildMonster","","Never",f);b+=a.Pa("WhenGuildMonster","XStamina","At X Stamina",M);b+=a.V("Start At Or Above","MaxStaminaToGMonster",
"",0,"","",f,M);b+=a.V("Stop At Or Below","MinStaminaToGMonster","",0,"","",f,M);b+="</div>";b+=a.v("Classic Monsters First","doClassicMonstersFirst",M,"Prioritise the classic monsters and raids before Guild Monsters.");b+=a.v("Siege Monster","doGuildMonsterSiege",f,"Perform siege assists when visiting your Guild Monster.");b+=a.v("Collect Rewards","guildMonsterCollect",M,"Collect the rewards of your completed Guild Monsters.");b+=a.v("Don't Attack Clerics","ignoreClerics",M,"Do not attack Guild Monster's Clerics. Does not include the Gate minions e.g. Azriel");
b+=a.ba("Attack Gates");b+=a.ba("N"+a.Mb("attackGateNorth",f),M,f,"display: inline-block; width: 25%;");b+=a.ba("W"+a.Mb("attackGateWest",f),M,f,"display: inline-block; width: 25%;");b+=a.ba("E"+a.Mb("attackGateEast",f),M,f,"display: inline-block; width: 25%;");b+=a.ba("S"+a.Mb("attackGateSouth",f),M,f,"display: inline-block; width: 25%;");b+=a.V("Ignore Below Health","XMinMonsterStamina","Don't attack monster minions that have a health below this value.",0,"","");b+=a.v("Choose First Alive","chooseIgnoredMinions",
M,"When the only selection left is the monster general then go back and attack any previously ignored monster minions.");b+=a.ba("Attack Monsters in this order");b+=a.rb("orderGuildMonster","Attack your guild monsters in this order, can use Slot Number and Name. Control is provided by using :ach and :max","","");b+=a.ba("Attack Minions in this order");b+=a.rb("orderGuildMinion","Attack your guild minions in this order. Uses the minion name.","","");b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddGuildMonstersMenu: "+
c);return""}},ye:function(){try{var b="";b+=a.$a("Arena","ARENA");b+=a.sa("Attack When","WhenArena",["Tokens Available","Never"],["Tokens Available will attack whenever you have enough tokens","Never - disables attacking in Arena"],"","Never",M,M,62);b+=a.Pa("WhenArena","","Never",f);b+=a.ba("Attack Classes in this order");b+=a.rb("orderArenaClass","Attack Arena class in this order. Uses the class name.","Cleric,Mage,Rogue,Warrior","");b+=a.V("Ignore Health &lt;=","ignoreArenaHealth","Ignore enemies with health equal to or below this level.",
200,"","");b+=a.V("Ignore Level Plus &gt;=","maxArenaLevel","This value is added the the value of your current level and enemies with a level above this value are ignored",50,"","");b+=a.v("Stun All Clerics","killClericFirst",M,"Attack Clerics that are not stunned.");b+=a.v("Do Polymorphed","doPoly",f,"Attack polymorphed players.");b+=a.Fa("doPoly");b+=a.v("Priority Polymorphed","attackPoly",M,"Attack polymorphed players first.",f);b+=a.v("Attack Polymorphed If Rogue","roguePoly",f,"Only attack polymorphed players if you are class Rogue.",
f);b+=a.v("Stunned Ignore Polymorphed","stunnedPoly",f,"If you are stunned then don't attack polymorphed minions, leave them for someone who can do more damage.",f);b+="</div>";b+=a.v("Suicide","attackSuicide",M,"When out of targets, attack active Rogues or Warriors to which you lost previously, before any class that's not stunned.");b+=a.sa("Chain","chainArena",["0","160","200","240"],["Disabled","Chain 160 and above","Chain 200 and above","Chain 240 and above"],"","160",M,M,35);b+=a.Pa("chainArena",
"","0",f);b+=a.v("Chain Observe Health","observeHealth",f,"When chaining, observe the 'Ignore Health' and 'Stun All Clerics' options.");b+="</div>";b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddArenaMenu: "+c);return""}},Te:function(){try{var b="";b+=a.$a("Recon","RECON");b+=a.v("Enable Player Recon","DoPlayerRecon",M,"Enable player battle reconnaissance to run as an idle background task. Battle targets will be collected and can be displayed using the 'Target List' selection on the dashboard.");
b+=a.Fa("DoPlayerRecon");b+=a.V("Limit Target Records","LimitTargets","Maximum number of records to hold.",100,"","");b+=a.ba("Find battle targets that are:");b+=a.V("Not Lower Than Rank Minus","ReconPlayerRank","Provide the number of ranks below you which recon will use to filter targets. This value will be subtracted from your rank to establish the minimum rank that recon will consider as a viable target. Default 3.",3,"","",f,M);b+=a.V("Not Higher Than Level Plus","ReconPlayerLevel","Provide the number of levels above you which recon will use to filter targets. This value will be added to your level to establish the maximum level that recon will consider as a viable target. Default 10.",
10,"","",f,M);b+=a.V("Not Higher Than X*Army","ReconPlayerARBase","This value sets the base for your army ratio calculation. It is basically a multiplier for the army size of a player at your equal level. For example, a value of .5 means you will battle an opponent the same level as you with an army half the size of your army or less. Default 1.",1,"","",f,M);b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddReconMenu: "+c);return""}},Le:function(){try{var b=0,c="";c+=a.$a("Generals","GENERALS");
c+=a.v("Do not reset General","ignoreGeneralImage",f,"This will prevent the script from changing your selected General to 'Use Current' if the script is unable to find the General's image when changing activities. Instead it will use the current General for the activity and try to select the correct General again next time.");for(b=0;b<x.Fb.length;b+=1)c+=a.sa(x.Fb[b],x.Fb[b]+"General",x.xb,"","","Use Current",M,M,62);c+=a.sa("Buy","BuyGeneral",x.Fc,"","","Use Current",M,M,62);c+=a.sa("Collect","CollectGeneral",
x.Kc,"","","Use Current",M,M,62);c+=a.sa("Income","IncomeGeneral",x.Qc,"","","Use Current",M,M,62);c+=a.sa("Banking","BankingGeneral",x.Ec,"","","Use Current",M,M,62);c+=a.sa("Level Up","LevelUpGeneral",x.xb,"","","Use Current",M,M,62);c+=a.Pa("LevelUpGeneral","","Use Current",f);c+=a.V("Exp To Use Gen","LevelUpGeneralExp","Specify the number of experience points below the next level up to begin using the level up general.",20,"","",f,M);c+=a.v("Gen For Idle","IdleLevelUpGeneral",f,"Use the Level Up General for Idle mode.",
f,M);c+=a.v("Gen For Monsters","MonsterLevelUpGeneral",f,"Use the Level Up General for Monster mode.",f,M);c+=a.v("Gen For Guild Monsters","GuildMonsterLevelUpGeneral",f,"Use the Level Up General for Guild Monster mode.",f,M);c+=a.v("Gen For Fortify","FortifyLevelUpGeneral",f,"Use the Level Up General for Fortify mode.",f,M);c+=a.v("Gen For Invades","InvadeLevelUpGeneral",f,"Use the Level Up General for Invade mode.",f,M);c+=a.v("Gen For Duels","DuelLevelUpGeneral",f,"Use the Level Up General for Duel mode.",
f,M);c+=a.v("Gen For Wars","WarLevelUpGeneral",f,"Use the Level Up General for War mode.",f,M);c+=a.v("Gen For Arena","ArenaLevelUpGeneral",f,"Use the Level Up General for Arena mode.",f,M);c+=a.v("Gen For SubQuests","SubQuestLevelUpGeneral",f,"Use the Level Up General for doing sub-quests.",f,M);c+=a.v("Gen For MainQuests","QuestLevelUpGeneral",M,"Use the Level Up General for doing primary quests (Warning: May cause you not to gain influence if wrong general is equipped.)",f,M);c+=a.v("Don't Bank After",
"NoBankAfterLvl",f,"Ignore Banking until level up energy and stamina gains have been used.",f,M);c+=a.v("Don't Income After","NoIncomeAfterLvl",f,"Ignore Income until level up energy and stamina gains have been used.",f,M);c+=a.v("Prioritise Monster After","PrioritiseMonsterAfterLvl",M,"EXPERIMENTAL: Enables the Quest 'Not Fortifying' mode after level up.",f,M);c+="</div>";c+=a.v("Reverse Under Level 4 Order","ReverseLevelUpGenerals",M,"This will make the script level Generals under level 4 from Top-down instead of Bottom-up");
c+=a.Ya;return c}catch(d){$u.error("ERROR in AddGeneralsMenu: "+d);return""}},Ue:function(){try{var b=["","Energy","Attack","Defense","Stamina","Health"],c=0,d="";d+=a.$a("Status","UPGRADE SKILL POINTS");d+=a.v("Auto Add Upgrade Points","AutoStat",M,"Automatically increase attributes when upgrade skill points are available.");d+=a.Fa("AutoStat");d+=a.v("Spend All Possible","StatSpendAll",M,"If selected then spend all possible points and don't save for stamina upgrade.");d+=a.v("Upgrade Immediately",
"StatImmed",M,"Update Stats Immediately");d+=a.v("Advanced Settings <a href='http://userscripts.org/posts/207279' target='_blank' style='color: blue'>(INFO)</a>","AutoStatAdv",M,"USE WITH CAUTION: You can use numbers or formulas(ie. level * 2 + 10). Variable keywords include energy, health, stamina, attack, defense, and level. JS functions can be used (Math.min, Math['max'], etc) !!!Remember your math class: 'level + 20' not equals 'level * 2 + 10'!!!");d+=a.Fa("AutoStatAdv",f);for(c=0;c<5;c+=1){d+=
a.nb();d+=a.ba("Increase",M,M,"width: 27%; display: inline-block;");d+=a.ba(a.Rc("Attribute"+c,b,"",""),M,M,"width: 40%; display: inline-block;");d+=a.ba("to",M,M,"text-align: center; width: 10%; display: inline-block;");d+=a.ba(a.Sc("AttrValue"+c,"Automatically increase attributes when upgrade skill points are available.",0,"","text"),M,f,"width: 20%; display: inline-block;");d+=a.jb}d+="</div>";d+=a.Fa("AutoStatAdv");for(c=5;c<10;c+=1){d+=a.nb();d+=c===5?a.ba("Increase",M,M,"width: 25%; display: inline-block;"):
a.ba("Then",M,M,"width: 25%; display: inline-block;");d+=a.ba(a.Rc("Attribute"+c,b,"","",""),M,M,"width: 45%; display: inline-block;");d+=a.ba("using",f,M,"width: 25%; display: inline-block;");d+=a.jb;d+=a.ba(a.Sc("AttrValue"+c,"Automatically increase attributes when upgrade skill points are available.","","","text","width: 97%;"),M,M,"")}d+="</div>";d+="</div>";d+=a.Ya;return d}catch(g){$u.error("ERROR in AddSkillPointsMenu: "+g);return""}},Me:function(){try{var b="";b+=a.$a("Gifting","GIFTING OPTIONS");
b+=a.v("Auto Gifting","AutoGift",M,"Automatically receive and send return gifts.");b+=a.Fa("AutoGift");b+=a.v("Queue unique users only","UniqueGiftQueue",f,"When enabled only unique user's gifts will be queued, otherwise all received gifts will be queued.");b+=a.v("Collect Only","CollectOnly",M,"Only collect gifts, do not queue and do not return.");b+=a.v("And Queue","CollectAndQueue",M,"When used with Collect Only it will collect and queue gifts but not return.");b+=a.sa("Give","GiftChoice",q.ja.list(),
"","","",M,M,80);b+=a.v("1 Gift Per Person Per 24hrs","ReturnOnlyOne",M,"Only return 1 gift to a person in 24 hours even if you received many from that person.");b+=a.v("Filter Return By UserId","FilterReturnId",M,"Don't return gifts to a list of UserIDs");b+=a.Fa("FilterReturnId");b+=a.nb();b+=a.ba(a.rb("FilterReturnIdList","Don't return gifts to these UserIDs. Use ',' between each UserID","",""));b+=a.jb;b+="</div>";b+=a.v("Filter Return By Gift","FilterReturnGift",M,"Don't return gifts for a list of certain gifts recieved");
b+=a.Fa("FilterReturnGift");b+=a.nb();b+=a.ba(a.rb("FilterReturnGiftList","Don't return gifts to these received gifts. Use ',' between each gift","",""));b+=a.jb;b+="</div>";b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddGiftingOptionsMenu: "+c);return""}},Ie:function(){try{var b="";b+=a.$a("Elite","ELITE GUARD OPTIONS");b+=a.v("Auto Elite Army","AutoElite",M,"Enable or disable Auto Elite function");b+=a.Fa("AutoElite");b+=a.v("Timed Only","AutoEliteIgnore",M,"Use this option if you have a small army and are unable to fill all 10 Elite positions. This prevents the script from checking for any empty places and will cause Auto Elite to run on its timer only.");
b+=a.nb();b+=a.ba("<input type='button' id='caap_resetElite' value='Do Now' style='padding: 0; font-size: 10px; height: 18px' />");b+=a.jb;b+=a.nb();b+=a.ba(a.rb("EliteArmyList","Try these UserIDs first. Use ',' between each UserID","",""));b+=a.jb;b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddEliteGuardOptionsMenu: "+c);return""}},ze:function(){try{var b="";b+=a.$a("Army","ARMY OPTIONS");b+=a.v("Enable Army Functions","EnableArmy",f,"Enable or disable the Army functions. Required when using CA's alternative URL.");
b+=a.Fa("EnableArmy");b+=a.V("Scan Every (days)","ArmyScanDays","Scan the army pages every X days.",7,"","");b+=a.v("Change Indicators","ArmyIndicators",M,"");b+=a.Fa("ArmyIndicators");b+=a.V("Recent","ArmyAgeDaysColor0","","#008000","","color",M,M,50);b+=a.V("Warn 1 (days)","ArmyAgeDays1","",7,"","");b+=a.V("Warn 2","ArmyAgeDaysColor1","","#ADFF2F","","color",M,M,50);b+=a.V("Warn 2 (days)","ArmyAgeDays2","",14,"","");b+=a.V("Warn 3","ArmyAgeDaysColor2","","#FFD700","","color",M,M,50);b+=a.V("Warn 3 (days)",
"ArmyAgeDays3","",21,"","");b+=a.V("Warn 4","ArmyAgeDaysColor3","","#FF8C00","","color",M,M,50);b+=a.V("Warn 4 (days)","ArmyAgeDays4","",28,"","");b+=a.V("Warn 4","ArmyAgeDaysColor4","","#FF0000","","color",M,M,50);b+="</div>";b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddArmyOptionsMenu: "+c);return""}},Ae:function(){try{var b="";b+=a.$a("Auto","AUTO OPTIONS");b+=a.sa("Auto bless","AutoBless",["None","Energy","Attack","Defense","Health","Stamina"],["None disables the auto bless feature.",
"Energy performs an automatic daily blessing with Ambrosia.","Attack performs an automatic daily blessing with Malekus.","Defense performs an automatic daily blessing with Corvintheus.","Health performs an automatic daily blessing with Aurora.","Stamina performs an automatic daily blessing with Azeron."],"","",M,M,62);b+=a.v("Auto Potions","AutoPotions",M,"Enable or disable the auto consumption of energy and stamina potions.");b+=a.Fa("AutoPotions");b+=a.V("Spend Stamina At","staminaPotionsSpendOver",
"Number of stamina potions at which to begin consuming.",39,"","",f,M);b+=a.V("Keep Stamina","staminaPotionsKeepUnder","Number of stamina potions to keep.",35,"","",f,M);b+=a.V("Spend Energy At","energyPotionsSpendOver","Number of energy potions at which to begin consuming.",39,"","",f,M);b+=a.V("Keep Energy","energyPotionsKeepUnder","Number of energy potions to keep.",35,"","",f,M);b+=a.V("Wait If Exp. To Level","potionsExperience","Do not consume potions if the experience points to the next level are within this value.",
20,"","",f,M);b+="</div>";b+=a.v("Auto Alchemy","AutoAlchemy",M,"AutoAlchemy will combine all recipes that do not have missing ingredients. By default, it will not combine Battle Hearts recipes.");b+=a.Fa("AutoAlchemy");b+=a.v("Do Battle Hearts","AutoAlchemyHearts",M,"If for some reason you do not want to skip Battle Hearts",f);b+="</div>";b+=a.Ya;return b}catch(c){$u.error("ERROR in AddAutoOptionsMenu: "+c);return""}},Qe:function(){try{var b="";b+=a.$a("Other","OTHER OPTIONS");b+=a.v("Display Item Titles",
"enableTitles",f,"Replaces the CA item titles with more useful tooltips.");b+=a.v("Do Goblin Hinting","goblinHinting",f,"When in the Goblin Emporium, CAAP will try to hide items that you require and fade those that may be required.");b+=a.v("Hide Recipe Ingredients","enableIngredientsHide",M,"Hide the ingredients list on the Alchemy pages.");b+=a.v("Alchemy Shrink","enableAlchemyShrink",f,"Reduces the size of the item images and shrinks the recipe layout on the Alchemy pages.");b+=a.v("Recipe Clean-Up",
"enableRecipeClean",1,"CAAP will try to hide recipes that are no longer required on the Alchemy page and therefore shrink the list further.");b+=a.Fa("enableRecipeClean");b+=a.V("Recipe Count","recipeCleanCount","The number of items to be owned before cleaning the recipe item from the Alchemy page.",1,"","",f,M);b+="</div>";b+=a.v("Display CAAP Banner","BannerDisplay",f,"Uncheck if you wish to hide the CAAP banner.");b+=a.v("Use 24 Hour Format","use24hr",f,"Use 24 hour format for displayed times.");
b+=a.v("Set Title","SetTitle",M,"Set the title bar.");b+=a.Fa("SetTitle");b+=a.v("Display Action","SetTitleAction",M,"Add the current action.",f);b+=a.v("Display Name","SetTitleName",M,"Add the player name.",f);b+="</div>";b+=a.v("Auto Comma Text Areas","TextAreaCommas",M,"When enabled, text input areas will be automatically converted to comma seperation");b+=a.v("Hide Sidebar Adverts","HideAds",M,"Hides the sidebar adverts.");b+=a.v("Hide FB Iframe Adverts","HideAdsIframe",M,"Hide the FaceBook Iframe adverts");
b+=a.v("Hide FB Chat","HideFBChat",M,"Hide the FaceBook Chat");b+=a.v("Enable News Summary","NewsSummary",f,"Enable or disable the news summary on the index page.");b+=a.sa("Style","DisplayStyle",["CA Skin","Original","Custom","None"],"","","CA Skin",M,M,62);b+=a.Pa("DisplayStyle","","Custom");b+=a.ba("Running:");b+=a.V("Color","CustStyleBackgroundLight","#FFFFFF","#E0C691","","color",f,M,40);b+=a.Ud("Transparency","CustStyleOpacityLight","",1,f);b+=a.ba("Paused:");b+=a.V("Color","CustStyleBackgroundDark",
"#FFFFFF","#B09060","","color",f,M,40);b+=a.Ud("Transparency","CustStyleOpacityDark","",1,f);b+="</div>";b+=a.v("Enable Level Up Mode","EnableLevelUpMode",f,"Calculates approx. how many XP points you will get from your current stamina and energy and when you have enough of each to level up it will start using them down to 0.");b+=a.v("Serialize Raid and Monster","SerializeRaidsAndMonsters",M,"Setting this value allows you to define your Raids and Monsters all within either the Monster Attack Order or Raid Attack Order list boxes. Selection is serialized so that you only have a single selection from the list active at one time.  This is in contrast to the default mode, where you can have an active Raid and an active Monster, both processing independently.");
b+=a.v("Bookmark Mode","bookmarkMode",M,"Enable this if you are running CAAP from a bookmark. Disables refreshes and gifting. Note: not recommended for long term operation.");b+=a.v("Change Log Level","ChangeLogLevel",M);b+=a.Fa("ChangeLogLevel");b+=a.V("Log Level","DebugLevel","",1,"","",f,M);b+="</div>";b+=a.nb();b+=a.ba("<input"+(a.domain.which>1?" disabled='disabled' title='Fill Army is not possible on this server.'":"")+" type='button' id='caap_FillArmy' value='Fill Army' style='padding: 0; font-size: 10px; height: 18px' />");
b+=a.jb;b+=a.Ya;return b}catch(c){$u.error("ERROR in AddOtherOptionsMenu: "+c);return""}},Ke:function(){try{var b="";b+=a.nb();b+=a.ba("Unlock Menu <input type='button' id='caap_ResetMenuLocation' value='Reset' style='padding: 0; font-size: 10px; height: 18px' />",M,M,"width: 90%; display: inline-block;");b+=a.ba("<input type='checkbox' id='unlockMenu' />",M,f,"width: 10%; display: inline-block;");b+=a.jb;if(ma){b+=a.ba("Version: "+ja+" d"+ma+" - <a href='http://senses.ws/caap/index.php' target='_blank'>CAAP Forum</a>");
if(a.Sb)b+=a.ba("<a href='http://castle-age-auto-player.googlecode.com/svn/trunk/Castle-Age-Autoplayer.user.js'>Install new CAAP version: "+j.getItem("SUC_remote_version")+" d"+j.getItem("DEV_remote_version")+"!</a>")}else{b+=a.ba("Version: "+ja+" - <a href='http://senses.ws/caap/index.php' target='_blank'>CAAP Forum</a>");if(a.Sb)b+=a.ba("<a href='http://castle-age-auto-player.googlecode.com/files/Castle-Age-Autoplayer.user.js'>Install new CAAP version: "+j.getItem("SUC_remote_version")+"!</a>")}return b}catch(c){$u.error("ERROR in AddFooterMenu: "+
c);return""}},Ge:function(){try{var b="<div id='caap_top'>",c={x:0,y:0},d=j.getItem("StyleBackgroundLight","#E0C961");b+="<div id='caap_buttonMonster' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Monster"?"block":"none")+"'>";b+="<input type='button' id='caap_refreshMonsters' value='Refresh Monster List' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonGuildMonster' style='position:absolute;top:0px;left:250px;display:"+
(n.getItem("DBDisplay","Monster")==="Guild Monster"?"block":"none")+"'>";b+="<input type='button' id='caap_refreshGuildMonsters' value='Refresh Guild Monster List' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonTargets' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Target List"?"block":"none")+"'>";b+="<input type='button' id='caap_clearTargets' value='Clear Targets List' style='padding: 0; font-size: 9px; height: 18px' /></div>";
b+="<div id='caap_buttonBattle' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Battle Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_clearBattle' value='Clear Battle Stats' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonGifting' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Gifting Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_clearGifting' value='Clear Gifting Stats' style='padding: 0; font-size: 9px; height: 18px' /></div>";
b+="<div id='caap_buttonGiftQueue' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Gift Queue"?"block":"none")+"'>";b+="<input type='button' id='caap_clearGiftQueue' value='Clear Gift Queue' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonArmy' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Army"?"block":"none")+"'>";b+="<input type='button' id='caap_getArmy' value='Get Army' style='padding: 0; font-size: 9px; height: 18px' /></div>";
b+="<div id='caap_buttonSortGenerals' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Generals Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_sortGenerals' value='Advanced Sort' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonSortSoldiers' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Soldiers Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_sortSoldiers' value='Advanced Sort' style='padding: 0; font-size: 9px; height: 18px' /></div>";
b+="<div id='caap_buttonSortItem' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Item Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_sortItem' value='Advanced Sort' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonSortMagic' style='position:absolute;top:0px;left:250px;display:"+(n.getItem("DBDisplay","Monster")==="Magic Stats"?"block":"none")+"'>";b+="<input type='button' id='caap_sortMagic' value='Advanced Sort' style='padding: 0; font-size: 9px; height: 18px' /></div>";
b+="<div id='caap_buttonFeed' style='position:absolute;top:0px;left:10px;'><input id='caap_liveFeed' type='button' value='Live Feed' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_buttonFeed' style='position:absolute;top:0px;left:80px;'><input id='caap_crusaders' type='button' value='Crusaders' style='padding: 0; font-size: 9px; height: 18px' /></div>";b+="<div id='caap_DBDisplay' style='font-size: 9px;position:absolute;top:0px;right:5px;'>Display: ";b+=function(h,l,
m,k){try{var o=n.getItem(h,"defaultValue"),r="",s=0,v=0;o=o!=="defaultValue"?o:n.setItem(h,l[0]);r=" <select id='caap_"+h+"' "+k+"'><option>"+o;s=0;for(v=l.length;s<v;s+=1)r+=o!==l[s]?"<option value='"+l[s]+"' "+($u.hasContent(m[s])?" title='"+m[s]+"'":"")+">"+l[s]:"";return r+"</select>"}catch(B){$u.error("ERROR in DBDropDown: "+B);return""}}("DBDisplay",["Monster","Guild Monster","Target List","Battle Stats","User Stats","Generals Stats","Soldiers Stats","Item Stats","Magic Stats","Gifting Stats",
"Gift Queue","Arena","Army"],"","style='font-size: 9px; min-width: 120px; max-width: 120px; width : 120px;'")+"</div>";b+="<div id='caap_infoMonster' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Monster"?"block":"none")+"'></div>";b+="<div id='caap_guildMonster' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Guild Monster"?"block":"none")+"'></div>";b+=
"<div id='caap_infoTargets1' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Target List"?"block":"none")+"'></div>";b+="<div id='caap_infoBattle' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Battle Stats"?"block":"none")+"'></div>";b+="<div id='caap_userStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay",
"Monster")==="User Stats"?"block":"none")+"'></div>";b+="<div id='caap_generalsStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Generals Stats"?"block":"none")+"'></div>";b+="<div id='caap_soldiersStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Soldiers Stats"?"block":"none")+"'></div>";b+="<div id='caap_itemStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+
(n.getItem("DBDisplay","Monster")==="Item Stats"?"block":"none")+"'></div>";b+="<div id='caap_magicStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Magic Stats"?"block":"none")+"'></div>";b+="<div id='caap_giftStats' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Gifting Stats"?"block":"none")+"'></div>";b+="<div id='caap_giftQueue' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+
(n.getItem("DBDisplay","Monster")==="Gift Queue"?"block":"none")+"'></div>";b+="<div id='caap_army' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Army"?"block":"none")+"'></div>";b+="<div id='caap_arena' style='position:relative;top:15px;width:610px;height:165px;overflow:auto;display:"+(n.getItem("DBDisplay","Monster")==="Arena"?"block":"none")+"'></div>";b+="</div>";a.Ga.x=j.getItem("caap_top_menuLeft","");a.Ga.y=j.getItem("caap_top_menuTop",
i(a.Ga.selector).offset().top-10);c=a.Wb();i(b).css({"font-family":"'lucida grande', tahoma, verdana, arial, sans-serif","font-size":"11px",background:d,color:$u.bestTextColor(d),padding:"5px",height:"185px",width:"610px",margin:"0 auto",opacity:j.getItem("StyleOpacityLight",1),top:c.y+"px",left:c.x+"px",zIndex:j.getItem("caap_top_zIndex",1),position:"absolute","-moz-border-radius":"5px","-webkit-border-radius":"5px","border-radius":"5px"}).appendTo(document.body);a.K=i("#caap_top");i("input[type='button']",
a.K).button();return f}catch(g){$u.error("ERROR in AddDashboard: "+g);return M}},mb:function(b){var c={text:"",color:"",vb:"",id:"",title:"",width:""},d="<th";c=b;b=$u.hasContent(c.color)?"":" data-type='bestcolor'";c.color=$u.setContent(c.color,$u.bestTextColor(j.getItem("StyleBackgroundLight","#E0C961")));d+=$u.hasContent(c.id)?" id='"+c.id+"'":"";d+=$u.hasContent(c.title)?" title='"+c.title+"'":"";d+=b+" style='color:"+c.color+";font-size:10px;font-weight:bold;text-align:left;"+($u.hasContent(c.vb)?
"background-color:"+c.vb+";":"")+($u.hasContent(c.width)?"width:"+c.width+";":"")+"'>"+c.text+"</th>";return d},q:function(b){var c={text:"",color:"",vb:"",id:"",title:""},d="<td";c=b;b=$u.hasContent(c.color)?"":" data-type='bestcolor'";c.color=$u.setContent(c.color,$u.bestTextColor(n.getItem("StyleBackgroundLight","#E0C961")));d+=$u.hasContent(c.id)?" id='"+c.id+"'":"";d+=$u.hasContent(c.title)?" title='"+c.title+"'":"";d+=b+" style='color:"+c.color+";font-size:10px;text-align:left;"+($u.hasContent(c.vb)?
"background-color:"+c.vb+";":"")+"'>"+c.text+"</td>";return d},Tc:f,na:function(b){try{a.K.length===0&&e("We are missing the Dashboard div!");if(!b&&!u.ld("dashboard")&&i("#caap_infoMonster").html()){if(a.Tc){$u.log(4,"Dashboard update is waiting on oneMinuteUpdate");a.Tc=M}return M}a.Tc=f;$u.log(3,"Updating Dashboard");var c="",d="",g=0;b=[];var h=[],l=[],m=[],k=0,o=0,r=0,s="",v="",B="",G="",A="",w="",L="",y="",O="",T="",H=0,P=0,U=0,F=0,Z=0,fa=0,K="",R={text:"",color:"",vb:"",id:"",title:"",width:""},
Y={text:"",color:"",vb:"",id:"",title:""},ba=/'(http:.+)'/,ga=/caap_.*Stats_/,W=ea;if(n.getItem("DBDisplay","")==="Monster"&&j.getItem("MonsterDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["Name","Damage","Damage%","Fort%","Stre%","TimeLeft","T2K","Phase","Link","&nbsp;","&nbsp;"];h=["name","damage","life","fortify","strength","time","t2k","phase","link"];k=0;for(F=b.length;k<F;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:b[k]==="Name"?"30%":""});c+=
"</tr>";h.shift();p.k.forEach(function(z){c+="<tr>";d=z.color;if(z.name===j.getItem("targetFromfortify",(new p.Nb).data).name)d="blue";else if(z.name===j.getItem("targetFrombattle_monster","")||z.name===j.getItem("targetFromraid",""))d="green";T=z.conditions;H=p.eb("ach",T);P=p.eb("max",T);if(s=z.link){v=s.replace("&action=doObjective","").match(ba);B="Clicking this link will take you to "+z.name;Y={text:'<span id="caap_monster_'+r+'" title="'+B+'" mname="'+z.name+'" rlink="'+v[1]+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+
z.name+"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:z.name,color:d,id:"",title:""});h.forEach(function(N){y="caap_"+N+"_"+r;O="";if(N==="phase"&&d==="grey")c+=a.q({text:z.status,color:d,id:"",title:""});else{g=z[N];if(g!==""&&(g>=0||g.length)){if(!$u.isNaN(g)&&g>999)g=g.addCommas();switch(N){case "damage":O=H?"User Set Monster Achievement: "+H.addCommas():n.getItem("AchievementMode",M)?$u.hasContent(p.info[z.type])&&$u.isNumber(p.info[z.type].ka)?"Default Monster Achievement: "+
p.info[z.type].ka.addCommas():"":"Achievement Mode Disabled";O+=$u.hasContent(P)&&$u.isNumber(P)?" - User Set Max Damage: "+P.addCommas():"";break;case "time":if($u.hasContent(g)&&g.length===3){g=g[0]+":"+(g[1]<10?"0"+g[1]:g[1]);O=$u.hasContent(p.info[z.type])&&$u.isNumber(p.info[z.type].duration)?"Total Monster Duration: "+p.info[z.type].duration+" hours":""}else g="";break;case "t2k":g=$u.minutes2hours(g);O="Estimated Time To Kill: "+g+" hours:mins";break;case "life":O="Percentage of monster life remaining: "+
g+"%";break;case "phase":g=g+"/"+p.info[z.type].ga+" need "+z.miss;O="Siege Phase: "+g+" more clicks";break;case "fortify":O="Percentage of party health/monster defense: "+g+"%";break;case "strength":O="Percentage of party strength: "+g+"%"}c+=a.q({text:g,color:d,id:y,title:O})}else c+=a.q({text:"",color:d,id:"",title:""})}});if(T&&T!=="none"){Y={text:'<span title="User Set Conditions: '+T+'" class="ui-icon ui-icon-info">i</span>',color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:"",color:d,
id:"",title:""});if(s){G=s.replace("casuser","remove_list").replace("&action=doObjective","").match(ba);A="Clicking this link will remove "+z.name+" from both CA and CAAP!";Y={text:'<span id="caap_remove_'+r+'" title="'+A+'" mname="'+z.name+'" rlink="'+G[1]+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';" class="ui-icon ui-icon-circle-close">X</span>',color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:"",color:d,id:"",title:""});c+="</tr>";r+=1});c+=
"</table>";i("#caap_infoMonster",a.K).html(c);W=function(z){var N={wb:"",Aa:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="mname")N.wb=z.target.attributes[C].nodeValue;else if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)};i("span[id*='caap_monster_']",a.K).unbind("click",W).click(W);W=function(z){var N={wb:"",Aa:"",pa:""},C=0,X=0;C=M;C=0;for(X=z.target.attributes.length;C<
X;C+=1)if(z.target.attributes[C].nodeName==="mname")N.wb=z.target.attributes[C].nodeValue;else if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}C=confirm("Are you sure you want to remove "+N.wb+"?");if(C===f){p.deleteItem(N.wb);a.na(f);a.Tf(N.pa)}};i("span[id*='caap_remove_']",a.K).unbind("click",W).click(W);j.setItem("MonsterDashUpdate",M)}if(n.getItem("DBDisplay","")==="Guild Monster"&&j.getItem("GuildMonsterDashUpdate",
f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["Slot","Name","Damage","Damage%","My Status","TimeLeft","Status","Link","&nbsp;"];h=["slot","name","damage","enemyHealth","myStatus","ticker","state"];for(k=0;k<b.length;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=E.k.length;o<F;o+=1){c+="<tr>";k=0;for(Z=h.length;k<Z;k+=1)switch(h[k]){case "name":Y={text:'<span id="caap_guildmonster_'+k+'" title="Clicking this link will take you to ('+E.k[o].slot+
") "+E.k[o].name+'" mname="'+E.k[o].slot+'" rlink="guild_battle_monster.php?twt2='+E.info[E.k[o].name].Jb+"&guild_id="+E.k[o].guildId+"&slot="+E.k[o].slot+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+E.k[o].name+"</span>",color:E.k[o].color,id:"",title:""};c+=a.q(Y);break;case "ticker":c+=a.q({text:$u.hasContent(E.k[o][h[k]])?E.k[o][h[k]].regex(/(\d+:\d+):\d+/):"",color:E.k[o].color,id:"",title:""});break;default:c+=a.q({text:$u.hasContent(E.k[o][h[k]])?
E.k[o][h[k]]:"",color:E.k[o].color,id:"",title:""})}Y={text:'<a href="'+a.domain.link+"/guild_battle_monster.php?twt2="+E.info[E.k[o].name].Jb+"&guild_id="+E.k[o].guildId+"&action=doObjective&slot="+E.k[o].slot+'&ref=nf">Link</a>',color:"blue",id:"",title:"This is a siege link."};c+=a.q(Y);if($u.hasContent(E.k[o].conditions)&&E.k[o].conditions!=="none"){Y={text:'<span title="User Set Conditions: '+E.k[o].conditions+'" class="ui-icon ui-icon-info">i</span>',color:E.k[o].color,id:"",title:""};c+=a.q(Y)}else c+=
a.q({text:"",color:d,id:"",title:""});c+="</tr>"}c+="</table>";i("#caap_guildMonster",a.K).html(c);W=function(z){var N={wb:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="mname")N.wb=z.target.attributes[C].nodeValue;else if(z.target.attributes[C].nodeName==="rlink")N.pa=z.target.attributes[C].nodeValue;a.Ka(N.pa)};i("span[id*='caap_guildmonster_']",a.K).unbind("click",W).click(W);j.setItem("GuildMonsterDashUpdate",M)}if(n.getItem("DBDisplay","")===
"Arena"&&j.getItem("ArenaDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["Arena","Damage","Team%","Enemy%","My Status","TimeLeft","Status"];h=["damage","teamHealth","enemyHealth","myStatus","ticker","state"];for(k=0;k<b.length;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=V.k.length;o<F;o+=1){c+="<tr>";Y={text:'<span id="caap_arena_1" title="Clicking this link will take you to the Arena" rlink="arena.php" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">Arena</span>',
color:"blue",id:"",title:""};c+=a.q(Y);d=V.k[o].state==="Alive"?"green":$u.bestTextColor(n.getItem("StyleBackgroundLight","#E0C961"));d=V.k[o].state==="Alive"&&V.k[o].enemyHealth===V.k[o].teamHealth?"purple":d;d=V.k[o].enemyHealth>V.k[o].teamHealth?"red":d;for(k=0;k<h.length;k+=1)c+=h[k]==="ticker"?a.q({text:$u.hasContent(V.k[o][h[k]])?V.k[o][h[k]].regex(/(\d+:\d+):\d+/):"",color:d,id:"",title:""}):a.q({text:$u.hasContent(V.k[o][h[k]])&&($u.isString(V.k[o][h[k]])||V.k[o][h[k]]>0)?V.k[o][h[k]]:"",
color:d,id:"",title:""});c+="</tr>"}c+="</table>";i("#caap_arena",a.K).html(c);W=function(z){var N={wb:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="mname")N.wb=z.target.attributes[C].nodeValue;else if(z.target.attributes[C].nodeName==="rlink")N.pa=z.target.attributes[C].nodeValue;a.Ka(N.pa)};i("span[id='caap_arena_1']",a.K).unbind("click",W).click(W);j.setItem("ArenaDashUpdate",M)}if(n.getItem("DBDisplay","")==="Army"&&j.getItem("ArmyDashUpdate",
f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["UserId","User","Name","Level","Change","Elite","Delete"];h=["userId","user","name","lvl","change"];for(k=0;k<b.length;k+=1){R={text:'<span id="caap_army_'+h[k]+'" title="Click to sort" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+b[k]+"</span>",color:"blue",vb:"",id:"",title:"",width:""};switch(b[k]){case "UserId":R.width="18%";break;case "User":R.width="25%";break;case "Name":R.width=
"30%";break;case "Level":R.width="7%";break;case "Change":R.width="10%";break;default:R.text=b[k];R.width="5%";R.color=""}c+=a.mb(R)}c+="</tr>";o=0;for(F=D.ha.length;o<F;o+=1){c+="<tr>";d=u.ya(D.ha[o].change,n.getItem("ArmyAgeDays4",28)*86400)?n.getItem("ArmyAgeDaysColor4","red"):u.ya(D.ha[o].change,n.getItem("ArmyAgeDays3",21)*86400)?n.getItem("ArmyAgeDaysColor3","darkorange"):u.ya(D.ha[o].change,n.getItem("ArmyAgeDays2",14)*86400)?n.getItem("ArmyAgeDaysColor2","gold"):u.ya(D.ha[o].change,n.getItem("ArmyAgeDays1",
7)*86400)?n.getItem("ArmyAgeDaysColor1","greenyellow"):n.getItem("ArmyAgeDaysColor0","green");k=0;for(Z=h.length;k<Z;k+=1)if(h[k]==="change")c+=a.q({text:$u.hasContent(D.ha[o][h[k]])&&($u.isString(D.ha[o][h[k]])||D.ha[o][h[k]]>0)?$u.makeTime(D.ha[o][h[k]],"d-m-Y"):"",vb:d,color:$u.bestTextColor(d),id:"",title:""});else if(h[k]==="userId"){K=$u.setContent(D.ha[o][h[k]],"");L="Clicking this link will take you to the user keep of "+K;w=a.domain.link+"/keep.php?casuser="+K;Y={text:'<span id="caap_targetarmy_'+
o+'" title="'+L+'" rlink="'+w+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+K+"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:$u.hasContent(D.ha[o][h[k]])&&($u.isString(D.ha[o][h[k]])||D.ha[o][h[k]]>0)?D.ha[o][h[k]]:"",color:"",id:"",title:""});Y={text:'<input id="caap_elitearmy_'+o+'" type="checkbox" title="Use to fill elite guard" userid="'+D.ha[o].userId+'" cstate="'+(D.ha[o].elite?"true":"false")+'" '+(D.ha[o].elite?" checked":
"")+" />",color:"blue",id:"",title:""};c+=a.q(Y);A="Clicking this link will remove "+D.ha[o].user.escapeHTML()+" from your army!";Y={text:'<span id="caap_removearmy_'+o+'" title="'+A+'" userid="'+D.ha[o].userId+'" mname="'+D.ha[o].user.escapeHTML()+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';" class="ui-icon ui-icon-circle-close">X</span>',color:"blue",id:"",title:""};c+=a.q(Y);c+="</tr>"}c+="</table>";i("#caap_army",a.K).html(c);W=function(z){var N={Aa:"",
pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)};i("span[id*='caap_targetarmy_']",a.K).unbind("click",W).click(W);W=function(z){var N=0,C=M,X=0,la=0;X={};X=0;for(la=z.target.attributes.length;X<la;X+=1)if(z.target.attributes[X].nodeName==="userid")N=z.target.attributes[X].nodeValue.parseInt();else if(z.target.attributes[X].nodeName==="cstate")C=z.target.attributes[X].nodeValue===
"true"?f:M;if($u.hasContent(N)&&N>0){X=i(N,D);X.elite=!C;D.setItem(X);$u.log(4,"check",N,X,z.target.attributes);j.setItem("ArmyDashUpdate",f);a.na(f)}};i("input[id*='caap_elitearmy_']",a.K).unbind("change",W).change(W);W=function(z){var N="",C="",X=0,la=0;X=M;X=0;for(la=z.target.attributes.length;X<la;X+=1)if(z.target.attributes[X].nodeName==="userid")C=z.target.attributes[X].nodeValue.parseInt();else if(z.target.attributes[X].nodeName==="mname")N=z.target.attributes[X].nodeValue;X=confirm("Are you sure you want to remove "+
N+" from your army?");if(X===f){a.Ka("army_member.php?action=delete&player_id="+C);D.deleteItem(C);j.setItem("ArmyDashUpdate",f);a.na(f)}};i("span[id*='caap_removearmy_']",a.K).unbind("click",W).click(W);W=function(z){var N="",C=new ca.order,X=j.getItem("ArmySort",C.data);N=$u.hasContent(z.target.id)?z.target.id.replace("caap_army_",""):ea;if($u.hasContent(N)){C.data.value.a=N;C.data.reverse.a=X.value.a===N?!X.reverse.a:N!=="user"&&N!=="name "?f:M;C.data.value.b=N!=="user"?"user":"";D.ha.sort($u.sortBy(C.data.reverse.a,
C.data.value.a,$u.sortBy(C.data.reverse.b,C.data.value.b)));j.setItem("ArmySort",C.data);j.setItem("ArmyDashUpdate",f);a.na(f);ca.Vb("Army")}};i("span[id*='caap_army_']",a.K).unbind("click",W).click(W);j.setItem("ArmyDashUpdate",M)}if(n.getItem("DBDisplay","")==="Target List"&&j.getItem("ReconDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["UserId","Name","Deity#","Rank","Rank#","Level","Army","Last Alive"];h=["userID","nameStr","deityNum","rankStr","rankNum","levelNum",
"armyNum","aliveTime"];for(k=0;k<b.length;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=a.ma.length;o<F;o+=1){c+="<tr>";for(k=0;k<h.length;k+=1)if(/userID/.test(h[k])){L="Clicking this link will take you to the user keep of "+a.ma[o][h[k]];w=a.domain.link+"/keep.php?casuser="+a.ma[o][h[k]];Y={text:'<span id="caap_targetrecon_'+o+'" title="'+L+'" rlink="'+w+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+a.ma[o][h[k]]+
"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else if(/\S+Num/.test(h[k]))c+=a.q({text:a.ma[o][h[k]],color:"",id:"",title:""});else if(/\S+Time/.test(h[k])){Y={text:$u.makeTime(a.ma[o][h[k]],"d M H:i"),color:"",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:a.ma[o][h[k]],color:"",id:"",title:""});c+="</tr>"}c+="</table>";i("#caap_infoTargets1",a.K).html(c);W=function(z){var N={Aa:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;
N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)};i("span[id*='caap_targetrecon_']",a.K).unbind("click",W).click(W);j.setItem("ReconDashUpdate",M)}if(n.getItem("DBDisplay","")==="Battle Stats"&&j.getItem("BattleDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["UserId","Name","BR#","WR#","Level","Army","I Win","I Lose","D Win","D Lose","W Win","W Lose"];h=["userId","nameStr","rankNum","warRankNum","levelNum","armyNum","invadewinsNum","invadelossesNum","duelwinsNum",
"duellossesNum","warwinsNum","warlossesNum"];for(k=0;k<b.length;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=I.k.length;o<F;o+=1){c+="<tr>";k=0;for(Z=h.length;k<Z;k+=1)if(/userId/.test(h[k])){L="Clicking this link will take you to the user keep of "+I.k[o][h[k]];w=a.domain.link+"/keep.php?casuser="+I.k[o][h[k]];Y={text:'<span id="caap_battle_'+o+'" title="'+L+'" rlink="'+w+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+
I.k[o][h[k]]+"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else c+=/rankNum/.test(h[k])?a.q({text:I.k[o][h[k]],color:"",id:"",title:I.k[o].rankStr}):/warRankNum/.test(h[k])?a.q({text:I.k[o][h[k]],color:"",id:"",title:I.k[o].warRankStr}):a.q({text:I.k[o][h[k]],color:"",id:"",title:""});c+="</tr>"}c+="</table>";i("#caap_infoBattle",a.K).html(c);i("span[id*='caap_battle_']",a.K).click(function(z){var N={Aa:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName===
"rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)});j.setItem("BattleDashUpdate",M)}if(n.getItem("DBDisplay","")==="User Stats"&&j.getItem("UserDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["Name","Value","Name","Value"];k=0;for(F=b.length;k<F;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Facebook ID",color:"",id:"",title:""});c+=a.q({text:a.p.FBID,color:"red",id:"",
title:""});c+=a.q({text:"Account Name",color:"",id:"",title:""});c+=a.q({text:a.p.account,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Character Name",color:"",id:"",title:""});c+=a.q({text:a.p.PlayerName,color:"red",id:"",title:""});c+=a.q({text:"Energy",color:"",
id:"",title:"Current/Max"});c+=a.q({text:a.p.energy.num+"/"+a.p.energy.max,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Level",color:"",id:"",title:""});c+=a.q({text:a.p.level,color:"red",id:"",title:""});c+=a.q({text:"Stamina",color:"",id:"",title:"Current/Max"});c+=a.q({text:a.p.stamina.num+"/"+a.p.stamina.max,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Battle Rank",color:"",id:"",title:""});c+=a.q({text:I.de[a.p.rank.battle]+" ("+a.p.rank.battle+")",color:"red",
id:"",title:""});c+=a.q({text:"Attack",color:"",id:"",title:"Current/Max"});c+=a.q({text:a.p.attack.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Battle Rank Points",color:"",id:"",title:""});c+=a.q({text:a.p.rank.battlePoints.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Defense",color:"",id:"",title:""});c+=a.q({text:a.p.defense.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"War Rank",color:"",id:"",title:""});c+=a.q({text:I.li[a.p.rank.war]+
" ("+a.p.rank.war+")",color:"red",id:"",title:""});c+=a.q({text:"Health",color:"",id:"",title:"Current/Max"});c+=a.q({text:a.p.health.num+"/"+a.p.health.max,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"War Rank Points",color:"",id:"",title:""});c+=a.q({text:a.p.rank.warPoints.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Army",color:"",id:"",title:""});c+=a.q({text:a.p.army.actual.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",
id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"Generals",color:"",id:"",title:""});c+=a.q({text:a.p.generals.total,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"Generals When Invade",color:"",id:"",title:"For every 5 army members you have, one of your generals will also join the fight."});c+=a.q({text:a.p.generals.invade,color:"red",id:"",title:""});
c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Gold In Bank",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.bank.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Total Income Per Hour",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.income.addCommas(),color:"red",id:"",title:""});
c+="</tr>";c+="<tr>";c+=a.q({text:"Gold In Cash",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.cash.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Upkeep",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.upkeep.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Total Gold",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.total.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Cash Flow Per Hour",color:"",id:"",title:""});c+=a.q({text:"$"+a.p.gold.flow.addCommas(),
color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Skill Points",color:"",id:"",title:""});c+=a.q({text:a.p.points.skill,color:"red",id:"",title:""});c+=a.q({text:"Energy Potions",color:"",id:"",title:""});c+=a.q({text:a.p.potions.energy,color:"red",id:"",title:""});c+=
"</tr>";c+="<tr>";c+=a.q({text:"Favor Points",color:"",id:"",title:""});c+=a.q({text:a.p.points.favor,color:"red",id:"",title:""});c+=a.q({text:"Stamina Potions",color:"",id:"",title:""});c+=a.q({text:a.p.potions.stamina,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Experience To Next Level (ETNL)",
color:"",id:"",title:""});c+=a.q({text:a.p.exp.dif.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Battle Strength Index (BSI)",color:"",id:"",title:""});c+=a.q({text:a.p.indicators.bsi,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Hours To Level (HTL)",color:"",id:"",title:""});c+=a.q({text:$u.minutes2hours(a.p.indicators.htl),color:"red",id:"",title:""});c+=a.q({text:"Levelling Speed Index (LSI)",color:"",id:"",title:""});c+=a.q({text:a.p.indicators.lsi,color:"red",id:"",
title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Hours Remaining To Level (HRTL)",color:"",id:"",title:""});c+=a.q({text:$u.minutes2hours(a.p.indicators.hrtl),color:"red",id:"",title:""});c+=a.q({text:"Skill Points Per Level (SPPL)",color:"",id:"",title:""});c+=a.q({text:a.p.indicators.sppl,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Expected Next Level (ENL)",color:"",id:"",title:""});c+=a.q({text:$u.makeTime(a.p.indicators.enl,u.gc()),color:"red",id:"",title:""});c+=a.q({text:"Attack Power Index (API)",
color:"",id:"",title:""});c+=a.q({text:a.p.indicators.api,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"Defense Power Index (DPI)",color:"",id:"",title:""});c+=a.q({text:a.p.indicators.dpi,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"Mean Power Index (MPI)",color:"",
id:"",title:""});c+=a.q({text:a.p.indicators.mpi,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Battles/Wars Won",color:"",id:"",title:""});c+=a.q({text:a.p.other.bww.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Times eliminated",color:"",id:"",title:""});
c+=a.q({text:a.p.other.te.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Battles/Wars Lost",color:"",id:"",title:""});c+=a.q({text:a.p.other.bwl.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Times you eliminated an enemy",color:"",id:"",title:""});c+=a.q({text:a.p.other.tee.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Battles/Wars Win/Loss Ratio (WLR)",color:"",id:"",title:""});c+=a.q({text:a.p.other.wlr,color:"red",id:"",title:""});
c+=a.q({text:"Enemy Eliminated/Eliminated Ratio (EER)",color:"",id:"",title:""});c+=a.q({text:a.p.other.eer,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Invasions Won",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.invasions.won.addCommas(),color:"red",
id:"",title:""});c+=a.q({text:"Duels Won",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.duels.won.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Invasions Lost",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.invasions.lost.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Duels Lost",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.duels.lost.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Invasions Streak",
color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.invasions.streak.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Duels Streak",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.duels.streak.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Invasions Win/loss Ratio (IWLR)",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.battle.invasions.ratio,color:"red",id:"",title:""});c+=a.q({text:"Duels Win/loss Ratio (DWLR)",color:"",id:"",title:""});
c+=a.q({text:a.p.achievements.battle.duels.ratio,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Quests Completed",color:"",id:"",title:""});c+=a.q({text:a.p.other.qc.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Alchemy Performed",color:"",id:"",title:""});
c+=a.q({text:a.p.achievements.other.alchemy.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Gildamesh, The Orc King Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.gildamesh.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Lotus Ravenmoore Slain",
color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.lotus.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"The Colossus of Terra Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.colossus.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Dragons Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.dragons.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Sylvanas the Sorceress Queen Slain",
color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.sylvanas.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Cronus, The World Hydra Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.cronus.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Keira the Dread Knight Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.keira.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"The Battle of the Dark Legion Slain",color:"",
id:"",title:""});c+=a.q({text:a.p.achievements.monster.legion.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Genesis, The Earth Elemental Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.genesis.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Skaar Deathrune Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.skaar.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Gehenna, The Fire Elemental Slain",
color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.gehenna.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Sieges Assisted With",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.sieges.addCommas(),color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Aurelius, Lion's Rebellion",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.aurelius.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"Corvintheus Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.corvintheus.addCommas(),
color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Valhalla, The Air Elemental Slain",color:"",id:"",title:""});c+=a.q({text:a.p.achievements.monster.valhalla.addCommas(),color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",
color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Ambrosia Daily Points",color:"",id:"",title:""});c+=a.q({text:a.fa.ambrosia.daily.num+"/"+a.fa.ambrosia.daily.max,color:"red",id:"",title:""});c+=a.q({text:"Malekus Daily Points",color:"",id:"",title:""});c+=a.q({text:a.fa.malekus.daily.num+"/"+a.fa.malekus.daily.max,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Ambrosia Total Points",color:"",id:"",title:""});c+=a.q({text:a.fa.ambrosia.power.total,color:"red",id:"",
title:""});c+=a.q({text:"Malekus Total Points",color:"",id:"",title:""});c+=a.q({text:a.fa.malekus.power.total,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Corvintheus Daily Points",color:"",id:"",title:""});c+=a.q({text:a.fa.corvintheus.daily.num+"/"+a.fa.corvintheus.daily.max,
color:"red",id:"",title:""});c+=a.q({text:"Aurora Daily Points",color:"",id:"",title:""});c+=a.q({text:a.fa.aurora.daily.num+"/"+a.fa.aurora.daily.max,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Corvintheus Total Points",color:"",id:"",title:""});c+=a.q({text:a.fa.corvintheus.power.total,color:"red",id:"",title:""});c+=a.q({text:"Aurora Total Points",color:"",id:"",title:""});c+=a.q({text:a.fa.aurora.power.total,color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",
color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Azeron Daily Points",color:"",id:"",title:""});c+=a.q({text:a.fa.azeron.daily.num+"/"+a.fa.azeron.daily.max,color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"Azeron Total Points",
color:"",id:"",title:""});c+=a.q({text:a.fa.azeron.power.total,color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";c+="<tr>";c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+=a.q({text:"&nbsp;",color:"",id:"",title:""});c+=a.q({text:"&nbsp;",color:"red",id:"",title:""});c+="</tr>";r=0;for(k in a.p.character)if(a.p.character.hasOwnProperty(k)){c+=r%2===0?"<tr>":
"";c+=a.q({text:[k],color:"",id:"",title:""});c+=a.q({text:"Level "+a.p.character[k].level+" ("+a.p.character[k].percent+"%)",color:"red",id:"",title:""});c+=r%2===1?"</tr>":"";r+=1}c+="</table>";i("#caap_userStats",a.K).html(c);j.setItem("UserDashUpdate",M)}if(n.getItem("DBDisplay","")==="Generals Stats"&&j.getItem("GeneralsDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["General","Lvl","Atk","Def","API","DPI","MPI","EAtk","EDef","EAPI","EDPI","EMPI","Special"];
h=["name","lvl","atk","def","api","dpi","mpi","eatk","edef","eapi","edpi","empi","special"];i.merge(l,h);k=0;for(F=b.length;k<F;k+=1){R={text:'<span id="caap_generalsStats_'+h[k]+'" title="Click to sort" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+b[k]+"</span>",color:"blue",id:"",title:"",width:""};R=b[k]==="Special"?{text:b[k],color:"",id:"",title:"",width:"25%"}:R;c+=a.mb(R)}c+="</tr>";U=0;for(F=x.ha.length;U<F;U+=1){c+="<tr>";k=0;for(Z=h.length;k<
F;k+=1)c+=a.q({text:$u.setContent(x.ha[U][h[k]],""),color:k===0?"":"red",id:"",title:""});c+="</tr>"}c+="</table>";i("#caap_generalsStats",a.K).html(c);W=function(z){var N="",C=new ca.order;if(z.target.id)N=z.target.id.replace(ga,"");if(l.hasIndexOf(N)){C.data.value.a=N;if(N!=="name"){C.data.reverse.a=f;C.data.value.b="name"}x.ha.sort($u.sortBy(C.data.reverse.a,C.data.value.a,$u.sortBy(C.data.reverse.b,C.data.value.b)));j.setItem("GeneralsSort",C.data);j.setItem("GeneralsDashUpdate",f);ca.Vb("Generals");
a.na(f)}};i("span[id*='caap_generalsStats_']",a.K).unbind("click",W).click(W);j.setItem("GeneralsDashUpdate",M)}if(n.getItem("DBDisplay","")==="Soldiers Stats"&&j.getItem("SoldiersDashUpdate",f)||n.getItem("DBDisplay","")==="Item Stats"&&j.getItem("ItemDashUpdate",f)||n.getItem("DBDisplay","")==="Magic Stats"&&j.getItem("MagicDashUpdate",f)){b=["Name","Type","Owned","Atk","Def","API","DPI","MPI","Cost","Upkeep","Hourly"];h=["name","type","owned","atk","def","api","dpi","mpi","cost","upkeep","hourly"];
i.merge(m,h);o=0;for(F=Q.types.length;o<F;o+=1)if(n.getItem("DBDisplay","")===Q.types[o].ucFirst()+" Stats"){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";k=0;for(Z=b.length;k<Z;k+=1)if(!(Q.types[o]!=="item"&&b[k]==="Type")){R={text:'<span id="caap_'+Q.types[o]+"Stats_"+h[k]+'" title="Click to sort" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+b[k]+"</span>",color:"blue",id:"",title:"",width:""};c+=a.mb(R)}c+="</tr>";U=0;for(Z=Q[Q.types[o]+
"Sortable"].length;U<Z;U+=1){c+="<tr>";k=0;for(fa=h.length;k<fa;k+=1)if(!(Q.types[o]!=="item"&&h[k]==="type")){if($u.isNaN(Q[Q.types[o]+"Sortable"][U][h[k]])||!$u.hasContent(Q[Q.types[o]+"Sortable"][U][h[k]]))K=$u.setContent(Q[Q.types[o]+"Sortable"][U][h[k]],"");else{K=Q[Q.types[o]+"Sortable"][U][h[k]].addCommas();K=$u.hasContent(K)&&(h[k]==="cost"||h[k]==="upkeep"||h[k]==="hourly")?"$"+K:K}c+=a.q({text:K,color:k===0?"":"red",id:"",title:""})}c+="</tr>"}c+="</table>";i("#caap_"+Q.types[o]+"Stats",
a.K).html(c);j.setItem(Q.types[o]+"DashUpdate",M)}W=function(z){var N="",C=new ca.order;if(z.target.id)N=z.target.id.replace(ga,"");if(m.hasIndexOf(N)){C.data.value.a=N;if(N!=="name"){C.data.reverse.a=f;C.data.value.b="name"}Q.soldiersSortable.sort($u.sortBy(C.data.reverse.a,C.data.value.a,$u.sortBy(C.data.reverse.b,C.data.value.b)));j.setItem("SoldiersSort",C.data);j.setItem("SoldiersDashUpdate",f);a.na(f);ca.Vb("Soldiers")}};i("span[id*='caap_soldiersStats_']",a.K).unbind("click",W).click(W);W=
function(z){var N="",C=new ca.order;if(z.target.id)N=z.target.id.replace(ga,"");if(m.hasIndexOf(N)){C.data.value.a=N;if(N!=="name"){C.data.reverse.a=f;C.data.value.b="name"}Q.itemSortable.sort($u.sortBy(C.data.reverse.a,C.data.value.a,$u.sortBy(C.data.reverse.b,C.data.value.b)));j.setItem("ItemSort",C.data);j.setItem("ItemDashUpdate",f);a.na(f);ca.Vb("Item")}};i("span[id*='caap_itemStats_']",a.K).unbind("click",W).click(W);W=function(z){var N="",C=new ca.order;if(z.target.id)N=z.target.id.replace(ga,
"");if(m.hasIndexOf(N)){C.data.value.a=N;if(N!=="name"){C.data.reverse.a=f;C.data.value.b="name"}Q.magicSortable.sort($u.sortBy(C.data.reverse.a,C.data.value.a,$u.sortBy(C.data.reverse.b,C.data.value.b)));j.setItem("MagicSort",C.data);j.setItem("MagicDashUpdate",f);a.na(f);ca.Vb("Magic")}};i("span[id*='caap_magicStats_']",a.K).unbind("click",W).click(W)}if(n.getItem("DBDisplay","")==="Gifting Stats"&&j.getItem("GiftHistoryDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";
b=["UserId","Name","Received","Sent"];h=["userId","name","received","sent"];k=0;for(F=b.length;k<F;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=q.history.k.length;o<F;o+=1){c+="<tr>";k=0;for(Z=h.length;k<Z;k+=1){K=$u.setContent(q.history.k[o][h[k]],"");if(/userId/.test(h[k])){L="Clicking this link will take you to the user keep of "+K;w=a.domain.link+"/keep.php?casuser="+K;Y={text:'<span id="caap_targetgift_'+o+'" title="'+L+'" rlink="'+w+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+
K+"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:K,color:"",id:"",title:""})}c+="</tr>"}c+="</table>";i("#caap_giftStats",a.K).html(c);W=function(z){var N={Aa:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)};i("span[id*='caap_targetgift_']",a.K).unbind("click",W).click(W);j.setItem("GiftHistoryDashUpdate",M)}if(n.getItem("DBDisplay",
"")==="Gift Queue"&&j.getItem("GiftQueueDashUpdate",f)){c="<table width='100%' cellpadding='0px' cellspacing='0px'><tr>";b=["UserId","Name","Gift","FB Cleared","Delete"];h=["userId","name","gift","found"];k=0;for(F=b.length;k<F;k+=1)c+=a.mb({text:b[k],color:"",id:"",title:"",width:""});c+="</tr>";o=0;for(F=q.queue.k.length;o<F;o+=1){c+="<tr>";k=0;for(Z=h.length;k<Z;k+=1){K=$u.setContent(q.queue.k[o][h[k]],"");if(/userId/.test(h[k])){L="Clicking this link will take you to the user keep of "+K;w=a.domain.link+
"/keep.php?casuser="+K;Y={text:'<span id="caap_targetgiftq_'+o+'" title="'+L+'" rlink="'+w+'" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';">'+K+"</span>",color:"blue",id:"",title:""};c+=a.q(Y)}else c+=a.q({text:K,color:"",id:"",title:""})}A="Clicking this link will remove "+q.queue.k[o].name+"'s entry from the gift queue!";Y={text:'<span id="caap_removeq_'+o+'" title="'+A+'" mname="" onmouseover="this.style.cursor=\'pointer\';" onmouseout="this.style.cursor=\'default\';" class="ui-icon ui-icon-circle-close">X</span>',
color:"blue",id:"",title:""};c+=a.q(Y);c+="</tr>"}c+="</table>";i("#caap_giftQueue",a.K).html(c);W=function(z){var N={Aa:"",pa:""},C=0,X=0;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName==="rlink"){N.Aa=z.target.attributes[C].nodeValue;N.pa=N.Aa.replace(a.domain.link+"/","")}a.Ka(N.pa)};i("span[id*='caap_targetgiftq_']",a.K).unbind("click",W).click(W);W=function(z){var N=-1,C=0,X=0;C=M;C=0;for(X=z.target.attributes.length;C<X;C+=1)if(z.target.attributes[C].nodeName===
"id")N=z.target.attributes[C].nodeValue.replace("caap_removeq_","").parseInt();C=confirm("Are you sure you want to remove this queue entry?");if(C===f){q.queue.gh(N);a.na(f)}};i("span[id*='caap_removeq_']",a.K).unbind("click",W).click(W);j.setItem("GiftQueueDashUpdate",M)}return f}catch(aa){$u.error("ERROR in UpdateDashboard: "+aa);return M}},ah:function(b){b=b.target.options[b.target.selectedIndex].value;n.setItem("DBDisplay",b);a.J("caapTopObject","infoMonster",M);a.J("caapTopObject","guildMonster",
M);a.J("caapTopObject","arena",M);a.J("caapTopObject","army",M);a.J("caapTopObject","infoTargets1",M);a.J("caapTopObject","infoBattle",M);a.J("caapTopObject","userStats",M);a.J("caapTopObject","generalsStats",M);a.J("caapTopObject","soldiersStats",M);a.J("caapTopObject","itemStats",M);a.J("caapTopObject","magicStats",M);a.J("caapTopObject","giftStats",M);a.J("caapTopObject","giftQueue",M);a.J("caapTopObject","buttonMonster",M);a.J("caapTopObject","buttonGuildMonster",M);a.J("caapTopObject","buttonTargets",
M);a.J("caapTopObject","buttonBattle",M);a.J("caapTopObject","buttonGifting",M);a.J("caapTopObject","buttonGiftQueue",M);a.J("caapTopObject","buttonSortGenerals",M);a.J("caapTopObject","buttonSortSoldiers",M);a.J("caapTopObject","buttonSortItem",M);a.J("caapTopObject","buttonSortMagic",M);a.J("caapTopObject","buttonArmy",M);switch(b){case "Target List":a.J("caapTopObject","infoTargets1",f);a.J("caapTopObject","buttonTargets",f);break;case "Battle Stats":a.J("caapTopObject","infoBattle",f);a.J("caapTopObject",
"buttonBattle",f);break;case "User Stats":a.J("caapTopObject","userStats",f);break;case "Generals Stats":a.J("caapTopObject","generalsStats",f);a.J("caapTopObject","buttonSortGenerals",f);break;case "Soldiers Stats":a.J("caapTopObject","soldiersStats",f);a.J("caapTopObject","buttonSortSoldiers",f);break;case "Item Stats":a.J("caapTopObject","itemStats",f);a.J("caapTopObject","buttonSortItem",f);break;case "Magic Stats":a.J("caapTopObject","magicStats",f);a.J("caapTopObject","buttonSortMagic",f);break;
case "Gifting Stats":a.J("caapTopObject","giftStats",f);a.J("caapTopObject","buttonGifting",f);break;case "Gift Queue":a.J("caapTopObject","giftQueue",f);a.J("caapTopObject","buttonGiftQueue",f);break;case "Guild Monster":a.J("caapTopObject","guildMonster",f);a.J("caapTopObject","buttonGuildMonster",f);break;case "Monster":a.J("caapTopObject","infoMonster",f);a.J("caapTopObject","buttonMonster",f);break;case "Arena":a.J("caapTopObject","arena",f);break;case "Army":a.J("caapTopObject","army",f);a.J("caapTopObject",
"buttonArmy",f)}a.na(f)},we:function(){p.cd()},Th:function(){$u.log(1,"refreshGuildMonstersListener");j.setItem("ReleaseControl",f);E.clear();a.na(f);u.setItem("guildMonsterReview",0)},Dh:function(){a.Ka("army_news_feed.php")},$g:function(){a.Ka("specialmembership.php")},Xg:function(){a.ma=[];a.ae();a.na(f)},Sg:function(){I.clear();a.na(f)},Vg:function(){q.clear("history");a.na(f)},Ug:function(){q.clear("queue");a.na(f)},bi:function(){ca.form("Generals",["name","lvl","atk","def","api","dpi","mpi",
"eatk","edef","eapi","edpi","empi","special"],x.ha)},ei:function(){ca.form("Soldiers",["name","owned","atk","def","api","dpi","mpi","cost","upkeep","hourly"],Q.soldiersSortable)},ci:function(){ca.form("Item",["name","type","owned","atk","def","api","dpi","mpi","cost","upkeep","hourly"],Q.itemSortable)},di:function(){ca.form("Magic",["name","owned","atk","def","api","dpi","mpi","cost","upkeep","hourly"],Q.magicSortable)},kh:function(){u.deleteItem("army_member");D.ie()},Fe:function(){try{$u.log(4,
"Adding listeners for caap_top");$u.hasContent(i("#caap_DBDisplay",a.K))||a.Xb();i("#caap_DBDisplay",a.K).change(a.ah);i("#caap_refreshMonsters",a.K).click(a.we);i("#caap_refreshGuildMonsters",a.K).click(a.Th);i("#caap_liveFeed",a.K).click(a.Dh);i("#caap_crusaders",a.K).click(a.$g);i("#caap_clearTargets",a.K).click(a.Xg);i("#caap_clearBattle",a.K).click(a.Sg);i("#caap_clearGifting",a.K).click(a.Vg);i("#caap_clearGiftQueue",a.K).click(a.Ug);i("#caap_sortGenerals",a.K).click(a.bi);i("#caap_sortSoldiers",
a.K).click(a.ei);i("#caap_sortItem",a.K).click(a.ci);i("#caap_sortMagic",a.K).click(a.di);i("#caap_getArmy",a.K).click(a.kh);$u.log(4,"Listeners added for caap_top");return f}catch(b){$u.error("ERROR in AddDBListener: "+b);return M}},J:function(b,c,d,g){try{if(!$u.hasContent(c)||!$u.isString(c)&&!$u.isNumber(c)){$u.warn("idName",c);e("Bad idName!")}var h=a[b];if(!$u.hasContent(h)){h=i(document.body);$u.warn("Unknown area. Using document.body",b)}h=i("#caap_"+c,h).css("display",d===f?"block":"none");
!$u.hasContent(h)&&!g&&$u.warn("Unable to find idName in area!",c,b);return f}catch(l){$u.error("ERROR in SetDisplay: "+l);return M}},Cd:function(b){try{var c=b.target.id.qb(),d="",g="",h={};$u.log(1,"Change: setting '"+c+"' to ",b.target.checked);n.setItem(c,b.target.checked);a.J("caapDivObject",c+"_hide",b.target.checked,f);a.J("caapDivObject",c+"_not_hide",!b.target.checked,f);switch(c){case "AutoStatAdv":$u.log(9,"AutoStatAdv");j.setItem("statsMatch",f);break;case "HideAds":$u.log(9,"HideAds");
i(".UIStandardFrame_SidebarAds").css("display",b.target.checked?"none":"block");break;case "HideAdsIframe":$u.log(9,"HideAdsIframe");i("iframe[name*='fb_iframe']").eq(0).parent().css("display",b.target.checked?"none":"block");a.Ga.x=j.getItem("caap_top_menuLeft","");a.Ga.y=j.getItem("caap_top_menuTop",i(a.Ga.selector).offset().top-10);h=a.Wb();a.K.css({top:h.y+"px",left:h.x+"px"});break;case "HideFBChat":$u.log(9,"HideFBChat");i("div[class*='fbDockWrapper fbDockWrapperBottom fbDockWrapperRight']").css("display",
b.target.checked?"none":"block");break;case "BannerDisplay":$u.log(9,"BannerDisplay");a.J("caapDivObject",c,b.target.checked);break;case "IgnoreBattleLoss":$u.log(9,"IgnoreBattleLoss");b.target.checked&&$u.log(1,"Ignore Battle Losses has been enabled.");break;case "SetTitle":case "SetTitleAction":case "SetTitleName":$u.log(9,c);if(b.target.checked){if(n.getItem("SetTitleAction",M))if(g=i("#caap_activity_mess",a.X).html())d+=g.replace("Activity: ","")+" - ";if(n.getItem("SetTitleName",M))d+=a.p.PlayerName+
" - ";document.title=d+a.rc}else document.title=a.rc;break;case "unlockMenu":$u.log(9,"unlockMenu");if(b.target.checked){i(":input[id^='caap_']",a.X).attr({disabled:f});i(":input[id^='caap_']",a.K).attr({disabled:f});a.X.css("cursor","move").draggable({stop:function(){a.Dg()}});a.K.css("cursor","move").draggable({stop:function(){a.Eg()}})}else{a.X.css("cursor","").draggable("destroy");a.K.css("cursor","").draggable("destroy");i(":input[id^='caap_']",a.X).attr({disabled:M});i(":input[id^='caap_']",
a.K).attr({disabled:M})}break;case "AutoElite":$u.log(9,"AutoElite");u.setItem("AutoEliteGetList",0);u.setItem("AutoEliteReqNext",0);j.setItem("AutoEliteEnd","");j.setItem("MyEliteTodo",[]);if(!j.getItem("FillArmy",M)){j.setItem(a.za.Na.name+"Requested",M);j.setItem(a.za.Na.name+"Responded",[])}break;case "AchievementMode":$u.log(9,"AchievementMode");p.sc();break;case "StatSpendAll":$u.log(9,"StatSpendAll");j.setItem("statsMatch",f);j.setItem("autoStatRuleLog",f);break;case "enableTitles":case "goblinHinting":if(b.target.checked){S.clear();
S.load()}break;case "ignoreClerics":case "chooseIgnoredMinions":j.setItem("targetGuildMonster",{});j.setItem("staminaGuildMonster",0);u.setItem("guildMonsterReview",0)}return f}catch(l){$u.error("ERROR in CheckBoxListener: "+l);return M}},ob:{},Ab:function(){try{var b=j.getItem("caapPause","none")==="none"?j.getItem("StyleBackgroundLight",1):j.getItem("StyleBackgroundDark",1),c=j.getItem("caapPause","none")==="none"?j.getItem("StyleOpacityLight",1):j.getItem("StyleOpacityDark",1),d=$u.bestTextColor(b),
g=a.X.css("background-color"),h=a.X.css("color");if($u.hex2rgb(b).color!==g){$u.log(4,"Update background color",b,g);a.X.css({background:b,opacity:c,color:d});a.K.css({background:b,opacity:c,color:d});if($u.hex2rgb(d).color!==h){$u.log(4,"Update text color",d,h);i("th[data-type='bestcolor'],td[data-type='bestcolor']",a.K).css({color:d})}}return f}catch(l){$u.error("ERROR in colorUpdate: "+l);return M}},Vf:function(b){try{var c=b.target.id.qb(),d=i(b.target),g=function(k){j.setItem("StyleBackgroundLight",
k);a.Ab()},h=function(k){j.setItem("StyleBackgroundDark",k);a.Ab()},l=function(k,o){var r=k.qb(),s=$u.addSharp(o).toUpperCase(),v="";if(o!=="close"){$u.log(1,'Change: setting "'+r+'" to ',s);n.setItem(r,s)}else{v=n.getItem(r,s);switch(r){case "CustStyleBackgroundLight":j.setItem("StyleBackgroundLight",v);a.Ab();break;case "CustStyleBackgroundDark":j.setItem("StyleBackgroundDark",v);a.Ab()}a.ob[b.target.id][3].val(v);a.ob[b.target.id][3].css({background:b.target.value,color:$u.bestTextColor(b.target.value)})}delete a.ob[k]};
if(!$u.hasContent(a.ob[b.target.id])){switch(c){case "CustStyleBackgroundLight":a.ob[b.target.id]=d.Wc(g,l).concat(d);break;case "CustStyleBackgroundDark":a.ob[b.target.id]=d.Wc(h,l).concat(d);break;default:a.ob[b.target.id]=d.Wc(function(){},l).concat(d)}a.ob[b.target.id][1].css({background:b.target.value,color:$u.bestTextColor(b.target.value),padding:"5px",border:"2px solid #000000"})}return f}catch(m){$u.error("ERROR in ColorBoxClickListener: "+m);return M}},Uf:function(b){try{b.target.value=$u.addSharp(b.target.value).toUpperCase();
a.Md(b);return f}catch(c){$u.error("ERROR in ColorBoxChangeListener: "+c);return M}},Md:function(b){try{var c=b.target.id.qb(),d=$u.addSharp(b.target.value).toUpperCase(),g=new $u.ColorConv;b.target.style.backgroundColor=d;g.setRgb(b.target.style.backgroundColor);b.target.style.color=$u.bestTextColor(g.getHex());$u.log(1,'Change: setting "'+c+'" to ',d);n.setItem(c,d);$u.hasContent(a.ob[b.target.id])&&a.ob[b.target.id][2].setColor(d);switch(c){case "CustStyleBackgroundLight":j.setItem("StyleBackgroundLight",
d);a.Ab();break;case "CustStyleBackgroundDark":j.setItem("StyleBackgroundDark",d);a.Ab()}return f}catch(h){$u.error("ERROR in ColorBoxListener: "+h);return M}},Gg:function(b){try{var c=b.target.id.qb();$u.log(1,'Change: setting "'+c+'" to ',String(b.target.value));/AttrValue+/.test(c)&&j.setItem("statsMatch",f);n.setItem(c,String(b.target.value));return f}catch(d){$u.error("ERROR in TextBoxListener: "+d);return M}},xg:function(b){try{var c=b.target.id.qb(),d=ea,g="";if($u.isNaN(b.target.value)&&b.target.value!==
""){g="<div style='text-align: center;'>";g+="You entered:<br /><br />";g+="'"+b.target.value+"'<br /><br />";g+="Please enter a number or leave blank.";g+="</div>";i().alert(g);d=""}else d=$u.isNaN(b.target.value)&&b.target.value===""?"":b.target.value.parseFloat();$u.log(1,'Change: setting "'+c+'" to ',d);if(/AttrValue+/.test(c))j.setItem("statsMatch",f);else if(/MaxToFortify/.test(c))p.cd();else if(/Chain/.test(c))j.getItem("BattleChainId",0);else if(c==="DebugLevel")$u.set_log_level(b.target.value.parseInt());
else if(c==="IgnoreMinionsBelow"){j.setItem("targetGuildMonster",{});j.setItem("staminaGuildMonster",0);u.setItem("guildMonsterReview",0)}b.target.value=n.setItem(c,d);return f}catch(h){$u.error("ERROR in NumberBoxListener: "+h);return M}},Yf:function(b){try{if(b.target.selectedIndex>0){var c=b.target.id.qb(),d=b.target.options[b.target.selectedIndex].value,g=b.target.options[b.target.selectedIndex].title;$u.log(1,'Change: setting "'+c+'" to "'+d+'" with title "'+g+'"');n.setItem(c,d);b.target.title=
g;if(c.hasIndexOf("When")){a.J("caapDivObject",c+"_hide",d!=="Never");if(c.hasIndexOf("Quest"))a.J("caapDivObject",c+"XEnergy_hide",d==="At X Energy");else{c.hasIndexOf("Arena")||a.J("caapDivObject",c+"XStamina_hide",d==="At X Stamina");a.J("caapDivObject","WhenBattleStayHidden_hide",n.getItem("WhenBattle","Never")==="Stay Hidden"&&n.getItem("WhenMonster","Never")!=="Stay Hidden");a.J("caapDivObject","WhenMonsterStayHidden_hide",n.getItem("WhenMonster","Never")==="Stay Hidden"&&n.getItem("WhenBattle",
"Never")!=="Stay Hidden");a.J("caapDivObject","DemiPointsFirst_hide",n.getItem("WhenBattle","Never")==="Demi Points Only");switch(c){case "WhenBattle":d==="Never"?a.u("battle_mess","Battle off"):a.u("battle_mess","");break;case "WhenMonster":d==="Never"?a.u("monster_mess","Monster off"):a.u("monster_mess","");break;case "WhenGuildMonster":d==="Never"?a.u("guild_monster_mess","Guild Monster off"):a.u("guild_monster_mess","");break;case "WhenArena":d==="Never"?a.u("arena_mess","Arena off"):a.u("arena_mess",
"")}}}else if(c==="QuestArea"||c==="QuestSubArea"||c==="WhyQuest"){j.setItem("AutoQuest",a.ra());a.Ld();if(c==="QuestArea")switch(d){case "Quest":a.Va("QuestSubArea",a.hd);break;case "Demi Quests":a.Va("QuestSubArea",a.$c);break;case "Atlantis":a.Va("QuestSubArea",a.Vc)}}else if(c==="BattleType")j.getItem("BattleChainId",0);else if(c==="AutoBless")u.setItem("BlessingTimer",0);else if(c==="TargetType"){j.getItem("BattleChainId",0);a.J("caapDivObject","TargetTypeFreshmeat_hide",d==="Freshmeat");a.J("caapDivObject",
"TargetTypeUserId_hide",d==="Userid List");a.J("caapDivObject","TargetTypeRaid_hide",d==="Raid")}else if(c==="LevelUpGeneral")a.J("caapDivObject",c+"_hide",d!=="Use Current");else if(/Attribute?/.test(c))j.setItem("statsMatch",f);else if(c==="chainArena")a.J("caapDivObject",c+"_hide",d!=="0");else if(c==="DisplayStyle"){a.J("caapDivObject",c+"_hide",d==="Custom");switch(d){case "Original":j.setItem("StyleBackgroundLight","#EFEFFF");j.setItem("StyleBackgroundDark","#FEEFFF");j.setItem("StyleOpacityLight",
1);j.setItem("StyleOpacityDark",1);break;case "None":j.setItem("StyleBackgroundLight","#FFFFFF");j.setItem("StyleBackgroundDark","#FFFFFF");j.setItem("StyleOpacityLight",1);j.setItem("StyleOpacityDark",1);break;case "Custom":j.setItem("StyleBackgroundLight",n.getItem("CustStyleBackgroundLight","#E0C691"));j.setItem("StyleBackgroundDark",n.getItem("CustStyleBackgroundDark","#B09060"));j.setItem("StyleOpacityLight",n.getItem("CustStyleOpacityLight",1));j.setItem("StyleOpacityDark",n.getItem("CustStyleOpacityDark",
1));break;default:j.setItem("StyleBackgroundLight","#E0C691");j.setItem("StyleBackgroundDark","#B09060");j.setItem("StyleOpacityLight",1);j.setItem("StyleOpacityDark",1)}a.Ab()}}return f}catch(h){$u.error("ERROR in DropBoxListener: "+h);return M}},Fg:function(b){try{var c=b.target.id.qb(),d=b.target.value,g=function(){if(n.getItem("TextAreaCommas",M))b.target.value=d.replace(/(^[,\s]+)|([,\s]+$)/g,"").replace(/[,\s]+/g,",")};$u.log(1,'Change: setting "'+c+'" to ',b.target.value);n.setItem(c,b.target.value);
switch(c){case "orderGuildMinion":case "orderGuildMonster":j.setItem("targetGuildMonster",{});j.setItem("staminaGuildMonster",0);u.setItem("guildMonsterReview",0);break;case "orderbattle_monster":case "orderraid":p.cd();break;case "BattleTargets":j.setItem("BattleChainId",0);g();break;case "EliteArmyList":g()}return f}catch(h){$u.error("ERROR in TextAreaListener: "+h);return M}},Xd:function(){var b=j.getItem("StyleBackgroundDark","#B09060"),c=j.getItem("StyleOpacityDark",1),d=$u.bestTextColor(b),
g=$u.bestTextColor(j.getItem("StyleBackgroundLight","#E0C691"));a.X.css({background:b,color:d,opacity:c,"z-index":"3"});a.K.css({background:b,color:d,opacity:c});d!==g&&i("th[data-type='bestcolor'],td[data-type='bestcolor']",a.K).css({color:d});i("#caapPaused",a.X).css("display","block");j.setItem("caapPause","block")},Cg:function(){var b=j.getItem("StyleBackgroundLight","#E0C691"),c=j.getItem("StyleOpacityLight",1),d=$u.bestTextColor(b),g=$u.bestTextColor(j.getItem("StyleBackgroundDark","#B09060"));
i("#caapPaused",a.X).css("display","none");a.X.css({background:b,color:d,opacity:c,"z-index":j.getItem("caap_div_zIndex","2"),cursor:""});a.K.css({background:b,color:d,opacity:c,"z-index":j.getItem("caap_top_zIndex","1"),cursor:""});d!==g&&i("th[data-type='bestcolor'],td[data-type='bestcolor']",a.K).css({color:d});i("#unlockMenu",a.X).attr("checked",M);j.setItem("caapPause","none");j.setItem("ReleaseControl",f);j.setItem("resetselectMonster",f);a.Ca=M},Bg:function(){var b={};b={};j.deleteItem("caap_div_menuLeft");
j.deleteItem("caap_div_menuTop");j.deleteItem("caap_div_zIndex");a.Ma.x="";a.Ma.y=i(a.Ma.selector).offset().top;b=a.Mc(f);a.X.css({cursor:"","z-index":"2",top:b.y+"px",left:b.x+"px"});j.deleteItem("caap_top_menuLeft");j.deleteItem("caap_top_menuTop");j.deleteItem("caap_top_zIndex");a.Ga.x="";a.Ga.y=i(a.Ga.selector).offset().top-10;b=a.Wb(f);a.K.css({cursor:"","z-index":"1",top:b.y+"px",left:b.x+"px"});i(":input[id^='caap_']",a.X).attr({disabled:M});i(":input[id^='caap_']",a.K).attr({disabled:M})},
Zf:function(b){try{var c=b.target.id.replace(/_Switch/i,""),d=document.getElementById(c);if(d.style.display==="block"){$u.log(2,"Folding: ",c);d.style.display="none";b.target.innerHTML=b.target.innerHTML.replace(/-/,"+");j.setItem("Control_"+c.qb(),"none")}else{$u.log(2,"Unfolding: ",c);d.style.display="block";b.target.innerHTML=b.target.innerHTML.replace(/\+/,"-");j.setItem("Control_"+c.qb(),"block")}return f}catch(g){$u.error("ERROR in FoldingBlockListener: "+g);return M}},vd:function(b){try{for(var c=
b.target;c&&!c.href;)c=c.parentNode;if(c&&c.href){j.setItem("clickUrl",c.href);u.setItem("clickedOnSomething",0);a.Ca=f}else c&&!c.href&&$u.warn("whatClickedURLListener globalContainer no href",c)}catch(d){$u.error("ERROR in whatClickedURLListener: "+d,b)}},wd:function(b){try{for(var c=b.target,d=0;c&&!c.id;)c=c.parentNode;if(c&&c.id&&c.onclick){d=c.onclick.toString().regex(/friendKeepBrowse\('(\d+)'/);j.setItem("clickUrl",a.domain.link+"/keep.php"+($u.isNumber(d)&&d>0?"?casuser="+d:""));u.setItem("clickedOnSomething",
0);a.Ca=f}}catch(g){$u.error("ERROR in whatFriendBox: "+g,b)}},Zb:function(){$u.log(4,"engage arena_battle.php");j.setItem("clickUrl",a.domain.link+"/arena_battle.php");u.setItem("clickedOnSomething",0);a.Ca=f},ce:function(b){var c=-1;c={};$u.log(4,"engage arena_battle.php",b.target.id);c=b.target.id?b.target.id.parseInt():-1;c=V.qh(c);c=!i.isEmptyObject(c)?c:{};j.setItem("ArenaMinionAttacked",c);j.setItem("clickUrl",a.domain.link+"/arena_battle.php");u.setItem("clickedOnSomething",0);a.Ca=f},uc:function(){$u.log(4,
"engage guild_battle_monster.php");j.setItem("clickUrl",a.domain.link+"/guild_battle_monster.php");u.setItem("clickedOnSomething",0);a.Ca=f},ni:function(){if(a.domain.which>=0){var b=a.Mc(),c=a.Wb();a.X.css("left",b.x+"px");a.K.css("left",c.x+"px")}},ed:function(b){b=$u.setContent($u.setContent(i(b.target).text(),"").regex(/(\d+):(\d+)/),[]);!$u.hasContent(b)||b.length!==2||(a.p.gold.ticker=b)},ad:function(b){b=$u.setContent($u.setContent(i(b.target).text(),"").parseInt(),-1);if(!(b<0||$u.isNaN(b))){a.p.energy=
$u.setContent(a.va(b+"/"+a.p.energy.max),a.p.energy);a.p.energyT=$u.setContent(a.va(b+"/"+a.p.energyT.max),a.p.energy)}},fd:function(b){b=$u.setContent($u.setContent(i(b.target).text(),"").parseInt(),-1);if(!(b<0||$u.isNaN(b))){a.p.health=$u.setContent(a.va(b+"/"+a.p.health.max),a.p.health);a.p.healthT=$u.setContent(a.va(b+"/"+a.p.healthT.max),a.p.healthT)}},sd:function(b){b=$u.setContent($u.setContent(i(b.target).text(),"").parseInt(),-1);if(!(b<0||$u.isNaN(b))){a.p.stamina=$u.setContent(a.va(b+
"/"+a.p.stamina.max),a.p.stamina);a.p.staminaT=$u.setContent(a.va(b+"/"+a.p.staminaT.max),a.p.staminaT)}},ji:["app_body","index","keep","generals","battle_monster","battle","battlerank","battle_train","quests","raid","party","symbolquests","alchemy","goblin_emp","soldiers","item","land","magic","oracle","symbols","treasure_chest","gift","apprentice","news","friend_page","party","comments","army","army_member","army_news_feed","army_reqs","guild","guild_panel","guild_current_battles","guild_current_monster_battles",
"guild_battle_monster","guild_monster_summon_list","arena","arena_battle","specialmembership"],C:{},Oe:function(){try{$u.hasContent(a.X)||e("Unable to find div for caap_div");i(window).bind("resize",a.ni);i('input:checkbox[id^="caap_"]',a.X).change(a.Cd);i('input[data-subtype="text"]',a.X).change(a.Gg);i('input[data-subtype="color"]',a.X).keyup(a.Md).change(a.Uf).click(a.Vf);i('input[data-subtype="number"]',a.X).change(a.xg);i("#unlockMenu",a.X).change(a.Cd);i('select[id^="caap_"]',a.X).change(a.Yf);
i('textarea[id^="caap_"]',a.X).change(a.Fg);i('a[id^="caap_Switch"]',a.X).click(a.Zf);i("#caap_FillArmy",a.X).click(function(){j.setItem("FillArmy",f);j.setItem("ArmyCount",0);j.setItem("FillArmyList",[]);j.setItem(a.za.Na.name+"Responded",[]);j.setItem(a.za.bd.name+"Responded",M)});i("#caap_ResetMenuLocation",a.X).click(a.Bg);i("#caap_resetElite",a.X).click(function(){u.setItem("AutoEliteGetList",0);u.setItem("AutoEliteReqNext",0);j.setItem("AutoEliteEnd","");if(!j.getItem("FillArmy",M)){j.setItem(a.za.Na.name+
"Requested",M);j.setItem(a.za.Na.name+"Responded",[])}});i("#caapRestart",a.X).click(a.Cg);i("#caap_control",a.X).mousedown(a.Xd);i("#stopAutoQuest",a.X).click(function(){$u.log(1,"Change: setting stopAutoQuest and go to Manual");a.yb()});a.C=i("#"+a.domain.id[a.domain.which]+"globalContainer");$u.hasContent(a.C)||e("Global Container not found");i("a",a.C).bind("click",a.vd);i("div[id*='friend_box_']",a.C).bind("click",a.wd);i("input[src*='dragon_list_btn_']",a.C).bind("click",a.uc);i("input[src*='battle_enter_battle']",
a.C).bind("click",a.Zb);i("div[style*='arena3_newsfeed']",a.C).bind("click",a.Zb);i("input[src*='monster_duel_button']",a.C).each(function(c){i(this).attr("id",c).bind("click",a.ce)});i("input[src*='guild_duel_button']",a.C).bind("click",a.uc);i("span[id*='gold_time_value']",a.C).bind("DOMSubtreeModified",a.ed);i("span[id*='energy_current_value']",a.C).bind("DOMSubtreeModified",a.ad);i("span[id*='stamina_current_value']",a.C).bind("DOMSubtreeModified",a.sd);i("span[id*='health_current_value']",a.C).bind("DOMSubtreeModified",
a.fd);a.C.bind("DOMNodeInserted",function(c){var d=$u.hasContent(c.target.id)?c.target.id.replace("app46755028429_",""):c.target.id;if(a.ji.hasIndexOf(d)){$u.log(4,"Refreshing DOM Listeners",c.target.id);a.Ca=M;i("a",a.C).unbind("click",a.vd).bind("click",a.vd);i("div[id*='friend_box_']",a.C).unbind("click",a.wd).bind("click",a.wd);i("span[id*='gold_time_value']",a.C).unbind("DOMSubtreeModified",a.ed).bind("DOMSubtreeModified",a.ed);i("span[id*='energy_current_value']",a.C).unbind("DOMSubtreeModified",
a.ad).bind("DOMSubtreeModified",a.ad);i("span[id*='stamina_current_value']",a.C).unbind("DOMSubtreeModified",a.sd).bind("DOMSubtreeModified",a.sd);i("span[id*='health_current_value']",a.C).unbind("DOMSubtreeModified",a.fd).bind("DOMSubtreeModified",a.fd);a.kg();n.getItem("HideAdsIframe",M)&&i("iframe[name*='fb_iframe']").eq(0).parent().css("display","none");window.setTimeout(a.Hc,100)}c.target.id===a.Ga.selector.replace("#","")&&a.K.css("left",a.Wb().x+"px")});return f}catch(b){$u.error("ERROR in AddListeners: "+
b);return M}},pb:{castle_age:{ia:"gif",ea:"CheckResults_index"},index:{ia:"gif",ea:"CheckResults_index"},battle_monster:{ia:"tab_monster_list_on.gif",ea:"CheckResults_fightList",Ub:["onMonster"]},onMonster:{ia:"tab_monster_active.gif",ea:"CheckResults_viewFight"},raid:{ia:"tab_raid_on.gif",ea:"CheckResults_fightList",Ub:["onRaid"]},onRaid:{ia:"raid_map",ea:"CheckResults_viewFight"},land:{ia:"tab_land_on.gif",ea:"CheckResults_land"},generals:{ia:"tab_generals_on.gif",ea:"CheckResults_generals"},quests:{ia:"tab_quest_on.gif",
ea:"CheckResults_quests",Ub:["earlyQuest"]},earlyQuest:{ia:"quest_back_1.jpg",ea:"CheckResults_quests"},symbolquests:{ia:"demi_quest_on.gif",ea:"CheckResults_quests"},monster_quests:{ia:"tab_atlantis_on.gif",ea:"CheckResults_quests"},gift_accept:{ia:"gif",ea:"CheckResults_gift_accept"},army:{ia:"invite_on.gif",ea:"CheckResults_army"},keep:{ia:"tab_stats_on.gif",ea:"CheckResults_keep"},oracle:{ia:"oracle_on.gif",ea:"CheckResults_oracle"},alchemy:{ia:"tab_alchemy_on.gif",ea:"CheckResults_alchemy"},
battlerank:{ia:"tab_battle_rank_on.gif",ea:"CheckResults_battlerank"},war_rank:{ia:"tab_war_on.gif",ea:"CheckResults_war_rank"},achievements:{ia:"tab_achievements_on.gif",ea:"CheckResults_achievements"},battle:{ia:"battle_on.gif",ea:"CheckResults_battle"},soldiers:{ia:"tab_soldiers_on.gif",ea:"CheckResults_soldiers"},item:{ia:"tab_black_smith_on.gif",ea:"CheckResults_item"},magic:{ia:"tab_magic_on.gif",ea:"CheckResults_magic"},gift:{ia:"tab_gifts_on.gif",ea:"CheckResults_gift"},goblin_emp:{ia:"emporium_cancel.gif",
ea:"CheckResults_goblin_emp"},view_class_progress:{ia:"nm_class_whole_progress_bar.jpg",ea:"CheckResults_view_class_progress"},guild:{ia:"tab_guild_main_on.gif",ea:"CheckResults_guild"},guild_current_battles:{ia:"tab_guild_current_battles_on.gif",ea:"CheckResults_guild_current_battles"},guild_current_monster_battles:{ia:"guild_monster_tab_on.jpg",ea:"CheckResults_guild_current_monster_battles"},guild_battle_monster:{ai:"guild_battle_banner_section",ea:"CheckResults_guild_battle_monster"},arena:{ia:"tab_arena_on.gif",
ea:"CheckResults_arena"},arena_battle:{ai:"arena_battle_banner_section",ea:"CheckResults_arena_battle"},army_member:{ia:"view_army_on.gif",ea:"CheckResults_army_member"}},Je:function(){try{var b=i("#caap_enl",a.C);b=$u.hasContent(b)?b.html(a.p.exp.dif):i("#"+a.domain.id[a.domain.which]+"st_2_5 strong",a.C).prepend("(<span id='caap_enl' style='color:red'>"+a.p.exp.dif+"</span>) ");$u.hasContent(b)||$u.warn("Unable to get experience array");a.u("exp_mess","Experience to next level: "+a.p.exp.dif);return f}catch(c){$u.error("ERROR in AddExpDisplay: "+
c);return M}},Hc:function(){try{if(!u.aa("CheckResultsTimer"))return M;u.setItem("CheckResultsTimer",1);a.oa=i("#"+a.domain.id[a.domain.which]+"app_body",a.C);a.zb=a.p.level<10?"battle_train,battle_off":"battle";a.yc=a.Sd();if(!a.yc)return f;var b="",c="none",d=0,g="",h=M,l="",m=0,k=0;b=j.getItem("clickUrl","");if($u.hasContent(b)){c=b.basename(".php");if(c==="keep"){d=b.regex(/user=(\d+)/);d=$u.setContent(d,0)}}j.setItem("pageUserCheck",d);if($u.hasContent(c)&&$u.hasContent(a.pb[c])&&$u.hasContent(a.pb[c].Ub)){m=
0;for(k=a.pb[c].Ub.length;m<k;m+=1)if($u.hasContent(i("img[src*='"+a.pb[a.pb[c].Ub[m]].ia+"']",a.oa))){c=a.pb[c].Ub[m];break}}j.setItem("page",c);g=i("#"+a.domain.id[a.domain.which]+"results_main_wrapper span[class*='result_body']",a.oa).text().trim();if($u.hasContent(a.pb[c])){$u.log(2,"Checking results for",c);if($u.isFunction(a[a.pb[c].ea]))a[a.pb[c].ea](g);else $u.warn("Check Results function not found",a.pb[c])}else $u.log(2,"No results check defined for",c);!n.getItem("AutoEliteIgnore",M)&&
j.getItem("AutoEliteEnd","NoArmy")!=="NoArmy"&&a.Ha("elite_guard_add")&&u.setItem("AutoEliteGetList",0);a.na();a.Je();a.u("level_mess","Expected next level: "+$u.makeTime(a.p.indicators.enl,u.gc(f)));h=n.getItem("DemiPointsFirst",M);l=n.getItem("WhenMonster","Never");if(h&&l!=="Never"||n.getItem("WhenBattle","Never")==="Demi Points Only")if(j.getItem("DemiPointsDone",f))a.u("demipoint_mess","Daily Demi Points: Done");else h&&l!=="Never"?a.u("demipoint_mess","Daily Demi Points: First"):a.u("demipoint_mess",
"Daily Demi Points: Only");else a.u("demipoint_mess","");u.aa("BlessingTimer")?a.u("demibless_mess","Demi Blessing = none"):a.u("demibless_mess","Next Demi Blessing: "+$u.setContent(u.display("BlessingTimer"),"Unknown"));if($u.hasContent(x.xb)&&x.xb.length<=2){u.setItem("generals",0);u.setItem("allGenerals",0);a.Ed()}return f}catch(o){$u.error("ERROR in CheckResults: "+o);return M}},yf:function(){try{var b="",c="";x.ag();if(b=x.Pd()){c="<span title='Equipped Attack Power Index' style='font-size: 12px; font-weight: normal;'>EAPI:"+
b.eapi+"</span> <span title='Equipped Defense Power Index' style='font-size: 12px; font-weight: normal;'>EDPI:"+b.edpi+"</span> <span title='Equipped Mean Power Index' style='font-size: 12px; font-weight: normal;'>EMPI:"+b.empi+"</span>";i("#"+a.domain.id[a.domain.which]+"general_name_div_int",a.oa).append(c)}u.setItem("generals",J.getItem("CheckGenerals",24,f)*3600,300);return f}catch(d){$u.error("ERROR in CheckResults_generals: "+d);return M}},va:function(b){try{b=$u.isString(b)?b.trim():"";if(b===
""||!$u.isString(b)||!/^\d+\/\d+$/.test(b))e("Invalid text supplied:"+b);var c=$u.setContent(b.regex(/^(\d+)\//),0),d=$u.setContent(b.regex(/\/(\d+)$/),0),g=$u.setContent(d-c,0);return{num:c,max:d,dif:g}}catch(h){$u.error("ERROR in GetStatusNumbers: "+h)}},p:{FBID:0,account:"",PlayerName:"",level:0,army:{actual:0,capped:0},generals:{total:0,invade:0},attack:0,defense:0,points:{skill:0,favor:0},indicators:{bsi:0,lsi:0,sppl:0,api:0,dpi:0,mpi:0,htl:0,hrtl:0,enl:0},gold:{cash:0,bank:0,total:0,income:0,
upkeep:0,flow:0,ticker:[]},rank:{battle:0,battlePoints:0,war:0,warPoints:0},potions:{energy:0,stamina:0},energy:{num:0,max:0,dif:0},energyT:{num:0,max:0,dif:0},health:{num:0,max:0,dif:0},healthT:{num:0,max:0,dif:0},stamina:{num:0,max:0,dif:0},staminaT:{num:0,max:0,dif:0},exp:{num:0,max:0,dif:0},other:{qc:0,bww:0,bwl:0,te:0,tee:0,wlr:0,eer:0,atlantis:M},achievements:{battle:{invasions:{won:0,lost:0,streak:0,ratio:0},duels:{won:0,lost:0,streak:0,ratio:0}},monster:{gildamesh:0,colossus:0,sylvanas:0,
keira:0,legion:0,skaar:0,lotus:0,dragons:0,cronus:0,sieges:0,genesis:0,gehenna:0,aurelius:0,corvintheus:0,valhalla:0},other:{alchemy:0}},character:{warrior:{name:"Warrior",level:0,percent:0},rogue:{name:"Rogue",level:0,percent:0},mage:{name:"Mage",level:0,percent:0},cleric:{name:"Cleric",level:0,percent:0},warlock:{name:"Warlock",level:0,percent:0},ranger:{name:"Ranger",level:0,percent:0}},guild:{name:"",id:"",mPoints:0,mRank:"",bPoints:0,bRank:"",members:[]}},qg:function(b,c){var d=J.getItem("stats.record",
"default");if(d==="default"||!i.isPlainObject(d))d=J.setItem("stats.record",a.p);i.extend(f,a.p,d);a.p.FBID=b;a.p.account=c;$u.log(4,"Stats",a.p);j.setItem("UserDashUpdate",f)},fb:function(){J.setItem("stats.record",a.p);$u.log(4,"Stats",a.p);j.setItem("UserDashUpdate",f)},Sd:function(){try{var b=f,c=0,d=0,g=0,h=i("#"+a.domain.id[a.domain.which]+"main_ststb",a.C),l=i("#"+a.domain.id[a.domain.which]+"main_bntp",a.C),m=i("#"+a.domain.id[a.domain.which]+"gold_current_value",h);if($u.hasContent(m)){a.p.gold.cash=
$u.setContent($u.setContent(m.text(),"").R(),0);a.p.gold.total=a.p.gold.bank+a.p.gold.cash}else{$u.warn("Unable to get cashDiv");b=M}m=i("#"+a.domain.id[a.domain.which]+"st_2_2",h);if($u.hasContent(m)){a.p.energyT=a.va($u.setContent($u.setContent(m.text(),"").regex(/(\d+\/\d+)/),"0/0"));a.p.energy=a.va(a.p.energyT.num+"/"+a.p.energy.max)}else{$u.warn("Unable to get energyDiv");b=M}m=i("#"+a.domain.id[a.domain.which]+"st_2_3",h);if($u.hasContent(m)){a.p.healthT=a.va($u.setContent($u.setContent(m.text(),
"").regex(/(\d+\/\d+)/),"0/0"));a.p.health=a.va(a.p.healthT.num+"/"+a.p.health.max)}else{$u.warn("Unable to get healthDiv");b=M}m=i("#"+a.domain.id[a.domain.which]+"st_2_4",h);if($u.hasContent(m)){a.p.staminaT=a.va($u.setContent($u.setContent(m.text(),"").regex(/(\d+\/\d+)/),"0/0"));a.p.stamina=a.va(a.p.staminaT.num+"/"+a.p.stamina.max)}else{$u.warn("Unable to get staminaDiv");b=M}m=i("#"+a.domain.id[a.domain.which]+"st_2_5",h);if($u.hasContent(m))a.p.exp=a.va($u.setContent($u.setContent(m.text(),
"").regex(/(\d+\/\d+)/),"0/0"));else{$u.warn("Unable to get expDiv");b=M}m=i("#"+a.domain.id[a.domain.which]+"st_5",h);if($u.hasContent(m)){c=$u.setContent($u.setContent(m.text(),"").regex(/(\d+)/),0);if(c>a.p.level){$u.log(2,"New level. Resetting Best Land Cost.");a.ub=j.setItem("BestLandCost",(new a.Pb).data);j.setItem("KeepLevelUpGeneral",f)}a.p.level=c}else{$u.warn("Unable to get levelDiv");b=M}m=i("a[href*='army.php']",l);if($u.hasContent(m)){a.p.army.actual=$u.setContent($u.setContent(m.text(),
"").regex(/(\d+)/),0);c=Math.min(a.p.army.actual,501);if(c>=1&&c<=501)a.p.army.capped=c;else{$u.warn("Army count not in limits");b=M}}else{$u.warn("Unable to get armyDiv");b=M}m=i("a[href*='keep.php']",l);if($u.hasContent(m)){c=$u.setContent($u.setContent(m.text(),"").regex(/(\d+)/),0);if(c>a.p.points.skill){$u.log(2,"New points. Resetting AutoStat.");j.setItem("statsMatch",f)}a.p.points.skill=c}else{$u.warn("Unable to get pointsDiv");b=M}if(a.p.exp){d=J.getItem("expStaminaRatio",2.4,f);g=j.getItem("AutoQuest",
a.ra()).expRatio||J.getItem("expEnergyRatio",1.4,f);a.p.indicators.htl=(a.p.level*12.5-a.p.stamina.max*d-a.p.energy.max*g)/(12*(d+g));a.p.indicators.hrtl=(a.p.exp.dif-a.p.stamina.num*d-a.p.energy.num*g)/(12*(d+g));a.p.indicators.enl=(new Date).getTime()+Math.ceil(a.p.indicators.hrtl*36E5)}else{$u.warn("Could not calculate time to next level. Missing experience stats!");b=M}b||a.fb();if(!b&&a.p.energy.max===0&&a.p.health.max===0&&a.p.stamina.max===0){i().alert("<div style='text-align: center;'>"+$u.warn("Paused as this account may have been disabled!",
a.p)+"</div>");a.Xd()}return b}catch(k){$u.error("ERROR GetStats: "+k);return M}},If:function(){try{var b=i(".keep_attribute_section",a.C),c=i(".statsTB",a.C),d=i(".keepTable1 tr",c),g=i(".attribute_stat_container",b),h=i();if($u.hasContent(b)){$u.log(8,"Getting new values from player keep");h=i("img[src*='gif/rank']",a.C);if($u.hasContent(h))a.p.rank.battle=$u.setContent($u.setContent(h.attr("src"),"").basename().regex(/(\d+)/),0);else $u.warn("Using stored rank.");h=i(".keep_stat_title_inc",b);
if($u.hasContent(h))a.p.PlayerName=$u.setContent($u.setContent(h.text(),"").regex(/"(.+)",/),"");else $u.warn("Using stored PlayerName.");if(a.p.level>=100){h=i("img[src*='war_rank_']",a.C);if($u.hasContent(h))a.p.rank.war=$u.setContent($u.setContent(h.attr("src"),"").basename().regex(/(\d+)/),0);else $u.warn("Using stored warRank.")}if($u.hasContent(g)&&g.length===6){h=g.eq(0);if($u.hasContent(h))a.p.energy=a.va(a.p.energyT.num+"/"+$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0));else $u.warn("Using stored energy value.");
h=g.eq(1);if($u.hasContent(h))a.p.stamina=a.va(a.p.staminaT.num+"/"+$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0));else $u.warn("Using stored stamina value.");if(a.p.level>=10){h=g.eq(2);if($u.hasContent(h))a.p.attack=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored attack value.");h=g.eq(3);if($u.hasContent(h))a.p.defense=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored defense value.")}h=g.eq(4);if($u.hasContent(h))a.p.health=
a.va(a.p.healthT.num+"/"+$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0));else $u.warn("Using stored health value.")}else $u.warn("Can't find stats containers! Using stored stats values.");h=i(".money",c);if($u.hasContent(h)){a.p.gold.bank=$u.setContent($u.setContent(h.text(),"").R(),0);a.p.gold.total=a.p.gold.bank+a.p.gold.cash;h.attr({title:"Click to copy value to retrieve",style:"color: blue;"}).hover(function(){a.style.cursor="pointer"},function(){a.style.cursor="default"}).click(function(){i("input[name='get_gold']",
a.C).val(a.p.gold.bank)})}else $u.warn("Using stored inStore.");h=i(".positive",c).eq(0);if($u.hasContent(h))a.p.gold.income=$u.setContent($u.setContent(h.text(),"").R(),0);else $u.warn("Using stored income.");h=i(".negative",c);if($u.hasContent(h))a.p.gold.upkeep=$u.setContent($u.setContent(h.text(),"").R(),0);else $u.warn("Using stored upkeep.");a.p.gold.flow=a.p.gold.income-a.p.gold.upkeep;h=i("img[title='Energy Potion']",a.C).parent().next();a.p.potions.energy=$u.hasContent(h)?$u.setContent($u.setContent(h.text(),
"").R(),0):0;h=i("img[title='Stamina Potion']",a.C).parent().next();a.p.potions.stamina=$u.hasContent(h)?$u.setContent($u.setContent(h.text(),"").R(),0):0;a.p.other.ri=$u.hasContent(a.Wa("seamonster_map_finished.jpg"))?f:M;h=i("td:last",d.eq(0));if($u.hasContent(h))a.p.other.qc=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored other.");h=i("td:last",d.eq(1));if($u.hasContent(h))a.p.other.bww=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored other.");
h=i("td:last",d.eq(2));if($u.hasContent(h))a.p.other.bwl=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored other.");h=i("td:last",d.eq(3));if($u.hasContent(h))a.p.other.te=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored other.");h=i("td:last",d.eq(4));if($u.hasContent(h))a.p.other.tee=$u.setContent($u.setContent(h.text(),"").regex(/(\d+)/),0);else $u.warn("Using stored other.");a.p.other.wlr=a.p.other.bwl!==0?(a.p.other.bww/
a.p.other.bwl).dp(2):Infinity;a.p.other.eer=a.p.other.tee!==0?(a.p.other.tee/a.p.other.te).dp(2):Infinity;if(a.p.level>=10){a.p.indicators.bsi=((a.p.attack+a.p.defense)/a.p.level).dp(2);a.p.indicators.lsi=((a.p.energy.max+2*a.p.stamina.max)/a.p.level).dp(2);a.p.indicators.sppl=((a.p.energy.max+2*a.p.stamina.max+a.p.attack+a.p.defense+a.p.health.max-122)/a.p.level).dp(2);a.p.indicators.api=(a.p.attack+a.p.defense*0.7).dp(2);a.p.indicators.dpi=(a.p.defense+a.p.attack*0.7).dp(2);a.p.indicators.mpi=((a.p.indicators.api+
a.p.indicators.dpi)/2).dp(2)}u.setItem("keep",J.getItem("CheckKeep",1,f)*3600,300);a.fb();h=i(".keep_stat_title_inc",b);h=$u.hasContent(h)?h.html($u.setContent(h.html(),"").trim()+", <span style='white-space: nowrap;'>BSI: "+a.p.indicators.bsi+" LSI: "+a.p.indicators.lsi+"</span>"):h}else{h=i("a[href*='keep.php?user=']",a.C);$u.hasContent(h)?$u.log(2,"On another player's keep",$u.setContent($u.setContent(h.attr("href"),"").basename().regex(/(\d+)/),0)):$u.warn("Attribute section not found and not identified as another player's keep!")}n.getItem("enableTitles",
f)&&S.Gb();return f}catch(l){$u.error("ERROR in CheckResults_keep: "+l);return M}},Lf:function(){try{var b=i(".title_action"),c="",d=0,g=M;if($u.setContent(b)){c=b.text();if(/You have zero favor points!/.test(c)){a.p.points.favor=0;g=f}else if(/You have a favor point!/.test(c)){a.p.points.favor=1;g=f}else{d=c.regex(/You have (\d+) favor points!/);if($u.hasContent(d)){a.p.points.favor=d;g=f}}}else $u.warn("Favor Points div not found.");if(g){$u.log(2,"Got number of Favor Points",a.p.points.favor);
a.fb()}else $u.warn("Favor Points not matched.");u.setItem("oracle",J.getItem("CheckOracle",24,f)*3600,300);return f}catch(h){$u.error("ERROR in CheckResults_oracle: "+h);return M}},sf:function(){try{n.getItem("enableTitles",f)&&S.Gb();if(n.getItem("enableRecipeClean",f)){var b=i(".alchemyRecipeBack .recipeTitle",a.C),c="",d=/RECIPES: Create (.+)/i,g="",h=n.getItem("recipeCleanCount",1),l=["Volcanic Knight","Holy Plate","Atlantean Forcefield","Spartan Phalanx","Cronus, The World Hydra","Helm of Dragon Power",
"Avenger","Judgement","Tempered Steel","Bahamut, the Volcanic Dragon","Blood Zealot","Transcendence","Soul Crusher","Soulforge","Crown of Flames"];if(h<1)h=1;$u.hasContent(b)&&b.each(function(){var k=i(this);c=k.text().trim().innerTrim().regex(d);if($u.hasContent(c)){if(l.hasIndexOf(c))return f;if(c==="Elven Crown")g="gift_aeris_complete.jpg";Q.ac(c,g)>=h&&!S.Bh(c,g)&&k.parent().parent().css("display","none").next().css("display","none")}return f})}n.getItem("enableIngredientsHide",M)&&i("div[class='statsTTitle'],div[class='statsTMain']",
a.C).css("display","none");if(n.getItem("enableAlchemyShrink",f)){i("div[class*='alchemyRecipeBack'],div[class*='alchemyQuestBack']",a.C).css("height","100px");i("div[class*='alchemySpace']",a.C).css("height","4px");i(".statsT2 img").not("img[src*='emporium_go.gif']",a.C).attr("style","height: 45px; width: 45px;").parent().attr("style","height: 45px; width: 45px;").parent().css("width","50px");i("input[name='Alchemy Submit']",a.C).css("width","80px");i(".recipeTitle",a.C).css("margin","0px")}return f}catch(m){$u.error("ERROR in CheckResults_alchemy: "+
m);return M}},Xc:function(){try{i("div[class='eq_buy_costs_int'] form[id*='itemBuy'] select[name='amount'] option[value='5']",a.C).attr("selected","selected");n.getItem("enableTitles",f)&&S.Gb();return f}catch(b){$u.error("ERROR in commonTown: "+b);return M}},Mf:function(){try{a.Xc();Q.Oc("soldiers");u.setItem("soldiers",J.getItem("CheckSoldiers",72,f)*3600,300);return f}catch(b){$u.error("ERROR in CheckResults_soldiers: "+b);return M}},Hf:function(){try{a.Xc();Q.Oc("item");u.setItem("item",J.getItem("CheckItem",
72,f)*3600,300);return f}catch(b){$u.error("ERROR in CheckResults_item: "+b);return M}},Kf:function(){try{a.Xc();Q.Oc("magic");u.setItem("magic",J.getItem("CheckMagic",72,f)*3600,300);return f}catch(b){$u.error("ERROR in CheckResults_magic: "+b);return M}},Bf:function(){try{n.getItem("goblinHinting",f)&&S.Gb(f);return f}catch(b){$u.error("ERROR in CheckResults_goblin_emp: "+b);return M}},zf:function(){try{q.ja.populate();u.setItem("gift",J.getItem("CheckGift",72,f)*3600,300);return f}catch(b){$u.error("ERROR in CheckResults_gift: "+
b);return M}},xf:function(){try{var b=i("div[style*='battle_rank_banner.jpg']",a.C),c=0;if($u.hasContent(b)){c=$u.setContent($u.setContent(b.text(),"").replace(",","").regex(/with (\d+) Battle Points/i),0);if($u.hasContent(c)){$u.log(2,"Got Battle Rank Points",c);a.p.rank.battlePoints=c;a.fb()}else $u.warn("Battle Rank Points RegExp not matched.")}else $u.warn("Battle Rank Points div not found.");u.setItem("battlerank",J.getItem("CheckBattleRank",48,f)*3600,300);return f}catch(d){$u.error("ERROR in CheckResults_battlerank: "+
d);return M}},Pf:function(){try{var b=i("div[style*='war_rank_banner.jpg']",a.C),c=0;if($u.hasContent(b)){c=$u.setContent($u.setContent(b.text(),"").replace(",","").regex(/with (\d+) War Points/i),0);if($u.hasContent(c)){$u.log(2,"Got War Rank Points",c);a.p.rank.warPoints=c;a.fb()}else $u.warn("War Rank Points RegExp not matched.")}else $u.warn("War Rank Points div not found.");u.setItem("warrank",J.getItem("CheckWarRank",48,f)*3600,300);return f}catch(d){$u.error("ERROR in CheckResults_war_rank: "+
d);return M}},rf:function(){try{var b=i("#"+a.domain.id[a.domain.which]+"achievements_2",a.C),c=i("td div",b);if($u.hasContent(b))if($u.hasContent(c)&&c.length===6){a.p.achievements.battle.invasions.won=$u.setContent(c.eq(0).text().R(),0);a.p.achievements.battle.duels.won=$u.setContent(c.eq(1).text().R(),0);a.p.achievements.battle.invasions.lost=$u.setContent(c.eq(2).text().R(),0);a.p.achievements.battle.duels.lost=$u.setContent(c.eq(3).text().R(),0);a.p.achievements.battle.invasions.streak=$u.setContent(c.eq(4).text().R(),
0);a.p.achievements.battle.duels.streak=$u.setContent(c.eq(5).text().R(),0);a.p.achievements.battle.invasions.ratio=a.p.achievements.battle.invasions.lost>0?(a.p.achievements.battle.invasions.won/a.p.achievements.battle.invasions.lost).dp(2):Infinity;a.p.achievements.battle.duels.ratio=a.p.achievements.battle.invasions.lost>0?(a.p.achievements.battle.duels.won/a.p.achievements.battle.duels.lost).dp(2):Infinity;a.fb()}else $u.warn("Battle Achievements problem.");else $u.warn("Battle Achievements not found.");
b=i("#"+a.domain.id[a.domain.which]+"achievements_3",a.C);if($u.hasContent(b)){c=i("td div",b);if($u.hasContent(c)&&c.length===15){a.p.achievements.monster.gildamesh=$u.setContent(c.eq(0).text().R(),0);a.p.achievements.monster.lotus=$u.setContent(c.eq(1).text().R(),0);a.p.achievements.monster.colossus=$u.setContent(c.eq(2).text().R(),0);a.p.achievements.monster.dragons=$u.setContent(c.eq(3).text().R(),0);a.p.achievements.monster.sylvanas=$u.setContent(c.eq(4).text().R(),0);a.p.achievements.monster.cronus=
$u.setContent(c.eq(5).text().R(),0);a.p.achievements.monster.keira=$u.setContent(c.eq(6).text().R(),0);a.p.achievements.monster.sieges=$u.setContent(c.eq(7).text().R(),0);a.p.achievements.monster.legion=$u.setContent(c.eq(8).text().R(),0);a.p.achievements.monster.genesis=$u.setContent(c.eq(9).text().R(),0);a.p.achievements.monster.skaar=$u.setContent(c.eq(10).text().R(),0);a.p.achievements.monster.gehenna=$u.setContent(c.eq(11).text().R(),0);a.p.achievements.monster.aurelius=$u.setContent(c.eq(12).text().R(),
0);a.p.achievements.monster.corvintheus=$u.setContent(c.eq(13).text().R(),0);a.p.achievements.monster.valhalla=$u.setContent(c.eq(14).text().R(),0);a.fb()}else $u.warn("Monster Achievements problem.")}else $u.warn("Monster Achievements not found.");b=i("#"+a.domain.id[a.domain.which]+"achievements_4",a.C);if($u.hasContent(b)){c=i("td div",b);if($u.hasContent(c)&&c.length===1){a.p.achievements.other.alchemy=$u.setContent(c.eq(0).text().R(),0);a.fb()}else $u.warn("Other Achievements problem.")}else $u.warn("Other Achievements not found.");
u.setItem("achievements",J.getItem("CheckAchievements",72,f)*3600,300);return f}catch(d){$u.error("ERROR in CheckResults_achievements: "+d);return M}},Of:function(){try{var b=i("#"+a.domain.id[a.domain.which]+"choose_class_screen div[class*='banner_']",a.C);$u.hasContent(b)&&b.length===6?b.each(function(){var d=i(this),g="";if((g=$u.setContent(d.attr("class"),"").replace("banner_",""))&&i.isPlainObject(a.p.character[g])){a.p.character[g].percent=$u.setContent(i("img[src*='progress']",d).eq(0).cb("width").dp(2),
0);a.p.character[g].level=$u.setContent(d.children().eq(2).text().R(),0);$u.log(2,"Got character class record",g,a.p.character[g]);a.fb()}else $u.warn("Problem character class name",g)}):$u.warn("Problem with character class records",b);u.setItem("view_class_progress",J.getItem("CheckClassProgress",48,f)*3600,300);return f}catch(c){$u.error("ERROR in CheckResults_view_class_progress: "+c);return M}},ug:function(){try{var b=0,c=n.getItem("IdleGeneral","Use Current");if(c!=="Use Current"){b=$u.setContent(x.Od(c),
0);if(b===0||$u.isNaN(b)){$u.log(1,"Changing to idle general to get Max energy");if(x.qa("IdleGeneral"))return f}}return a.p.energy.num>=b?a.Yd():M}catch(d){$u.error("ERROR in MaxEnergyQuest: "+d)}},La:{"Land of Fire":{Ja:"quests_stage_1",gb:"land_fire",next:"Land of Earth",area:"",list:"",bb:"Heart of Fire",db:"Orb of Gildamesh"},"Land of Earth":{Ja:"quests_stage_2",gb:"land_earth",next:"Land of Mist",area:"",list:"",bb:"Gift of Earth",db:"Colossal Orb"},"Land of Mist":{Ja:"quests_stage_3",gb:"land_mist",
next:"Land of Water",area:"",list:"",bb:"Eye of the Storm",db:"Sylvanas Orb"},"Land of Water":{Ja:"quests_stage_4",gb:"land_water",next:"Demon Realm",area:"",list:"",bb:"A Look into the Darkness",db:"Orb of Mephistopheles"},"Demon Realm":{Ja:"quests_stage_5",gb:"land_demon_realm",next:"Undead Realm",area:"",list:"",bb:"The Rift",db:"Orb of Keira"},"Undead Realm":{Ja:"quests_stage_6",gb:"land_undead_realm",next:"Underworld",area:"",list:"",bb:"Undead Embrace",db:"Lotus Orb"},Underworld:{Ja:"quests_stage_7",
gb:"tab_underworld",next:"Kingdom of Heaven",area:"",list:"",bb:"Confrontation",db:"Orb of Skaar Deathrune"},"Kingdom of Heaven":{Ja:"quests_stage_8",gb:"tab_heaven",next:"Ivory City",area:"",list:"",bb:"Archangels Wrath",db:"Orb of Azriel"},"Ivory City":{Ja:"quests_stage_9",gb:"tab_ivory",next:"Earth II",area:"",list:"",bb:"Entrance to the Throne",db:"Orb of Alpha Mephistopheles"},"Earth II":{Ja:"quests_stage_10",gb:"tab_earth2",next:"Water II",area:"",list:"",bb:"Lion's Rebellion",db:"Orb of Aurelius"},
"Water II":{Ja:"quests_stage_11",gb:"tab_water2",next:"Ambrosia",area:"Demi Quests",list:"demiQuestList",bb:"Corvintheus",db:"Orb of Corvintheus"},Ambrosia:{Ja:"symbolquests_stage_1",next:"Malekus",area:"",list:""},Malekus:{Ja:"symbolquests_stage_2",next:"Corvintheus",area:"",list:""},Corvintheus:{Ja:"symbolquests_stage_3",next:"Aurora",area:"",list:""},Aurora:{Ja:"symbolquests_stage_4",next:"Azeron",area:"",list:""},Azeron:{Ja:"symbolquests_stage_5",next:"Atlantis",area:"Atlantis",list:"atlantisQuestList"},
Atlantis:{Ja:"monster_quests_stage_1",next:"",area:"",list:""}},je:{Ambrosia:"energy",Malekus:"attack",Corvintheus:"defense",Aurora:"health",Azeron:"stamina"},Yd:function(){try{var b=j.getItem("storeRetrieve","");if(b)if(b==="general"){$u.log(1,"storeRetrieve",b);if(x.qa("BuyGeneral"))return f;j.setItem("storeRetrieve","");return f}else return a.kc(b);a.u("quest_mess","");var c=n.getItem("WhenQuest","Never");if(c==="Never"){a.u("quest_mess","Questing off");return M}if(c==="Not Fortifying"||n.getItem("PrioritiseMonsterAfterLvl",
M)&&j.getItem("KeepLevelUpGeneral",M)){var d=j.getItem("targetFromfortify",(new p.Nb).data);if(i.isPlainObject(d)&&d.name&&d.type){switch(d.type){case "Fortify":var g=n.getItem("MaxHealthtoQuest",0);if(!g){a.u("quest_mess",'<span style="font-weight: bold;">No valid over fortify %</span>');break}a.u("quest_mess","No questing until attack target "+d.name+" health exceeds "+n.getItem("MaxToFortify",0)+"%");var h=j.getItem("targetFrombattle_monster","");if(!h){var l=p.getItem(h);if(!l.fortify)if(l.fortify<
g){a.u("quest_mess","No questing until fortify target "+h+" health exceeds "+g+"%");break}}break;case "Strengthen":a.u("quest_mess","No questing until attack target "+d.name+" at full strength.");break;case "Stun":a.u("quest_mess","No questing until attack target "+d.name+" stunned.")}return M}}var m=j.getItem("AutoQuest",a.ra()).name;if(m){if(!a.Dd(j.getItem("AutoQuest",a.ra()).energy,c,"quest_mess"))return M}else{if(n.getItem("WhyQuest","Manual")==="Manual"){a.u("quest_mess","Pick quest manually.");
return M}a.u("quest_mess","Searching for quest.");$u.log(1,"Searching for quest")}if(j.getItem("AutoQuest",a.ra()).general==="none"||n.getItem("ForceSubGeneral",M)){if(x.qa("SubQuestGeneral"))return f}else if(x.Lb("QuestGeneral")){if(x.qa("LevelUpGeneral"))return f;$u.log(2,"Using level up general")}switch(n.getItem("QuestArea","Quest")){case "Quest":b=M;if(a.p.level>7){var k=n.getItem("QuestSubArea","Land of Fire"),o=a.La[k].gb;if(o==="tab_heaven"||n.getItem("GetOrbs",M)&&n.getItem("WhyQuest","Manual")!==
"Manual")if(a.Gd())return f;b=o==="tab_underworld"||o==="tab_ivory"||o==="tab_earth2"||o==="tab_water2"?a.Q("quests,jobs_tab_more.gif,"+o+"_small.gif",o+"_big"):o==="tab_heaven"?a.Q("quests,jobs_tab_more.gif,"+o+"_small2.gif",o+"_big2.gif"):o==="land_demon_realm"||o==="land_undead_realm"?a.Q("quests,jobs_tab_more.gif,"+o+".gif",o+"_sel"):a.Q("quests,jobs_tab_back.gif,"+o+".gif",o+"_sel")}else b=a.Q("quests","quest_back_1.jpg");if(b)return f;break;case "Demi Quests":if(a.Q("quests,symbolquests","demi_quest_on.gif"))return f;
var r=n.getItem("QuestSubArea","Ambrosia");if(i("img[src*='deity_"+a.je[r]+"']").css("height")!=="160px")if(a.Q("deity_"+a.je[r]))return f;break;case "Atlantis":if(!a.Ha("tab_atlantis_on.gif"))return a.Q("quests,monster_quests")}var s=a.Wa("quick_switch_button.gif");if($u.hasContent(s)&&!n.getItem("ForceSubGeneral",M)){$u.log(2,"Clicking on quick switch general button.");a.ca(s);return x.ve=f}x.ve&&x.Pd();k=0;var v=i("form[id*='itemBuy']");if(v&&v.length){$u.log(1,"itemBuy");j.setItem("storeRetrieve",
"general");if(x.qa("BuyGeneral"))return f;j.setItem("storeRetrieve","");k=v.text().replace(/.*\$/,"").replace(/[^\d]{3,}.*/,"").parseInt();$u.log(2,"costToBuy",k);if(a.p.gold.cash<k)if(a.p.gold.cash+(a.p.gold.bank-n.getItem("minInStore",0))>=k){$u.log(1,"Trying to retrieve",k-a.p.gold.cash);j.setItem("storeRetrieve",k-a.p.gold.cash);return a.kc(k-a.p.gold.cash)}else{$u.log(1,"Cant buy requires, stopping quest");a.yb();return M}s=a.Wa("quick_buy_button.jpg");if($u.hasContent(s)){$u.log(1,"Clicking on quick buy button.");
a.ca(s);return f}$u.warn("Cant find buy button");return M}s=a.Wa("quick_buy_button.jpg");if($u.hasContent(s)){$u.log(1,"quick_buy_button");j.setItem("storeRetrieve","general");if(x.qa("BuyGeneral"))return f;j.setItem("storeRetrieve","");k=s.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.firstChild.data.replace(RegExp("[^0-9]","g"),"");$u.log(2,"costToBuy",k);if(a.p.gold.cash<k)if(a.p.gold.cash+
(a.p.gold.bank-n.getItem("minInStore",0))>=k){$u.log(1,"Trying to retrieve: ",k-a.p.gold.cash);j.setItem("storeRetrieve",k-a.p.gold.cash);return a.kc(k-a.p.gold.cash)}else{$u.log(1,"Cant buy General, stopping quest");a.yb();return M}$u.log(2,"Clicking on quick buy general button.");a.ca(s);return f}var B={name:"",click:i(),tr:i(),$b:i(),md:M};B=a.Ic(f);if(!B.name){$u.log(1,"Could not find AutoQuest.");a.u("quest_mess","Could not find AutoQuest.");return M}if(B.name!==m){$u.log(1,"New AutoQuest found.");
a.u("quest_mess","New AutoQuest found.");return f}if(B.tr&&B.tr.length){var G=i("div[style*='background-color']",B.tr);if(G&&G.length&&G.css("background-color")==="rgb(158, 11, 15)"){$u.log(1,"Missing item",B.tr);if(n.getItem("QuestSubArea","Atlantis")==="Atlantis"){$u.log(1,"Cant buy Atlantis items, stopping quest");a.yb();return M}$u.log(2,"background.style.backgroundColor",G.css("background-color"));j.setItem("storeRetrieve","general");if(x.qa("BuyGeneral"))return f;j.setItem("storeRetrieve","");
$u.log(2,"background.children().eq(0).children().eq(0).attr('title')",G.children().eq(0).children().eq(0).attr("title"));if(G.children().eq(0).children().eq(0).attr("title")){$u.log(2,"Clicking to buy",G.children().eq(0).children().eq(0).attr("title"));a.ca(G.children().eq(0).children().eq(0));return f}}}else{$u.warn("Can not buy quest item");return M}var A=j.getItem("AutoQuest",a.ra()).general;if(A==="none"||n.getItem("ForceSubGeneral",M)){if(x.qa("SubQuestGeneral"))return f}else if(A&&A!==x.ic())if(x.Lb("QuestGeneral")){if(x.qa("LevelUpGeneral"))return f;
$u.log(2,"Using level up general")}else if(B.$b&&B.$b.length){$u.log(2,"Clicking on general",A);a.ca(B.$b);return f}else{$u.warn("Can not click on general",A);return M}if(B.click&&B.click){$u.log(2,"Clicking auto quest",m);j.setItem("ReleaseControl",f);a.ca(B.click);a.lc();B.md&&u.setItem("magic",0);return f}else{$u.warn("Can not click auto quest",m);return M}}catch(w){$u.error("ERROR in Quests: "+w);return M}},la:ea,Nf:function(b){try{var c=i(),d=[],g=f;$u.hasContent(b)&&a.jf(b);if((c=i("div[id*='"+
a.domain.id[a.domain.which]+"symbol_desc_symbolquests']"))&&c.length===5){c.each(function(){var l="";l=0;l=i(this).children().next().eq(1).children().children().next().text();if($u.hasContent(l)){l=l.R();d.push(l)}else{g=M;$u.warn("Demi-Power text problem")}});$u.log(4,"Points",d);if(g){a.fa.ambrosia.power.total=$u.setContent(d[0],0);a.fa.malekus.power.total=$u.setContent(d[1],0);a.fa.corvintheus.power.total=$u.setContent(d[2],0);a.fa.aurora.power.total=$u.setContent(d[3],0);a.fa.azeron.power.total=
$u.setContent(d[4],0);u.setItem("symbolquests",J.getItem("CheckSymbolQuests",24,f)*3600,300);a.$d()}}else $u.warn("Demi demiDiv problem",c);return f}catch(h){$u.error("ERROR in CheckResults_symbolquests: "+h);return M}},qe:function(b){try{var c="",d=M;for(c in a.La)if(a.La.hasOwnProperty(c))if(a.La[c].bb&&a.La[c].bb===b){d=f;break}return d}catch(g){$u.error("ERROR in isBossQuest: "+g);return M}},xe:function(){$u.log(4,"symbolquests");j.setItem("clickUrl",a.domain.link+"/symbolquests.php");a.Hc()},
Ic:function(b){try{b=b?b:M;$u.hasContent(i("#"+a.domain.id[a.domain.which]+"quest_map_container",a.C))&&i("div[id*='"+a.domain.id[a.domain.which]+"meta_quest_']",a.C).each(function(){var L=i(this);$u.hasContent(i("img[src*='_completed']",L))||$u.hasContent(i("img[src*='_locked']",L))||i("div[id='"+a.domain.id[a.domain.which]+"quest_wrapper_"+L.attr("id").replace(a.domain.id[a.domain.which]+"meta_quest_","")+"']",a.C).css("display","block")});n.getItem("enableTitles",f)&&S.Gb();var c=n.getItem("WhyQuest",
"Manual");b===f&&c!=="Manual"&&j.setItem("AutoQuest",a.ra());var d=0,g=0,h=i(),l=i();if(a.Ha("demi_quest_on.gif")){a.Nf($u.isString(b)?b:undefined);i("div[id*='"+a.domain.id[a.domain.which]+"symbol_tab_symbolquests']",a.C).unbind("click",a.xe).bind("click",a.xe);l=i("div[id*='symbol_displaysymbolquest']",a.C);$u.hasContent(l)||$u.warn("Failed to find symbol_displaysymbolquest");l.each(function(){h=i(this);if(h.css("display")!=="none")return M;return f})}else h=i(document.body);l=i("div[class*='quests_background']",
h);if(!$u.hasContent(l)){$u.warn("Failed to find quests_background");return M}var m=M,k=M,o="";o=n.getItem("QuestSubArea","Land of Fire");k=a.nf(o);$u.log(2,"Is quest area",o,k);if(k&&c!=="Manual"&&n.getItem("GetOrbs",M)){if($u.hasContent(i("input[alt='Perform Alchemy']")))m=f;else if(o&&a.La[o].db)m=Q.zh(a.La[o].db);$u.log(2,"Have Orb for",o,m);m&&a.qe(j.getItem("AutoQuest",a.ra()).name)&&j.setItem("AutoQuest",a.ra())}var r={name:"",click:i(),tr:i(),$b:i(),md:M};i("div[class='autoquest']",a.C).remove();
var s=/\+(\d+)/,v=/(\d+)\s+energy/i,B=/\$([0-9,]+)\s*-\s*\$([0-9,]+)/i,G=/\$([0-9,]+)mil\s*-\s*\$([0-9,]+)mil/i,A=/(\d+)%/;l.each(function(){h=i(this);a.la=a.cg(h);if(!a.la)return f;var L=ea,y=ea,O=ea,T="",H=[];H="";if((H=(T=h.text())?T.match(s):[])&&H.length===2)O=H[1]?H[1].R():0;else{H=i("div[class='quest_experience']",a.C);if($u.hasContent(H))O=(H=H.text())?H.R():0;else $u.warn("Can't find experience for",a.la)}H=a.la.indexOf("<br>");if(H>=0)a.la=a.la.substring(0,H);if((H=T.match(v))&&H.length===
2)y=H[1]?H[1].R():0;else{H=i("div[class*='quest_req']",h);if($u.hasContent(H))y=i("b",H).eq(0).text().R()}if(!y){$u.warn("Can't find energy for",a.la);return f}var P=[];P=H=0;if((P=T?T.stripHtmlJunk().match(B):[])&&P.length===3){H=P[1]?P[1].R():0;P=P[2]?P[2].R():0;L=(H+P)/2}else if((P=T?T.stripHtmlJunk().match(G):[])&&P.length===3){H=P[1]?P[1].R()*1E6:0;P=P[2]?P[2].R()*1E6:0;L=(H+P)/2}else $u.warn("No money found for",a.la,T);H=i("input[name*='Do Quest']",h);if(!$u.hasContent(H)){$u.warn("No button found for",
a.la);return f}P=-1;if(a.qe(a.la))P=$u.hasContent(i("div[class='quests_background_sub']",a.C))?100:0;else{var U=T.match(A);if(U&&U.length===2)P=U[1]?U[1].parseInt():0;else $u.warn("Influence div not found.",U)}P<0&&$u.warn("No influence found for",a.la,T);T="none";U=i();if(P>=0&&P<100){U=i("div[class*='quest_act_gen']",h);if($u.hasContent(U)){U=i("img[src*='jpg']",U);if($u.hasContent(U))T=U.attr("title")}}var F="subquest";if(h.attr("class")==="quests_background")F="primary";else if(h.attr("class")===
"quests_background_special")F="boss";a.mg(h,y,L,O,H);$u.log(9,"QuestSubArea",o);if(k){if(n.getItem("GetOrbs",M)&&F==="boss"&&c!=="Manual"&&!m){a.hc("name",a.la);b=f;r.md=f}switch(c){case "Advancement":if(P>=0){if(!j.getItem("AutoQuest",a.ra()).name&&F==="primary"&&P<100){a.hc("name",a.la);b=f}}else $u.warn("Can't find influence for",a.la,P);break;case "Max Influence":if(P>=0){if(!j.getItem("AutoQuest",a.ra()).name&&P<100){a.hc("name",a.la);b=f}}else $u.warn("Can't find influence for",a.la,P);break;
case "Max Experience":g=Math.floor(O/y*100)/100;if(d<g){a.hc("name",a.la);b=f}break;case "Max Gold":g=Math.floor(L/y*10)/10;if(d<g){a.hc("name",a.la);b=f}}if(k&&j.getItem("AutoQuest",a.ra()).name===a.la){d=g;L=O/(y?y:1);$u.log(2,"Setting AutoQuest",a.la);O=a.ra();O.name=a.la;O.energy=y;O.general=T;O.expRatio=L;j.setItem("AutoQuest",O);$u.log(4,"CheckResults_quests",j.getItem("AutoQuest",a.ra()));a.lc();r.name=a.la;r.click=H;r.tr=h;r.$b=U}}return f});if(b){if(j.getItem("AutoQuest",a.ra()).name){a.lc();
return r}if((c==="Max Influence"||c==="Advancement")&&n.getItem("switchQuestArea",f)){$u.log(9,"QuestSubArea",o);if(o&&a.La[o]&&a.La[o].next){o=n.setItem("QuestSubArea",a.La[o].next);if(a.La[o].area&&a.La[o].list){n.setItem("QuestArea",a.La[o].area);a.Va("QuestSubArea",a[a.La[o].list])}}else{$u.log(1,"Setting questing to manual");a.yb()}$u.log(2,"UpdateQuestGUI: Setting drop down menus");a.Eb("QuestArea",n.getItem("QuestArea","Quest"));a.Eb("QuestSubArea",o);return M}$u.log(1,"Finished QuestArea.");
a.yb()}return M}catch(w){$u.error("ERROR in CheckResults_quests: "+w);a.yb();return M}},Jd:{quests_stage_1:"Land of Fire",quests_stage_2:"Land of Earth",quests_stage_3:"Land of Mist",quests_stage_4:"Land of Water",quests_stage_5:"Demon Realm",quests_stage_6:"Undead Realm",quests_stage_7:"Underworld",quests_stage_8:"Kingdom of Heaven",quests_stage_9:"Ivory City",quests_stage_10:"Earth II",quests_stage_11:"Water II",symbolquests_stage_1:"Ambrosia",symbolquests_stage_2:"Malekus",symbolquests_stage_3:"Corvintheus",
symbolquests_stage_4:"Aurora",symbolquests_stage_5:"Azeron",monster_quests_stage_1:"Atlantis"},nf:function(b){try{var c=M;if(a.p.level<8){if(a.Ha("quest_back_1.jpg"))c=f}else if(b&&a.La[b])if($u.hasContent(i("div[class='"+a.La[b].Ja+"']",a.C)))c=f;return c}catch(d){$u.error("ERROR in CheckCurrentQuestArea: "+d);return M}},cg:function(b){try{var c=i("div[class*='quest_desc'],div[class*='quest_sub_title']",b),d=i();if(!$u.hasContent(c)){$u.log(2,"Can't find quest description or sub-title");return M}if(/LOCK/.test(c.html())){$u.log(2,
"Quest locked",c);return M}d=i("b",c).eq(0);if(!$u.hasContent(d)){$u.warn("Can't get bolded member out of",c.html());return M}a.la=d.text().trim();if(!$u.hasContent(a.la)){$u.warn("No quest name for this row");return M}return a.la}catch(g){$u.error("ERROR in GetQuestName: "+g);return M}},Dd:function(b,c,d){try{if(!a.p.energy||!b)return M;if(c==="Energy Available"||c==="Not Fortifying"){if(a.p.energy.num>=b)return f;if(d)a.u(d,"Waiting for more energy: "+a.p.energy.num+"/"+(b?b:""))}else if(c==="At X Energy"){if(a.Ra()&&
a.p.energy.num>=b){d&&a.u(d,"Burning all energy to level up");return f}var g=n.getItem("XQuestEnergy",1);a.p.energy.num>=g&&j.setItem("AtXQuestEnergy",f);if(a.p.energy.num>=b)if(j.getItem("AtXQuestEnergy",M)&&a.p.energy.num>=n.getItem("XMinQuestEnergy",0)){a.u(d,"At X energy. Burning to "+n.getItem("XMinQuestEnergy",0));return f}else j.setItem("AtXQuestEnergy",M);if(b>g)g=b;d&&a.u(d,"Waiting for X energy: "+a.p.energy.num+"/"+g)}else if(c==="At Max Energy"){var h=a.p.energy.max,l=n.getItem("IdleGeneral",
"Use Current");if(l!=="Use Current")h=x.Od(l);if(l!=="Use Current"&&!h){$u.log(2,"Changing to idle general to get Max energy");if(x.qa("IdleGeneral"))return f}if(a.p.energy.num>=h)return f;if(a.Ra()&&a.p.energy.num>=b){if(d){$u.log(1,"Burning all energy to level up");a.u(d,"Burning all energy to level up")}return f}d&&a.u(d,"Waiting for max energy: "+a.p.energy.num+"/"+h)}return M}catch(m){$u.error("ERROR in CheckEnergy: "+m);return M}},lg:function(b){try{var c=b.target.getElementsByTagName("span"),
d=i();b="";var g={};c.length<=0&&e("what did we click on?");g=a.ra();g.name=c[0].innerHTML;g.energy=c[1].innerHTML.parseInt();a.yb(g);$u.log(5,"LabelListener",c,j.getItem("AutoQuest"));if(a.p.level<8&&a.Ha("quest_back_1.jpg")){n.setItem("QuestArea","Quest");n.setItem("QuestSubArea","Land of Fire")}else{if(a.Ha("tab_quest_on.gif")){n.setItem("QuestArea","Quest");a.Eb("QuestArea","Quest");a.Va("QuestSubArea",a.hd)}else if(a.Ha("demi_quest_on.gif")){n.setItem("QuestArea","Demi Quests");a.Eb("QuestArea",
"Demi Quests");a.Va("QuestSubArea",a.$c)}else if(a.Ha("tab_atlantis_on.gif")){n.setItem("QuestArea","Atlantis");a.Eb("QuestArea","Atlantis");a.Va("QuestSubArea",a.Vc)}d=i("#"+a.domain.id[a.domain.which]+"main_bn",a.C);if($u.hasContent(d)){b=d.attr("class");$u.hasContent(b)&&a.Jd[b]&&n.setItem("QuestSubArea",a.Jd[b])}}$u.log(1,"Setting QuestSubArea to",n.getItem("QuestSubArea","Land Of Fire"));a.Eb("QuestSubArea",n.getItem("QuestSubArea","Land Of Fire"));a.lc();a.Ic();return f}catch(h){$u.error("ERROR in LabelListener: "+
h);return M}},mg:function(b,c,d,g,h){try{if(!$u.hasContent(i("div[class='autoquest'",b))){b={};b=document.createElement("div");b.className="autoquest";b.style.fontSize="10px";b.innerHTML="$ per energy: "+Math.floor(d/c*10)/10+"<br />Exp per energy: "+Math.floor(g/c*100)/100+"<br />";if(j.getItem("AutoQuest",a.ra()).name===a.la){var l=document.createElement("b");l.innerHTML="Current auto quest";b.appendChild(l)}else{var m=document.createElement("a");m.innerHTML="Auto run this quest.";m.Bi=a.la;var k=
document.createElement("span");k.innerHTML=a.la;k.style.display="none";m.appendChild(k);var o=document.createElement("span");o.innerHTML=c;o.style.display="none";m.appendChild(o);m.addEventListener("click",a.lg,M);b.appendChild(m)}b.style.position="absolute";b.style.background="#B09060";b.style.right="144px";h.parent().before(b)}}catch(r){$u.error("ERROR in LabelQuests: "+r)}},dh:{energy:1,attack:2,defense:3,health:4,stamina:5},jf:function(b){var c=0,d=0,g=M;if(/Please come back in:/.test(b)){c=b.regex(/(\d+) hour/);
c=$u.isNumber(c)?c:3;d=b.regex(/(\d+) minute/);d=$u.isNumber(d)?d:0;g=f}else if(/You have paid tribute to/.test(b)){c=/Azeron/i.test(b)?48:12;g=f}if(g){$u.log(2,"Recorded Blessing Time. Scheduling next click! "+c+":"+d);u.setItem("BlessingTimer",(c*60+d)*60,300)}},af:function(){var b=i(),c="";c=n.getItem("AutoBless","none").toLowerCase();if(c==="none"||!u.aa("BlessingTimer"))return M;if(a.Q("quests,demi_quest_off","demi_quest_bless"))return f;b=i("img[src*='deity_"+c+"']",a.C);if(!$u.hasContent(b)){$u.warn("No diety pics for deity",
c);return M}if(b.css("height")!=="160px")return a.Q("deity_"+c);b=i("form[id*='"+a.domain.id[a.domain.which]+"symbols_form_"+a.dh[c]+"']",a.C);if(!$u.hasContent(b)){$u.warn("No form for deity blessing.");return M}b=a.Wa("demi_quest_bless",b);if(!$u.hasContent(b)){$u.warn("No image for deity blessing.");return M}$u.log(1,"Click deity blessing for ",c);u.setItem("BlessingTimer",3600,300);a.ca(b);return f},Pb:function(){this.data={row:i(),name:"",income:0,cost:0,totalCost:0,owned:0,maxAllowed:0,buy:0,
roi:0,set:0,last:0}},ub:{},Ib:{},Jf:function(){try{var b={},c=i(),d=i(),g="",h=i(),l=i(),m=0,k=[],o="",r=0,s={},v=0,B=i(),G=i(),A=i(),w=0,L=0,y=0,O=[1,5,10],T=function(P,U,F){try{F=F?F:"Buy";var Z=i();Z=i("select",P);if($u.hasContent(Z))if(F==="Buy")Z.length===2&&Z.eq(0).val(U);else Z.eq(0).val(U);else $u.warn(F+" select not found!")}catch(fa){$u.error("ERROR in SelectLands: "+fa)}};a.ub=j.setItem("BestLandCost",(new a.Pb).data);a.Ib={};c=i("tr[class*='land_buy_row']",a.C);if(!$u.hasContent(c)){$u.warn("Can't find land_buy_row");
return M}c.each(function(){d=i(this);if(!$u.hasContent(d))return f;T(d,10);G=i("div[class*='land_buy_info']",d);if(!$u.hasContent(G)){$u.warn("Can't find land_buy_info");return f}A=i("strong",G);if(!$u.hasContent(A)){$u.warn("Can't find strong");return f}g=A.eq(0).text().trim();if(!$u.hasContent(g)){$u.warn("Can't find land name");return f}h=i("strong[class*='gold']",d);if(!$u.hasContent(h)||h.length<2){$u.warn("Can't find 2 gold instances");return f}k=[];h.each(function(){l=i(this);if(l.attr("class").hasIndexOf("label")){l=
m.parent();o=(o=l.text())?o.regex(/([\d,]+)/):"";if(!o){$u.warn("Cannot find income for ",g,o);return f}}else o=l.text();m=o?o.R():0;k.push(m);return f});m=k[0]?k[0]:0;r=k[1]?k[1]:0;if(!m||!r){$u.warn("Can't find income or cost for",g);return f}if(m>r){m=k[1]?k[1]:0;r=k[0]?k[0]:0}w=(o=(o=G.text())?o.match(/:\s+\d+/i).toString().trim().replace(/:\s+/,""):"")?o.parseInt():0;B=i("div[class*='land_buy_costs']",d);L=(o=(o=B.text())?o.match(/:\s+\d+/i).toString().trim().replace(/:\s+/,""):"")?o.parseInt():
0;s=new a.Pb;s.data.row=d;s.data.name=g;s.data.income=m;s.data.cost=r;s.data.maxAllowed=w;s.data.owned=L;s.data.buy=w-L>10?10:w-L;s.data.totalCost=s.data.buy*r;y=(m/r*24E4/100).dp(2);if(!$u.hasContent(i("input[name='Buy']",d))){y=0;for(v=2;v>=0;v-=1)if(s.data.owned-s.data.maxAllowed>=O[v]){a.Ib=s.data;T(d,O[v],"Sell");break}}s.data.roi=y?y:0;B=i("strong",G);o=B.eq(0).text();B.eq(0).text(o+" | "+s.data.roi+"% per day.");$u.log(4,"Land:",s.data.name);if(s.data.roi>0&&s.data.roi>a.ub.roi){$u.log(4,"Set Land:",
s.data.name,s.data);a.ub=i.extend(f,{},s.data)}return f});i.extend(f,b,a.ub);delete b.row;b.set=f;b.last=(new Date).getTime();j.setItem("BestLandCost",b);$u.log(2,"Best Land Cost: ",b.name,b.cost,b);return f}catch(H){$u.error("ERROR in CheckResults_land: "+H);return M}},re:f,ng:function(){try{if(!n.getItem("autoBuyLand",M))return M;var b={},c=0,d=0,g="",h=function(m,k){try{k=k?k:"Buy";var o=i("input[name='"+k+"']",m.row);if($u.hasContent(o)){if(k==="Buy")a.ub=j.setItem("BestLandCost",(new a.Pb).data);
else a.Ib={};a.ca(o,15E3);return f}else{$u.warn(k+" button not found!");return M}}catch(r){$u.error("ERROR in BuySellLand: "+r);return M}};if(!i.isEmptyObject(a.Ib)&&n.getItem("SellLands",M)){$u.log(2,"Selling land",a.Ib.name);h(a.Ib,"Sell");return f}b=j.getItem("BestLandCost",(new a.Pb).data);if(!b.set){$u.log(2,"Going to land to get Best Land Cost");if(a.Q("soldiers,land",a.Ha("tab_land_on.gif")?"":"tab_land_on.gif"))return f}if(b.cost===0){if(a.re){$u.log(2,"No lands to purchase");a.re=M}return M}if(!a.p.gold.bank&&
a.p.gold.bank!==0){$u.log(2,"Going to keep to get Stored Value");if(a.Q("keep"))return f}c=a.p.gold.cash+(a.p.gold.bank-n.getItem("minInStore",0));d=b.buy*b.cost;g=n.getItem("IdleGeneral","Use Current");if(c>=d&&a.p.gold.cash<d){if(g!=="Use Current"){$u.log(2,"Changing to idle general");if(x.qa("IdleGeneral"))return f}$u.log(2,"Trying to retrieve",d-a.p.gold.cash);return a.kc(d-a.p.gold.cash)}if(b.cost&&a.p.gold.cash>=d){if(g!=="Use Current"){$u.log(2,"Changing to idle general");if(x.qa("IdleGeneral"))return f}a.Q("soldiers,land");
if(a.Ha("tab_land_on.gif")){if(b.buy){$u.log(2,"Buying land",a.ub.name);if(h(a.ub))return f}}else return a.Q("soldiers,land")}return M}catch(l){$u.error("ERROR in Lands: "+l);return M}},Fd:function(){try{if(!u.aa("keep"))return M;$u.log(2,"Visiting keep to get stats");return a.Q("keep","tab_stats_on.gif")}catch(b){$u.error("ERROR in CheckKeep: "+b);return M}},qf:function(){try{if(!u.aa("oracle"))return M;$u.log(2,"Checking Oracle for Favor Points");return a.Q("oracle","oracle_on.gif")}catch(b){$u.error("ERROR in CheckOracle: "+
b);return M}},lf:function(){try{if(!u.aa("battlerank")||a.p.level<8)return M;$u.log(2,"Visiting Battle Rank to get stats");return a.Q("battle,battlerank","tab_battle_rank_on.gif")}catch(b){$u.error("ERROR in CheckBattleRank: "+b);return M}},Sf:function(){try{if(!u.aa("warrank")||a.p.level<100)return M;$u.log(2,"Visiting War Rank to get stats");return a.Q("battle,war_rank","tab_war_on.gif")}catch(b){$u.error("ERROR in CheckWar: "+b);return M}},Ed:function(){try{if(!u.aa("generals"))return M;$u.log(2,
"Visiting generals to get 'General' list");return a.Q("mercenary,generals","tab_generals_on.gif")}catch(b){$u.error("ERROR in CheckGenerals: "+b);return M}},Qf:function(){try{if(!u.aa("soldiers"))return M;$u.log(2,"Checking Soldiers");return a.Q("soldiers","tab_soldiers_on.gif")}catch(b){$u.error("ERROR in CheckSoldiers: "+b);return M}},pf:function(){try{if(!u.aa("item"))return M;$u.log(2,"Checking Item");return a.Q("soldiers,item","tab_black_smith_on.gif")}catch(b){$u.error("ERROR in CheckItem: "+
b);return M}},Gd:function(){try{if(!u.aa("magic"))return M;$u.log(2,"Checking Magic");return a.Q("soldiers,magic","tab_magic_on.gif")}catch(b){$u.error("ERROR in CheckMagic: "+b);return M}},kf:function(){try{if(!u.aa("achievements"))return M;$u.log(2,"Visiting achievements to get stats");return a.Q("keep,achievements","tab_achievements_on.gif")}catch(b){$u.error("ERROR in CheckAchievements: "+b);return M}},Rf:function(){try{if(!u.aa("symbolquests")||a.p.level<8)return M;$u.log(2,"Visiting symbolquests to get 'Demi-Power' points");
return a.Q("quests,symbolquests","demi_quest_on.gif")}catch(b){$u.error("ERROR in CheckSymbolQuests: "+b);return M}},mf:function(){try{if(!u.aa("view_class_progress")||a.p.level<100)return M;$u.log(2,"Checking Monster Class to get Character Class Stats");return a.Q("battle_monster,view_class_progress","nm_class_whole_progress_bar.jpg")}catch(b){$u.error("ERROR in CheckCharacterClasses: "+b);return M}},oi:function(){try{if(!u.aa("gift"))return M;$u.log(2,"Checking Gift");return a.Q("army,gift","tab_gifts_on.gif")}catch(b){$u.error("ERROR in CheckGift: "+
b);return M}},hf:function(b){try{if(I.oe(b))return f;var c=ea,d=i(),g=i();c=a.Wa(I.Ia.Freshmeat[n.getItem("BattleType","Invade")]);if($u.hasContent(c)){d=c.parent().parent();if($u.hasContent(d)){g=i("input[name='target_id']",d);if($u.hasContent(g)){g.attr("value",b);j.setItem("lastBattleID",b);I.click(c);j.setItem("notSafeCount",0);return f}else $u.warn("target_id not found in battleForm")}else $u.warn("form not found in battleButton")}else $u.warn("battleButton not found");return M}catch(h){$u.error("ERROR in BattleUserId: "+
h);return M}},ee:f,Ad:function(b){try{var c="",d="",g="",h="",l=0,m="",k=ea,o="",r=0,s="",v="",B="",G="",A={},w=0;if(a.p.level<8){if(a.ee){$u.log(1,"Battle: Unlock at level 8");a.ee=M}return M}c=n.getItem("WhenBattle","Never");v=n.getItem("WhenMonster","Never");s=j.getItem("targetFrombattle_monster","");j.getItem("targetFromraid","");switch(c){case "Never":a.u("battle_mess","Battle off");return M;case "Stay Hidden":if(!a.Wd()){a.u("battle_mess","We Dont Need To Hide Yet");$u.log(1,"We Dont Need To Hide Yet");
return M}break;case "No Monster":if(b!=="DemiPoints")if(v!=="Never"&&s&&!/the deathrune siege/i.test(s))return M;break;case "Demi Points Only":if(b==="DemiPoints"&&v==="Never")return M;if(b!=="DemiPoints"&&v!=="Never"&&s&&!/the deathrune siege/i.test(s))return M;if(I.qd(f)||n.getItem("DemiPointsFirst",M)&&v!=="Never"&&n.getItem("observeDemiFirst",M)&&j.getItem("DemiPointsDone",M))return M}if(a.Fd())return f;if(a.p.health.num<10){$u.log(5,"Health is less than 10: ",a.p.health.num);return M}if(n.getItem("waitSafeHealth",
M)&&a.p.health.num<13){$u.log(5,"Unsafe. Health is less than 13: ",a.p.health.num);return M}d=I.vh(b);$u.log(5,"Mode/Target",b,d);if(d)$u.isNumber(d)||(d=d.toLowerCase());else{$u.log(1,"No valid battle target");return M}if(d==="noraid"){$u.log(5,"No Raid To Attack");return M}g=n.getItem("BattleType","Invade");switch(g){case "Invade":h="InvadeGeneral";l=d==="raid"?j.getItem("RaidStaminaReq",1):1;m="battle_invade_again.gif";if(x.Lb(h)){h="LevelUpGeneral";$u.log(3,"Using level up general")}break;case "Duel":h=
"DuelGeneral";l=d==="raid"?j.getItem("RaidStaminaReq",1):1;m="battle_duel_again.gif";if(x.Lb(h)){h="LevelUpGeneral";$u.log(3,"Using level up general")}break;case "War":h="WarGeneral";l=10;m="battle_duel_again.gif";if(x.Lb(h)){h="LevelUpGeneral";$u.log(3,"Using level up general")}break;default:$u.warn("Unknown battle type ",g);return M}if(!a.Jc("Battle",l)){$u.log(3,"Not enough stamina for ",g,l);return M}if($u.hasContent(i("#"+a.domain.id[a.domain.which]+"results_main_wrapper img[src*='battle_victory.gif']",
a.C))){k=a.Wa(m);r=j.getItem("BattleChainId",0);if($u.hasContent(k)&&r){a.u("battle_mess","Chain Attack In Progress");$u.log(2,"Chaining Target",r);I.click(k);j.setItem("BattleChainId",0);return f}j.setItem("BattleChainId",0)}j.getItem("notSafeCount",0)||j.setItem("notSafeCount",0);$u.log(2,"Battle Target",d);B=n.getItem("TargetType","Invade");switch(d){case "raid":if(!u.aa("RaidNoTargetDelay")){G=((u.getItem("RaidNoTargetDelay").next-(new Date).getTime())/1E3).dp()+" secs";$u.log(2,"Rejoining the raid in",
G);a.u("battle_mess","Joining the Raid in "+G);return M}if(x.qa(h))return f;a.u("battle_mess","Joining the Raid");if(a.Q(a.zb+",raid","tab_raid_on.gif"))return f;if(n.getItem("clearCompleteRaids",M)&&p.Xa.raid.button&&p.Xa.raid.name){a.ca(p.Xa.raid.button);p.deleteItem(p.Xa.raid.name);p.Xa.raid={name:undefined,button:undefined};a.na(f);$u.log(1,"Cleared a completed raid");return f}o=j.getItem("targetFromraid","");if(!$u.hasContent(i("div[style*='dragon_title_owner']",a.C))){k=p.Ob[o];if($u.hasContent(k)){a.ca(k);
return f}$u.warn("Unable to engage raid",o);return M}if(p.Nd(o))return f;if(B==="Userid List"){if(I.tc("Raid")){$u.hasContent(i("span[class*='result_body']",a.C))&&I.Bb();if(j.getItem("notSafeCount",0)>10){j.setItem("notSafeCount",0);I.Bb()}return f}$u.warn("Doing Raid UserID list, but no target");return M}return I.tc("Raid");case "freshmeat":if(x.qa(h))return f;if(a.Q(a.zb,"battle_on.gif"))return f;a.u("battle_mess","Battling "+d);if(B==="Userid List"){if(I.tc("Freshmeat")){$u.hasContent(i("span[class*='result_body']",
a.C))&&I.Bb();if(j.getItem("notSafeCount",0)>10){j.setItem("notSafeCount",0);I.Bb()}return f}$u.warn("Doing Freshmeat UserID list, but no target");return M}return I.tc("Freshmeat");default:if(!n.getItem("IgnoreBattleLoss",M)){A=I.getItem(d);switch(n.getItem("BattleType","Invade")){case "Invade":w=A.Ah?A.Ah:w;break;case "Duel":w=A.jh?A.jh:w;break;case "War":w=A.mi?A.mi:w;break;default:$u.warn("Battle type unknown!",n.getItem("BattleType","Invade"))}if(A&&A.Ai!==""&&!u.ya(w,604800)){$u.log(1,"Avoiding Losing Target",
d);I.Bb();return f}}if(x.qa(h))return f;if(a.Q(a.zb,"battle_on.gif"))return f;if(a.hf(d)){I.Bb();return f}$u.warn("Doing default UserID list, but no target");return M}}catch(L){$u.error("ERROR in Battle: "+L);return M}},Cf:function(){try{var b="",c=i(),d="",g=[],h=M;b=i("#"+a.domain.id[a.domain.which]+"guild_achievement",a.C).text().trim().innerTrim();if($u.hasContent(b)){d=b.regex(/Monster ([\d,]+)/);a.p.guild.mPoints=$u.hasContent(d)?$u.isString(d)?d.R():d:0;d=b.regex(/Battle ([\d,]+)/);a.p.guild.bPoints=
$u.hasContent(d)?$u.isString(d)?d.R():d:0;d=b.regex(/Monster [\d,]+ points \(Top (\d+\-\d+%)\)/);a.p.guild.mRank=$u.hasContent(d)?d:"";d=b.regex(/Battle [\d,]+ points \(Top (\d+\-\d+%)\)/);a.p.guild.bRank=$u.hasContent(d)?d:"";h=f}else $u.warn("Using stored guild Monster and Battle points.");b=i("#"+a.domain.id[a.domain.which]+"guild_blast input[name='guild_id']",a.C).attr("value");if($u.hasContent(b)){a.p.guild.id=b;h=f}else $u.warn("Using stored guild_id.");b=i("#"+a.domain.id[a.domain.which]+"guild_banner_section",
a.C).text().trim();if($u.hasContent(b)){a.p.guild.name=b;h=f}else $u.warn("Using stored guild name.");c=i("#"+a.domain.id[a.domain.which]+"cta_log div[style*='guild_main_score_middle'] a[href*='keep.php?casuser']",a.C);if($u.hasContent(c)){c.each(function(){var m=i(this),k=m.attr("href").regex(/casuser=(\d+)/);m=m.text().trim();k!==a.p.FBID&&g.push({userId:k,name:m})});a.p.guild.members=g.slice();h=f}else $u.warn("Using stored guild member count.");$u.log(2,"CheckResults_guild",a.p.guild);h&&a.fb();
return f}catch(l){$u.error("ERROR in CheckResults_guild: "+l);return M}},Ef:function(){try{var b=i();if((b=i("img[src*='guild_symbol']"))&&b.length)b.each(function(){$u.log(5,"name",i(this).parent().parent().next().text().trim());$u.log(5,"button",i(this).parent().parent().parent().next().find("input[src*='dragon_list_btn_']"))});else return M;return f}catch(c){$u.error("ERROR in CheckResults_guild_current_battles: "+c);return M}},eg:function(){try{if(!u.aa("guildMonsterReview")||n.getItem("WhenGuildMonster",
"Never")==="Never")return M;if(!a.p.guild.id){$u.log(2,"Going to guild to get Guild Id");if(a.Q("guild"))return f}var b={},c="",d="";if(j.getItem("guildMonsterBattlesRefresh",f))if(E.Lh())return f;if(!j.getItem("guildMonsterBattlesReview",M)){if(E.Kh())return f;j.setItem("guildMonsterBattlesReview",f)}if((b=E.sh())&&i.isPlainObject(b)&&!i.isEmptyObject(b)){$u.log(1,"Reviewing Slot ("+b.slot+") Name: "+b.name);if(a.p.staminaT.num>0&&n.getItem("doGuildMonsterSiege",f))d="&action=doObjective";c="guild_battle_monster.php?twt2="+
E.info[b.name].Jb+"&guild_id="+b.guildId+d+"&slot="+b.slot+"&ref=nf";j.setItem("guildMonsterReviewSlot",b.slot);a.Ka(c);return f}u.setItem("guildMonsterReview",J.getItem("guildMonsterReviewMins",60,f)*60,300);j.setItem("guildMonsterBattlesRefresh",f);j.setItem("guildMonsterBattlesReview",M);j.setItem("guildMonsterReviewSlot",0);E.select(f);$u.log(1,"Done with guild monster review.");return M}catch(g){$u.error("ERROR in GuildMonsterReview: "+g);return M}},Ff:function(){try{a.C.find("input[src*='dragon_list_btn_']").bind("click",
a.uc);E.populate();return f}catch(b){$u.error("ERROR in CheckResults_guild_current_monster_battles: "+b);return M}},Df:function(){try{a.C.find("input[src*='guild_duel_button']").bind("click",a.uc);E.Nh();n.getItem("enableTitles",f)&&S.Gb();return f}catch(b){$u.error("ERROR in CheckResults_guild_battle_monster: "+b);return M}},dg:function(){try{var b="",c={},d={},g=i(),h=i(),l="",m=0,k=0;b=n.getItem("WhenGuildMonster","Never");if(b==="Never")return M;if(!a.p.guild.id){$u.log(2,"Going to guild to get Guild Id");
if(a.Q("guild"))return f}if(n.getItem("doClassicMonstersFirst",M)&&n.getItem("WhenMonster","Never")!=="Never"){if(n.getItem("DemiPointsFirst",M)&&!I.qd())return M;if(j.getItem("targetFrombattle_monster","")||j.getItem("targetFromraid",""))return M}if(a.Ra()){if(a.p.staminaT.num<5){a.u("guild_monster_mess","Guild Monster stamina "+a.p.staminaT.num+"/5");return M}}else if(b==="Stamina Available"){k=j.getItem("staminaGuildMonster",0);if(a.p.staminaT.num<k){a.u("guild_monster_mess","Guild Monster stamina "+
a.p.staminaT.num+"/"+k);return M}j.setItem("staminaGuildMonster",0);if((c=j.getItem("targetGuildMonster",{}))&&i.isPlainObject(c)&&!i.isEmptyObject(c))if((d=E.cc(c))&&i.isPlainObject(d)&&!i.isEmptyObject(d)){k=E.uh(c,d);j.setItem("staminaGuildMonster",k);if(a.p.staminaT.num<k){a.u("guild_monster_mess","Guild Monster stamina "+a.p.staminaT.num+"/"+k);return M}}else return M;else return M}else if(b==="At X Stamina"){a.p.staminaT.num>=n.getItem("MaxStaminaToGMonster",20)&&j.setItem("guildMonsterBattlesBurn",
f);if(a.p.staminaT.num<=n.getItem("MinStaminaToGMonster",0)||a.p.staminaT.num<1)j.setItem("guildMonsterBattlesBurn",M);if(!j.getItem("guildMonsterBattlesBurn",M)){a.u("guild_monster_mess","Guild Monster stamina "+a.p.staminaT.num+"/"+n.getItem("MaxStaminaToGMonster",20));return M}}else if(b==="At Max Stamina")if(a.p.staminaT.num<a.p.stamina.max||a.p.staminaT.num<1){a.u("guild_monster_mess","Guild Monster stamina "+a.p.staminaT.num+"/"+a.p.stamina.max);return M}a.u("guild_monster_mess","");if((c=E.select(f))&&
i.isPlainObject(c)&&!i.isEmptyObject(c)){if(x.qa("GuildMonsterGeneral"))return f;if(!E.Ng(c)){$u.log(2,"Fighting Slot ("+c.slot+") Name: "+c.name);a.u("guild_monster_mess","Fighting ("+c.slot+") "+c.name);l="guild_battle_monster.php?twt2="+E.info[c.name].Jb+"&guild_id="+c.guildId+"&slot="+c.slot;a.Ka(l);return f}if((d=E.cc(c))&&i.isPlainObject(d)&&!i.isEmptyObject(d)){$u.log(2,"Fighting target_id ("+d.target_id+") Name: "+d.name);a.u("guild_monster_mess","Fighting ("+d.target_id+") "+d.name);if((h=
i("#"+a.domain.id[a.domain.which]+"attack_key_"+d.target_id))&&h.length){m=E.lh(c,d);if(!m)return M;h.attr("value",m);if((g=h.parents("form").eq(0))&&g.length){a.ca(g.find("input[src*='guild_duel_button2.gif'],input[src*='monster_duel_button.gif']"));return f}}}}return M}catch(o){$u.error("ERROR in GuildMonster: "+o);return M}},Ye:function(){try{if(!u.aa("ArenaReview")||n.getItem("WhenArena","Never")==="Never")return M;if(j.getItem("ArenaRefresh",f))if(V.kd())return f;if(!j.getItem("ArenaReview",
M)){if(V.wc())return f;j.setItem("ArenaReview",f)}j.setItem("ArenaRefresh",f);j.setItem("ArenaReview",M);$u.log(1,"Done with Arena review.");return M}catch(b){$u.error("ERROR in ArenaReview: "+b);return M}},tf:function(){try{a.C.find("input[src*='battle_enter_battle']").bind("click",a.Zb);V.Lg();return f}catch(b){$u.error("ERROR in CheckResults_arena: "+b);return M}},uf:function(){try{a.C.find("input[src*='monster_duel_button']").each(function(c){i(this).attr("id",c).bind("click",a.ce)});V.Mh();return f}catch(b){$u.error("ERROR in CheckResults_arena_battle: "+
b);return M}},Xe:function(){try{var b="",c={},d={},g=i(),h=i(),l=i(),m="",k=0;b=n.getItem("WhenArena","Never");if(b==="Never")return M;c=V.getItem();m=c.reviewed&&c.nextTime?"Next Arena: "+$u.makeTime(c.reviewed+c.nextTime.Cb()*1E3,u.gc(f)):"";m=c.startTime?"Next Arena: "+c.startTime+" seconds":m;k=c.reviewed&&c.tokenTime&&c.state==="Alive"?(c.reviewed+c.tokenTime.Cb()*1E3-(new Date).getTime())/1E3:-1;k=k>=0?k.dp():0;m=k>=0&&c.state==="Alive"?"Next Token in: "+k+" seconds":m;a.u("arena_mess",m);if(!c||
!i.isPlainObject(c)||i.isEmptyObject(c)||j.getItem("ArenaJoined",M)){if(j.getItem("ArenaRefresh",f))if(V.kd())return f;if(!j.getItem("ArenaReview",M)){if(V.wc())return f;j.setItem("ArenaReview",f)}j.setItem("ArenaRefresh",f);j.setItem("ArenaReview",M);j.setItem("ArenaJoined",M);return M}if(c.tokens<=0||c.ticker.Cb()<=0&&c.state==="Ready"||a.p.stamina.num<20&&c.state==="Ready")return M;a.u("arena_mess","Entering Arena");if(x.qa("ArenaGeneral"))return f;if(!i("#"+a.domain.id[a.domain.which]+"arena_battle_banner_section").length){if(j.getItem("ArenaRefresh",
f))if(V.kd())return f;if(!j.getItem("ArenaReview",M)){if(V.wc())return f;j.setItem("ArenaReview",f)}j.setItem("ArenaRefresh",f);j.setItem("ArenaReview",M);l=i("input[src*='battle_enter_battle.gif']");$u.log(1,"Enter battle",c,l);if(c.tokens>0&&l&&l.length){V.Wg();a.ca(l);return f}}if((l=i("input[src*='guild_enter_battle_button.gif']"))&&l.length){$u.log(1,"Joining battle",a.p.stamina.num,c,l);if(a.p.stamina.num>=20&&c.tokens>0){j.setItem("ArenaJoined",f);a.ca(l);return f}return M}if(c.state!=="Alive")return M;
if((d=V.cc(c))&&i.isPlainObject(d)&&!i.isEmptyObject(d)){$u.log(2,"Fighting target_id ("+d.target_id+") Name: "+d.name);a.u("arena_mess","Fighting ("+d.target_id+") "+d.name);if((h=i("#"+a.domain.id[a.domain.which]+"attack_key_"+d.target_id))&&h.length)if((g=h.parents("form").eq(0))&&g.length){j.setItem("ArenaMinionAttacked",d);a.ca(g.find("input[src*='guild_duel_button2.gif'],input[src*='monster_duel_button.gif']"));return f}}return M}catch(o){$u.error("ERROR in Arena: "+o);return M}},Hd:function(){try{var b=
i("img[src*='dragon_list_btn_']",a.C),c="",d={},g=0,h=0,l="",m=[],k="",o="",r="",s=i(),v="",B=i("img[src*='mp_button_summon_']",a.C),G="",A=0;if(!$u.hasContent(B)&&!$u.hasContent(b)){$u.log(2,"No buttons found");return M}c=j.getItem("page","battle_monster");if(c==="battle_monster"&&!$u.hasContent(b)){$u.log(2,"No monsters to review");j.setItem("reviewDone",f);return f}G=b.eq(0).parent().attr("href");if((A=j.getItem("pageUserCheck",0))&&G&&!(RegExp("user="+a.p.FBID).test(G)||/alchemy\.php/.test(G))){$u.log(2,
"On another player's keep.",A);return M}g=0;for(h=b.length;g<h;g+=1)if((l=b.eq(g).parent().attr("href"))&&/user=/.test(l)&&(/mpool=/.test(l)||/raid\.php/.test(l))){s=b.eq(g).parents().eq(3);v=$u.setContent(s.text(),"").trim();r=v.replace(/Completed!/i,"").replace(/Fled!/i,"").trim();d=p.getItem(r);d.type=$u.setContent(d.type,p.type(r));d.page=c;o=$u.setContent(b.eq(g).attr("src"),"").regex(/(dragon_list_btn_\d)/i);switch(o){case "dragon_list_btn_2":d.status="Collect Reward";d.color="grey";break;case "dragon_list_btn_3":p.Ob[r]=
i(b.eq(g));break;case "dragon_list_btn_4":if(c==="raid"&&!/!/.test(v)){p.Ob[r]=i(b.eq(g));break}if(!p.Xa[c].button&&!p.Xa[c].name){p.Xa[c].name=r;p.Xa[c].button=a.Wa("cancelButton.gif",s)}d.status="Complete";d.color="grey"}d.userId=$u.setContent(l.regex(/user=(\d+)/),0);d.mpool=/mpool=\d+/.test(l)?"&mpool="+l.regex(/mpool=(\d+)/):"";k=p.info[d.type]&&p.info[d.type].ga?"&action=doObjective":"";d.link="<a href='"+a.domain.link+"/"+c+".php?casuser="+d.userId+d.mpool+k+"'>Link</a>";p.setItem(d)}for(g=
0;g<p.k.length;g+=1)p.k[g].page===""&&m.push(p.k[g].name);for(g=0;g<m.length;g+=1)p.deleteItem(m[g]);j.setItem("reviewDone",f);a.na(f);return f}catch(w){$u.error("ERROR in CheckResults_fightList: "+w);return M}},Id:function(){try{var b={},c=[],d=i(),g="",h=[],l=0,m="",k=0,o=0,r=0,s="",v=i(),B=0,G=0,A=0,w=M,L=M,y=0,O=M,T=M,H=M,P=0,U=0,F=0,Z=0,fa=0,K=i(),R=i(),Y=i(),ba={},ga={},W="",aa=M;I.ge();n.getItem("enableTitles",f)&&S.Gb();a.fe(a.oa,"#"+a.domain.id[a.domain.which]+"chat_log div[style*='hidden'] div[style*='320px']");
K=i("div[style*='dragon_title_owner']",a.oa);if($u.hasContent(K))g=$u.setContent(K.children(":eq(2)").text(),"").trim();else{K=i("div[style*='nm_top']",a.oa);if($u.hasContent(K)){g=$u.setContent(K.children(":eq(0)").children(":eq(0)").text(),"").trim();d=i("div[style*='nm_bars']",a.oa);if($u.hasContent(d))g+=" "+$u.setContent(d.children(":eq(0)").children(":eq(0)").children(":eq(0)").siblings(":last").children(":eq(0)").text(),"").trim().replace("'s Life","");else{$u.warn("Problem finding nm_bars");
return}}else{$u.warn("Problem finding dragon_title_owner and nm_top");return}}if($u.hasContent(K)&&$u.hasContent(i("img[uid='"+a.p.FBID+"']",K))){$u.log(2,"Your monster found",g);g=g.replace(/.+?'s /,"Your ")}$u.log(2,"Monster name",g);b=p.getItem(g);if(b.type==="")b.type=p.type(b.name);if(b.type==="Siege"||b.type.hasIndexOf("Raid")){d=i("div[style*='raid_back']",a.oa);if($u.hasContent(d))if($u.hasContent(i("img[src*='raid_1_large.jpg']",d)))b.type="Raid I";else if($u.hasContent(i("img[src*='raid_b1_large.jpg']",
d)))b.type="Raid II";else $u.hasContent(i("img[src*='raid_1_large_victory.jpg']",d))?$u.log(2,"Siege Victory!"):$u.log(2,"Problem finding raid image! Probably finished.");else{$u.warn("Problem finding raid_back");return}}ba=p.info[b.type];b.review=(new Date).getTime();j.setItem("monsterRepeatCount",0);d=i("#"+a.domain.id[a.domain.which]+"monsterTicker",a.oa);if($u.hasContent(d)){$u.log(4,"Monster ticker found");c=$u.setContent(d.text(),"").regex(/(\d+):(\d+):(\d+)/)}else a.Ha("dead.jpg")||$u.warn("Could not locate Monster ticker.");
if($u.hasContent(c)&&c.length===3&&ba&&ba.Ta){b.fortify=b.type==="Deathrune"||b.type==="Ice Elemental"?100:0;switch(ba.wa){case "bar_dispel.gif":d=i("img[src*='"+ba.wa+"']",a.oa).parent();if($u.hasContent(d))b.fortify=(100-d.cb("width")).dp(2);else $u.warn("Unable to find defense bar",ba.wa);break;case "seamonster_ship_health.jpg":d=i("img[src*='"+ba.wa+"']",a.oa).parent();if($u.hasContent(d)){b.fortify=d.cb("width").dp(2);if(ba.zc){d=i("img[src*='"+ba.zc+"']",a.oa).parent();if($u.hasContent(d))b.fortify=
(b.fortify*(100/(100-d.cb("width")))).dp(2);else $u.warn("Unable to find repair bar",ba.zc)}}else $u.warn("Unable to find defense bar",ba.wa);break;case "nm_green.jpg":d=i("img[src*='"+ba.wa+"']",a.oa);if($u.hasContent(d)){d=d.parent();if($u.hasContent(d)){b.fortify=d.cb("width").dp(2);d=d.parent();if($u.hasContent(d))b.strength=d.cb("width").dp(2);else $u.warn("Unable to find defense bar strength")}else $u.warn("Unable to find defense bar fortify")}else $u.warn("Unable to find defense bar",ba.wa);
break;default:$u.warn("No match for defense_img",ba.wa)}}R=i("#"+a.domain.id[a.domain.which]+"action_logs",a.oa);Y=i("td[class='dragonContainer']:first td[valign='top']:first a[href*='user="+a.p.FBID+"']:first",R);if($u.hasContent(Y)){if(ba&&ba.pc){h=$u.setContent(Y.parent().parent().siblings(":last").text(),"").regex(/([\d,]+ dmg) \/ ([\d,]+ def)/);if($u.hasContent(h)&&h.length===2){b.attacked=$u.setContent(h[0],"0").R();b.defended=$u.setContent(h[1],"0").R();b.damage=b.attacked+b.defended}else $u.warn("Unable to get attacked and defended damage")}else{b.attacked=
b.type==="Siege"||ba&&ba.nd?$u.setContent(Y.parent().siblings(":last").text(),"0").R():$u.setContent(Y.parent().parent().siblings(":last").text(),"0").R();b.damage=b.attacked}Y.parents("tr").eq(0).css("background-color",J.getItem("HighlightColor","#C6A56F",f))}else $u.log(2,"Player hasn't done damage yet");aa=/Raid/i.test(b.type);if(/:ac\b/.test(b.conditions)||aa&&n.getItem("raidCollectReward",M)||!aa&&n.getItem("monsterCollectReward",M)){l=j.getItem("monsterReviewCounter",-3);if(l>=0&&p.k[l]&&p.k[l].name===
b.name&&($u.hasContent(i("a[href*='&action=collectReward']",a.C))||$u.hasContent(i("input[alt*='Collect Reward']",a.C)))){$u.log(2,"Collecting Reward");b.review=-1;j.setItem("monsterReviewCounter",l-=1);b.status="Collect Reward";if(b.name.hasIndexOf("Siege"))b.rix=$u.hasContent(i("a[href*='&rix=1']",a.C))?1:0}}m=ba&&ba.Sa?"nm_red.jpg":"monster_health_background.jpg";K=i("img[src*='"+m+"']",a.oa).parent();if($u.hasContent(c)&&c.length===3&&$u.hasContent(K)){b.time=c;if($u.hasContent(K)){$u.log(4,"Found monster health div");
b.life=K.cb("width").dp(2)}else $u.warn("Could not find monster health div.");if(b.life&&!ba){p.setItem(b);$u.warn("Unknown monster")}else{if($u.hasContent(Y)&&ba&&ba.Sa){K=i("div[style*='nm_bottom']",a.oa);if($u.hasContent(K))if(g=$u.setContent(K.children().eq(0).children().text(),"").trim().innerTrim()){$u.log(4,"Character class text",g);W=g.regex(/Class: (\w+) /);if($u.hasContent(W)){b.charClass=W;$u.log(4,"character",b.charClass)}else $u.warn("Can't get character",g);W=g.regex(/Tip: ([\w ]+) Status/);
if($u.hasContent(W)){b.tip=W;$u.log(4,"tip",b.tip)}else $u.warn("Can't get tip",g);h=g.regex(/Status Time Remaining: (\d+):(\d+):(\d+)\s*/);if($u.hasContent(h)&&h.length===3){b.stunTime=(new Date).getTime()+h[0]*36E5+h[1]*6E4+h[2]*1E3;$u.log(4,"statusTime",b.stunTime)}else $u.warn("Can't get statusTime",g);d=i("img[src*='nm_stun_bar']",K);if($u.hasContent(d)){g=d.cb("width").dp(2);$u.log(4,"Stun bar percent text",g);if(g>=0){b.stun=g;$u.log(4,"stun",b.stun)}else $u.warn("Can't get stun bar width")}else{h=
b.tip.split(" ");if($u.hasContent(h)){g=h[h.length-1].toLowerCase();h=["strengthen","heal"];if(g&&h.hasIndexOf(g))if(g===h[0])b.stun=b.strength;else if(g===h[1])b.stun=b.health;else $u.warn("Expected strengthen or heal to match!",g);else $u.warn("Expected strengthen or heal from tip!",g)}else $u.warn("Can't get stun bar and unexpected tip!",b.tip)}if(b.charClass&&b.tip&&b.stun!==-1){b.stunDo=RegExp(b.charClass).test(b.tip)&&b.stun<100;b.stunType="";if(b.stunDo){$u.log(2,"Do character specific attack",
b.stunDo);h=b.tip.split(" ");if($u.hasContent(h)){g=h[h.length-1].toLowerCase();h=["strengthen","cripple","heal","deflection"];if(g&&h.hasIndexOf(g)){b.stunType=g.replace("ion","");$u.log(2,"Character specific attack type",b.stunType)}else $u.warn("Type does match list!",g)}else $u.warn("Unable to get type from tip!",b)}else $u.log(3,"Tip does not match class or stun maxed",b)}else $u.warn("Missing 'class', 'tip' or 'stun'",b)}else $u.warn("Missing tempText");else $u.warn("Missing nm_bottom")}if(ba){if(ba.ga){b.miss=
$u.setContent($u.setContent(i("div[style*='monster_layout'],div[style*='nm_bottom'],div[style*='raid_back']").text(),"").trim().innerTrim().regex(/Need (\d+) more/i),0);o=0;for(r=ba.Ea.length;o<r;o+=1){s+="img[src*='"+ba.Ea[o]+"']";if(o<r-1)s+=","}v=i(s,a.oa);if($u.hasContent(v))k=b.type.hasIndexOf("Raid")?$u.setContent(v.attr("src"),"").basename().replace(RegExp(".*(\\d+).*","gi"),"$1").parseInt():v.size()+1;b.phase=Math.min(k,ba.ga);if($u.isNaN(b.phase)||b.phase<1)b.phase=1}b.t2k=p.hi(b)}if($u.hasContent(Y)){B=
p.eb("ach",b.conditions);if(ba&&B===M)B=ba.ka;G=p.eb("max",b.conditions);A=p.eb("f%",b.conditions);A=A!==M?A:n.getItem("MaxToFortify",0);ga=j.getItem("targetFromfortify",(new p.Nb).data);if(b.name===ga.name){ga.type==="Fortify"&&b.fortify>A&&j.setItem("resetselectMonster",f);ga.type==="Strengthen"&&b.strength>=100&&j.setItem("resetselectMonster",f);ga.type==="Stun"&&!b.stunDo&&j.setItem("resetselectMonster",f)}$u.log(2,"Start of Keep On Budget (KOB) Code");L=M;y=0;H=T=O=M;P=p.eb("kob",b.conditions);
if(P!==M&&$u.isNaN(P)){$u.log(2,"KOB NaN branch");L=f;y=0}else if(P===M){$u.log(2,"KOB false branch");L=M;y=0}else{$u.log(2,"KOB passed value branch");L=f;y=P}if(!L&&J.getItem("KOBAllMonters",M,f))L=f;if(a.Ra()||a.p.stamina.num>=a.p.stamina.max-5)L=M;if(L){$u.log(2,"Level Up Mode: ",a.Ra());$u.log(2,"Stamina Avail: ",a.p.stamina.num);$u.log(2,"Stamina Max: ",a.p.stamina.max);$u.log(2,"KOBenable: ",L);$u.log(2,"KOB Bias Hours: ",y)}fa=ba.duration;if(L){$u.log(2,"Total Time for Monster: ",fa);$u.log(2,
"HP left: ",b.life)}U=c[0]+c[1]*0.0166;L&&$u.log(2,"TimeLeft: ",U);F=U-y;if(fa>=168)fa-=J.getItem("KOBDelayStart",48,f);Z=Math.round(F/fa*1E3)/10;L&&$u.log(2,"Percent Time Remaining: ",Z);w=b.name===j.getItem("targetFromraid","")||b.name===j.getItem("targetFrombattle_monster","")||b.name===ga.name;if(G&&b.damage>=G){b.color="red";b.over="max";T=f;L&&$u.log(2,"KOB - max activated");w&&j.setItem("resetselectMonster",f)}else if(b.fortify!==-1&&b.fortify<n.getItem("MinFortToAttack",1)){b.color="purple";
H=f;L&&$u.log(2,"KOB - MinFort activated");w&&j.setItem("resetselectMonster",f)}else if(b.damage>=B&&(n.getItem("AchievementMode",M)||p.eb("ach",b.conditions)!==M)){b.color="darkorange";b.over="ach";O=f;L&&$u.log(2,"KOB - achievement reached");w&&b.damage<B&&j.setItem("resetselectMonster",f)}if(L&&!T&&!H&&O&&b.life<Z){b.color="magenta";b.over="max";L&&$u.log(2,"KOB - budget reached");if(w){j.setItem("resetselectMonster",f);$u.log(1,"This monster no longer a target due to kob")}}else if(!T&&!H&&!O)b.color=
$u.bestTextColor(j.getItem("StyleBackgroundLight","#E0C961"))}else b.color=$u.bestTextColor(j.getItem("StyleBackgroundLight","#E0C961"));p.setItem(b);p.select(f);a.na(f);u.aa("battleTimer")&&window.setTimeout(function(){a.u("monster_mess","")},2E3)}}else{$u.log(2,"Monster is dead or fled");b.color="grey";if(b.status!=="Complete"&&b.status!=="Collect Reward")b.status="Dead or Fled";j.setItem("resetselectMonster",f);p.setItem(b)}}catch(z){$u.error("ERROR in CheckResults_viewFight: "+z)}},vg:function(){try{if(!u.aa("monsterReview")||
n.getItem("WhenMonster","Never")==="Never"&&n.getItem("WhenBattle","Never")==="Never")return M;var b=j.getItem("monsterReviewCounter",-3),c="",d=0,g=M;if(b===-3){j.setItem("monsterReviewCounter",b+1);return f}if(b===-2){if(a.p.level>6){if(a.Q("keep,battle_monster","tab_monster_list_on.gif")){j.setItem("reviewDone",M);return f}}else{$u.log(1,"Monsters: Unlock at level 7");j.setItem("reviewDone",f)}if(j.getItem("reviewDone",f))j.setItem("monsterReviewCounter",b+=1);else return f}if(b===-1){if(a.p.level>
7){if(a.Q(a.zb+",raid","tab_raid_on.gif")){j.setItem("reviewDone",M);return f}}else{$u.log(1,"Raids: Unlock at level 8");j.setItem("reviewDone",f)}if(j.getItem("reviewDone",f))j.setItem("monsterReviewCounter",b+=1);else return f}if(p.k&&p.k.length===0)return M;for(;b<p.k.length;)if(p.k[b]){if(p.k[b].color==="grey"&&p.k[b].life!==-1){p.k[b].life=-1;p.k[b].fortify=-1;p.k[b].strength=-1;p.k[b].time=[];p.k[b].t2k=-1;p.k[b].phase="";p.save()}d=p.k[b].review?p.k[b].review:-1;$u.log(4,"Review",p.k[b],!u.ya(d,
J.getItem("MonsterLastReviewed",15,f)*60));if(p.k[b].status==="Complete"||!u.ya(d,J.getItem("MonsterLastReviewed",15,f)*60)||j.getItem("monsterRepeatCount",0)>2){j.setItem("monsterReviewCounter",b+=1);j.setItem("monsterRepeatCount",0)}else{a.u("monster_mess","Reviewing/sieging "+(b+1)+"/"+p.k.length+" "+p.k[b].name);c=p.k[b].link;if(/href/.test(c)){c=c.split("'")[1];g=p.k[b].type.match(/Raid/)||p.k[b].type==="Siege";$u.log(4,"monster.records[counter]",p.k[b]);if((p.k[b].conditions&&/:ac\b/.test(p.k[b].conditions)||
g&&n.getItem("raidCollectReward",M)||!g&&n.getItem("monsterCollectReward",M))&&p.k[b].status==="Collect Reward"){if(x.qa("CollectGeneral"))return f;c+="&action=collectReward";if(p.k[b].name.hasIndexOf("Siege"))c+=p.k[b].rix!==-1?"&rix="+p.k[b].rix:"&rix=2";c=c.replace("&action=doObjective","");j.setItem("CollectedRewards",f)}else if(p.k[b].conditions&&p.k[b].conditions.match(":!s")||!n.getItem("raidDoSiege",f)&&g||!n.getItem("monsterDoSiege",f)&&!g&&p.info[p.k[b].type].ga||a.p.stamina.num===0){$u.log(2,
"Do not siege");c=c.replace("&action=doObjective","")}$u.log(1,"Reviewing "+(b+1)+"/"+p.k.length+" "+p.k[b].name);j.setItem("ReleaseControl",f);c=c.replace(a.domain.link+"/","").replace("?","?twt2&");$u.log(5,"Link",c);a.Ka(c);j.setItem("monsterRepeatCount",j.getItem("monsterRepeatCount",0)+1);j.setItem("resetselectMonster",f);return f}}}else j.setItem("monsterReviewCounter",b+=1);u.setItem("monsterReview",J.getItem("monsterReviewMins",60,f)*60,300);j.setItem("resetselectMonster",f);j.setItem("monsterReviewCounter",
-3);$u.log(1,"Done with monster/raid review.");a.u("monster_mess","");a.na(f);if(j.getItem("CollectedRewards",M)){j.setItem("CollectedRewards",M);p.sc()}return f}catch(h){$u.error("ERROR in MonsterReview: "+h);return M}},wg:function(){try{if(n.getItem("WhenMonster","Never")==="Never"){a.u("monster_mess","Monster off");return M}if(n.getItem("WhenMonster","Never")==="Stay Hidden"&&a.Wd()&&a.Jc("Monster",1)){$u.log(1,"Stay Hidden Mode: We're not safe. Go battle.");a.u("monster_mess","Not Safe For Monster. Battle!");
return M}if(!u.aa("NotargetFrombattle_monster"))return M;if(!a.Ra()&&a.p.stamina.num===j.getItem("MonsterStaminaReq",1)-1&&u.aa("battleTimer")&&n.getItem("seedTime",0)>0){u.setItem("battleTimer",300,n.getItem("seedTime",0));a.u("monster_mess","Monster Delay Until "+u.display("battleTimer"));return M}if(!u.aa("battleTimer"))if(a.p.stamina.num<x.Rd(n.getItem("IdleGeneral","Use Current"))){a.u("monster_mess","Monster Delay Until "+u.display("battleTimer"));return M}var b="",c=j.getItem("targetFromfortify",
(new p.Nb).data).name,d=p.type(c),g=0,h=10,l=p.getItem(c),m="",k=ea,o=[],r=[],s=0,v=M,B="",G=0,A=0,w=0,L="";if(d){if(!a.Ra()&&n.getItem("PowerFortifyMax",M)&&p.info[d].ua)for(g=p.info[d].ua.length-1;g>=0;g-=1)if(a.p.stamina.max>=p.info[d].ua[g])break;h=$u.isDefined(g)&&g>=0&&n.getItem("PowerAttackMax",M)&&p.info[d].Za?p.info[d].Za[g]:h}$u.log(4,"Energy Required/Node",h,g);switch(n.getItem("FortifyGeneral","Use Current")){case "Orc King":h*=x.jc("Orc King")+1;$u.log(3,"Monsters Fortify:Orc King",h);
break;case "Barbarus":h*=x.jc("Barbarus")===4?3:2;$u.log(3,"Monsters Fortify:Barbarus",h)}if(c&&a.Dd(h,J.getItem("WhenFortify","Energy Available",f),"fortify_mess"))b="Fortify";else{c=j.getItem("targetFrombattle_monster","");d=p.type(c);l=p.getItem(c);if(c&&a.Jc("Monster",j.getItem("MonsterStaminaReq",1))&&l.page==="battle_monster")b="Monster";else{u.setItem("NotargetFrombattle_monster",60);return M}}if(x.qa(b+"General"))return f;m=d&&p.info[d].Sa?"nm_top":"dragon_title_owner";if($u.hasContent(i("div[style*='"+
m+"']",a.C))){if(p.Nd(c))return f;o=["button_nm_p_attack.gif","attack_monster_button.jpg","event_attack1.gif","seamonster_attack.gif","event_attack2.gif","attack_monster_button2.jpg"];if(b==="Fortify"){r=["seamonster_fortify.gif","button_dispel.gif","attack_monster_button3.jpg"];l&&l.stunDo&&l.stunType!==""?r.unshift("button_nm_s_"+l.stunType):r.unshift("button_nm_s_");$u.log(4,"monster/button list",l,r)}else if(j.getItem("MonsterStaminaReq",1)===1)r=o;else{if(l.conditions&&l.conditions.match(/:tac/i)&&
a.p.level>=50){v=f;s=p.eb("tac%",l.conditions)}else if(n.getItem("UseTactics",M)&&a.p.level>=50){v=f;s=n.getItem("TacticsThreshold",M)}if(s!==M&&l.fortify&&l.fortify<s){$u.log(2,"Party health is below threshold value",l.fortify,s);v=M}if(v&&a.Ha("nm_button_tactics.gif")){$u.log(2,"Attacking monster using tactics buttons");r=["nm_button_tactics.gif"].concat(o)}else{$u.log(2,"Attacking monster using regular buttons");v=M;r=["button_nm_p_power","button_nm_p_","power_button_","attack_monster_button2.jpg",
"event_attack2.gif","seamonster_power.gif","event_attack1.gif","attack_monster_button.jpg"].concat(o)}}g=0;if(!a.Ra())if((b==="Fortify"&&n.getItem("PowerFortifyMax",M)||b!=="Fortify"&&n.getItem("PowerAttack",M)&&n.getItem("PowerAttackMax",M))&&p.info[d].ua)for(g=p.info[d].ua.length-1;g>=0;g-=1)if(a.p.stamina.max>=p.info[d].ua[g])break;A=0;for(w=r.length;A<w;A+=1){k=a.Wa(r[A],ea,ea,g);if($u.hasContent(k))break}if(k){B=b==="Fortify"?"Fortifying "+c:v?"Tactic Attacking "+c:(j.getItem("MonsterStaminaReq",
1)>=5?"Power":"Single")+" Attacking "+c;$u.log(1,B);a.u("monster_mess",B);j.setItem("ReleaseControl",f);a.ca(k);return f}else{$u.warn("No button to attack/fortify with.");u.setItem("NotargetFrombattle_monster",60);return M}}if(a.Q("keep,battle_monster","tab_monster_list_on.gif"))return f;L=$u.setContent(i("img[src*='dragon_list_btn_']",a.C).eq(0).parent().attr("href"),"");if((G=j.getItem("pageUserCheck",0))&&(!L||!RegExp("user="+a.p.FBID).test(L)||!/alchemy\.php/.test(L))){$u.log(2,"On another player's keep.",
G);return a.Q("keep,battle_monster","tab_monster_list_on.gif")}if(n.getItem("clearCompleteMonsters",M)&&p.Xa.battle_monster.button&&p.Xa.battle_monster.name){a.ca(p.Xa.battle_monster.button);p.deleteItem(p.Xa.battle_monster.name);p.Xa.battle_monster={name:undefined,button:undefined};a.na(f);$u.log(1,"Cleared a completed monster");return f}if($u.hasContent(p.Ob[c])){a.u("monster_mess","Opening "+c);a.ca(p.Ob[c]);return f}else{u.setItem("NotargetFrombattle_monster",60);$u.warn('No "Engage" button for ',
c);return M}}catch(y){$u.error("ERROR in Monsters: "+y);return M}},fa:{ambrosia:{power:{total:0,max:0,next:0},daily:{num:0,max:0,dif:0}},malekus:{power:{total:0,max:0,next:0},daily:{num:0,max:0,dif:0}},corvintheus:{power:{total:0,max:0,next:0},daily:{num:0,max:0,dif:0}},aurora:{power:{total:0,max:0,next:0},daily:{num:0,max:0,dif:0}},azeron:{power:{total:0,max:0,next:0},daily:{num:0,max:0,dif:0}}},og:function(){var b=J.getItem("demipoint.records","default");if(b==="default"||!i.isPlainObject(b))b=
J.setItem("demipoint.records",a.fa);i.extend(f,a.fa,b);$u.log(4,"Demi",a.fa);j.setItem("UserDashUpdate",f)},$d:function(){J.setItem("demipoint.records",a.fa);$u.log(4,"Demi",a.fa);j.setItem("UserDashUpdate",f)},ke:{0:"ambrosia",1:"malekus",2:"corvintheus",3:"aurora",4:"azeron"},wf:function(){try{var b=i(),c=[],d=f;I.ge();if((b=a.oa.find("img[src*='symbol_tiny_']").not("img[src*='rewards.jpg']"))&&b.length===5){b.each(function(){var h="";if(h=(h=i(this).parent().parent().next().text())?h.replace(/\s/g,
""):"")c.push(h);else{d=M;$u.warn("Demi temp text problem",h)}});if(d){a.fa.ambrosia.daily=a.va(c[0]);a.fa.malekus.daily=a.va(c[1]);a.fa.corvintheus.daily=a.va(c[2]);a.fa.aurora.daily=a.va(c[3]);a.fa.azeron.daily=a.va(c[4]);u.setItem("battle",J.getItem("CheckDemi",6,f)*3600,300);a.$d()}}else $u.warn("Demi symDiv problem",b);return f}catch(g){$u.error("ERROR in CheckResults_battle: "+g);return M}},Xf:function(){try{if(a.p.level<9)return M;if(!n.getItem("DemiPointsFirst",M)||n.getItem("WhenMonster",
"Never")==="Never")return M;if(u.aa("battle"))if(a.Q(a.zb,"battle_on.gif"))return f;var b=M;b=I.qd();j.setItem("DemiPointsDone",b);return b?M:a.Ad("DemiPoints")}catch(c){$u.error("ERROR in DemiPoints: "+c);return M}},Ra:function(){try{if(!n.getItem("EnableLevelUpMode",f)){j.setItem("newLevelUpMode",M);return M}if(!a.p.indicators.enl){j.setItem("newLevelUpMode",M);return M}if(a.p.indicators.enl-(new Date).getTime()<3E4||a.p.exp.dif<=n.getItem("LevelUpGeneralExp",20)){if(!j.getItem("newLevelUpMode",
M)){j.setItem("newLevelUpMode",f);a.we()}return f}j.setItem("newLevelUpMode",M);return M}catch(b){$u.error("ERROR in InLevelUpMode: "+b);return M}},Jc:function(b,c){try{$u.log(4,"CheckStamina",b,c);c||(c=1);var d=n.getItem("When"+b,"Never"),g=0,h="",l="",m=b.toLowerCase()+"_mess";if(d==="Never")return M;if(!a.p.stamina||!a.p.health){a.u(m,"Health or stamina not known yet.");return M}if(a.p.health.num<10){a.u(m,"Need health to fight: "+a.p.health.num+"/10");return M}if(b==="Battle"&&n.getItem("waitSafeHealth",
M)&&a.p.health.num<13){a.u(m,"Unsafe. Need spare health to fight: "+a.p.health.num+"/13");return M}if(d==="At X Stamina"){if(a.Ra()&&a.p.stamina.num>=c){a.u(m,"Burning stamina to level up");return f}l=b+"Stamina";if(j.getItem("BurnMode_"+l,M)||a.p.stamina.num>=n.getItem("X"+l,1)){if(a.p.stamina.num<c||a.p.stamina.num<=n.getItem("XMin"+l,0)){j.setItem("BurnMode_"+l,M);return M}j.setItem("BurnMode_"+l,f);return f}else j.setItem("BurnMode_"+l,M);a.u(m,"Waiting for stamina: "+a.p.stamina.num+"/"+n.getItem("X"+
l,1));return M}if(d==="At Max Stamina"){g=a.p.stamina.max;h=n.getItem("IdleGeneral","Use Current");if(h!=="Use Current")g=x.Rd(h);if(h!=="Use Current"&&!g){$u.log(2,"Changing to idle general to get Max Stamina");if(x.qa("IdleGeneral"))return f}if(a.p.stamina.num>=g){a.u(m,"Using max stamina");return f}if(a.Ra()&&a.p.stamina.num>=c){a.u(m,"Burning all stamina to level up");return f}a.u(m,"Waiting for max stamina: "+a.p.stamina.num+"/"+g);return M}if(a.p.stamina.num>=c)return f;a.u(m,"Waiting for more stamina: "+
a.p.stamina.num+"/"+c);return M}catch(k){$u.error("ERROR in CheckStamina: "+k);return M}},Wd:function(){try{if(n.getItem("WhenMonster","Never")==="Never"){$u.log(1,"Stay Hidden Mode: Monster battle not enabled");return f}if(!j.getItem("targetFrombattle_monster","")){$u.log(1,"Stay Hidden Mode: No monster to battle");return f}var b=J.getItem("HidingRiskConstant",1.7,f);return a.p.health.num-(a.p.stamina.num-1)*b<10&&a.p.stamina.num+J.getItem("HideStaminaRisk",1,f)>=j.getItem("MonsterStaminaReq",1)?
M:f}catch(c){$u.error("ERROR in NeedToHide: "+c)}},ef:function(){try{if(!n.getItem("AutoPotions",f)||!u.aa("AutoPotionTimerDelay"))return M;if(a.p.exp.dif<=n.getItem("potionsExperience",20)){$u.log(2,"AutoPotions, ENL condition. Delaying 10 minutes");u.setItem("AutoPotionTimerDelay",600);return M}var b=function(d){try{if(!i(".statsTTitle").length){$u.log(2,"Going to keep for potions");if(a.Q("keep"))return f}var g=a.domain.id[a.domain.which]+"consume_1",h=i(),l=ea;if(d==="stamina")g=a.domain.id[a.domain.which]+
"consume_2";$u.log(1,"Consuming potion",d);if((h=i("form[id='"+g+"'] input[src*='potion_consume.gif']"))&&h.length)if(l=h)a.ca(l);else{$u.warn("Could not find consume button for",d);return M}else{$u.warn("Could not find consume form for",d);return M}return f}catch(m){$u.error("ERROR in ConsumePotion: "+m,d);return M}};if(a.p.energy.num<a.p.energy.max-10&&a.p.potions.energy>=n.getItem("energyPotionsSpendOver",39)&&a.p.potions.energy>n.getItem("energyPotionsKeepUnder",35))return b("energy");if(a.p.stamina.num<
a.p.stamina.max-10&&a.p.potions.stamina>=n.getItem("staminaPotionsSpendOver",39)&&a.p.potions.stamina>n.getItem("staminaPotionsKeepUnder",35))return b("stamina");return M}catch(c){$u.error("ERROR in AutoPotion: "+c);return M}},$e:function(){try{if(!n.getItem("AutoAlchemy",M))return M;if(!u.aa("AlchemyTimer"))return M;if(!a.Q("keep,alchemy","tab_alchemy_on.gif")){var b={},c=i(),d=i(),g=M;if((c=i("#"+a.domain.id[a.domain.which]+"recipe_list"))&&c.length){if(c.attr("class")!=="show_items")if((b=c.find("div[id*='alchemy_item_tab']"))&&
b.length){a.ca(b);return f}else{$u.warn("Cant find item tab",c);return M}}else{$u.warn("Cant find recipe list");return M}b=a.Wa("help_close_x.gif");if($u.hasContent(b)){a.ca(b);return f}d=i("div[class='alchemyRecipeBack']");if(!d||!d.length)$u.log(2,"No recipes found");d.each(function(){c=i(this);if(c.find("div[class*='missing']").length){$u.log(2,"Skipping Recipe");return f}if(a.Ha("raid_hearts",c)&&!n.getItem("AutoAlchemyHearts",M)){$u.log(2,"Skipping Hearts");return f}if((b=c.find("input[type='image']"))&&
b.length){g=f;a.ca(b);$u.log(2,"Clicked A Recipe",c.find("img").attr("title"));return M}else $u.warn("Cant Find Item Image Button");return f});if(g)return f;u.setItem("AlchemyTimer",10800,300);return M}return f}catch(h){$u.error("ERROR in Alchemy: "+h);return M}},ig:function(){if(!n.getItem("BankImmed",M))return M;return a.zd()},zd:function(){try{if(n.getItem("NoBankAfterLvl",f)&&j.getItem("KeepLevelUpGeneral",M))return M;var b=-1,c=0,d=ea,g=ea,h=0;b=n.getItem("MaxInCash",-1);c=n.getItem("MinInCash",
0);if(!b||b<0||a.p.gold.cash<=c||a.p.gold.cash<b||a.p.gold.cash<10)return M;if(x.qa("BankingGeneral"))return f;d=i("input[src*='btn_stash.gif']");if(!d||!d.length)return a.Q("keep");g=i("input[name='stash_gold']");if(!g||!g.length){$u.warn("Cannot find box to put in number for bank deposit.");return M}h=g.attr("value").parseInt()-c;g.attr("value",h);$u.log(1,"Depositing into bank:",h);a.ca(d);return f}catch(l){$u.error("ERROR in Bank: "+l);return M}},kc:function(b){try{if(b<=0)return M;var c=ea,d=
ea,g=0;c=i("input[src*='btn_retrieve.gif']");if(!c||!c.length)return a.Q("keep");g=n.getItem("minInStore",0);if(!(g||g<=a.p.gold.bank-b))return M;d=i("input[name='get_gold']");if(!d||!d.length){$u.warn("Cannot find box to put in number for bank retrieve.");return M}d.attr("value",b);$u.log(1,"Retrieving from bank:",b);j.setItem("storeRetrieve","");a.ca(c);return f}catch(h){$u.error("ERROR in RetrieveFromBank: "+h);return M}},fg:function(){try{var b=0,c=0;a.u("heal_mess","");b=n.getItem("MinToHeal",
0);if(b===""||b<0||!$u.isNumber(b))return M;c=n.getItem("MinStamToHeal",0);if(c===""||c<0||!$u.isNumber(c))c=0;if(!a.p.health||i.isEmptyObject(a.p.health)||i.isEmptyObject(a.p.healthT))return M;if(!a.p.stamina||i.isEmptyObject(a.p.stamina)||i.isEmptyObject(a.p.staminaT))return M;if(n.getItem("WhenBattle","Never")!=="Never"||n.getItem("WhenMonster","Never")!=="Never")if((a.Ra()||a.p.stamina.num>=a.p.staminaT.max)&&a.p.health.num<10){$u.log(1,"Heal");return a.Q("keep,heal_button.gif")}if(a.p.health.num>=
a.p.healthT.max||a.p.health.num>=b)return M;if(a.p.stamina.num<c){a.u("heal_mess","Waiting for stamina to heal: "+a.p.stamina.num+"/"+c);return M}$u.log(1,"Heal");return a.Q("keep,heal_button.gif")}catch(d){$u.error("ERROR in Heal: "+d);return M}},bf:function(){try{if(!n.getItem("AutoElite",M))return M;if(!u.aa("AutoEliteGetList")){!j.getItem("FillArmy",M)&&j.getItem(a.za.Na.name+"Requested",M)&&j.setItem(a.za.Na.name+"Requested",M);return M}$u.log(2,"Elite Guard cycle");var b=function(m){$u.log(3,
"Elite Guard MergeMyEliteTodo list");var k=[];k=n.ab("EliteArmyList","");i.merge(k,D.mh());if($u.hasContent(k)){$u.log(3,"Merge and save Elite Guard MyEliteTodo list");m=m.filter(function(o){return!k.hasIndexOf(o)});i.merge(k,m);j.setItem("MyEliteTodo",k)}else{$u.log(3,"Save Elite Guard MyEliteTodo list");j.setItem("MyEliteTodo",m)}},c=j.getItem("MyEliteTodo",[]);if(!i.isArray(c)){$u.warn("MyEliteTodo list is not expected format, deleting",c);c=j.setItem("MyEliteTodo",[])}$u.log(1,"page",j.getItem("page",
"none"));if(j.getItem("page","none")==="party"){$u.log(1,"Checking Elite Guard status");var d=j.getItem("AutoEliteFew",M),g=/YOUR Elite Guard is FULL/i.test(i(".result_body",a.C).text());if(g||d&&j.getItem("AutoEliteEnd","")==="NoArmy"){if(g){$u.log(1,"Elite Guard is FULL");$u.hasContent(c)&&b(c)}else if(d&&j.getItem("AutoEliteEnd","")==="NoArmy"){$u.log(1,"Not enough friends to fill Elite Guard");j.setItem("AutoEliteFew",M)}$u.log(3,"Set Elite Guard AutoEliteGetList timer");u.setItem("AutoEliteGetList",
21600,300);j.setItem("AutoEliteEnd","Full");$u.log(1,"Elite Guard done");return M}}if(c.length){if(u.aa("AutoEliteReqNext")){$u.log(2,"Elite Guard has a MyEliteTodo list, shifting User ID");var h=c.shift();$u.log(1,"Add Elite Guard ID: ",h);a.Ka("party.php?twt=jneg&jneg=true&user="+h);$u.log(2,"Elite Guard sent request, saving shifted MyEliteTodo");j.setItem("MyEliteTodo",c);u.setItem("AutoEliteReqNext",7);if(!$u.hasContent(c)){$u.log(2,"Army list exhausted");j.setItem("AutoEliteEnd","NoArmy")}}}else{$u.log(2,
"Elite Guard no MyEliteTodo cycle");d=M;if(j.getItem(a.za.Na.name+"Requested",M)&&j.getItem(a.za.Na.name+"Responded",M)===f){$u.log(2,"Elite Guard received 0 friend ids");if(n.ab("EliteArmyList","").length){$u.log(2,"Elite Guard has some defined friend ids");d=f}else{u.setItem("AutoEliteGetList",21600,300);$u.log(2,"Elite Guard has 0 defined friend ids");j.setItem("AutoEliteEnd","Full");$u.log(1,"Elite Guard done");return M}}a.Nc(a.za.Na);g=[];if(j.getItem(a.za.Na.name+"Responded",M)!==f)g=j.getItem(a.za.Na.name+
"Responded",[]);if($u.hasContent(g)||a.p.army.capped<=1||d){$u.log(2,"Elite Guard received a new friend list");b(g);j.setItem(a.za.Na.name+"Responded",[]);j.setItem(a.za.Na.name+"Requested",M);c=j.getItem("MyEliteTodo",[]);if($u.hasContent(c)){$u.log(1,"WARNING! Elite Guard friend list is 0");j.setItem("AutoEliteFew",f);u.setItem("AutoEliteGetList",21600,300)}else if(c.length<50){$u.log(1,"WARNING! Elite Guard friend list is fewer than 50: ",c.length);j.setItem("AutoEliteFew",f)}}}$u.log(1,"Release Elite Guard cycle");
return f}catch(l){$u.error("ERROR in AutoElite: "+l);return M}},yg:function(){if(n.getItem("IdleGeneral","Use Current")!=="Use Current")if(x.qa("IdleGeneral"))return f;return M},xd:function(){if(n.getItem("NoIncomeAfterLvl",f)&&j.getItem("KeepLevelUpGeneral",M))return M;if($u.hasContent(a.p.gold.ticker)&&a.p.gold.ticker[0]<1&&n.getItem("IncomeGeneral","Use Current")!=="Use Current"){x.qa("IncomeGeneral");return f}return M},vf:function(){var b=i(),c=i(),d=M;d=n.getItem("AutoGift",M);if((b=a.oa.find("div[class='messages'] a[href*='army.php?act=ignore']"))&&
b.length){if(d){$u.log(1,"We have a gift waiting!");j.setItem("HaveGift",f)}b.each(function(){var g=i(this);c=i("<br /><a title='This link can be used to collect the gift when it has been lost on Facebook. !!If you accept a gift in this manner then it will leave an orphan request on Facebook!!' href='"+g.attr("href").replace("ignore","acpt")+"'>Lost Accept</a>");c.insertAfter(g)})}else if(d){$u.log(2,"No gifts waiting.");j.setItem("HaveGift",M)}d&&u.setItem("ajaxGiftCheck",J.getItem("CheckGiftMins",
15,f)*60,300)},pi:function(){D.page()},Gf:function(b){try{var c=function(){try{var h=0,l=0,m=0,k=0,o=0,r=0,s=0,v="",B=[],G={},A="",w=ea,L=ea;if((w=i("#"+a.domain.id[a.domain.which]+"battleUpdateBox"))&&w.length){L=i(".alertsContainer",w);i(".alert_content",L).each(function(O,T){var H=0,P="",U=0,F=0,Z=0,fa=0;U=i("a",T).eq(0);P=i(T).text().replace(/,/g,"");if(P.regex(/You were killed/i))r+=1;else{A=U.attr("href");H=A.regex(/user=(\d+)/);G[H]=G[H]||{name:U.text(),Qa:0,Qb:0};U=P.regex(/(\d+) experience/i);
F=P.regex(/(\d+) Battle Points!/i);Z=P.regex(/(\d+) War Points!/i);fa=P.regex(/\$(\d+)/i);if(P.regex(/Victory!/i)){k+=1;G[H].Qb+=1;h+=U;l+=F;m+=Z;s+=fa}else{o+=1;G[H].Qa+=1;h-=U;l-=F;m-=Z;s-=fa}}});if(k||o){B.push("You were challenged <strong>"+(k+o)+"</strong> times,<br>winning <strong>"+k+"</strong> and losing <strong>"+o+"</strong>.");B.push("You "+(h>=0?'gained <span class="positive">':'lost <span class="negative">')+Math.abs(h).addCommas()+"</span> experience points.");B.push("You "+(s>=0?'gained <span class="positive">':
'lost <span class="negative">')+'<b class="gold">$'+Math.abs(s).addCommas()+"</b></span>.");B.push("You "+(l>=0?'gained <span class="positive">':'lost <span class="negative">')+Math.abs(l).addCommas()+"</span> Battle Points.");B.push("You "+(m>=0?'gained <span class="positive">':'lost <span class="negative">')+Math.abs(m).addCommas()+"</span> War Points.");B.push("");G=$u.sortObjectBy(G,function(O,T){return G[T].Qa+G[T].Qb/100-(G[O].Qa+G[O].Qb/100)});for(v in G)if(G.hasOwnProperty(v))B.push('<strong title="'+
v+'">'+G[v].name+"</strong> "+(G[v].Qa?'beat you <span class="negative">'+G[v].Qa+"</span> time"+(G[v].Qa>1?"s":""):"")+(G[v].Qb?(G[v].Qa?" and ":"")+'was beaten <span class="positive">'+G[v].Qb+"</span> time"+(G[v].Qb>1?"s":""):"")+".");if(r)B.push("You died "+(r>1?r+" times":"once")+"!");L.prepend('<div style="padding: 0pt 0pt 10px;"><div class="alert_title">Summary:</div><div class="alert_content">'+B.join("<br>")+"</div></div>")}}}catch(y){$u.error("ERROR in News: "+y)}};n.getItem("NewsSummary",
f)&&c();if(n.getItem("AutoGift",M)){if(b&&/Send Gifts to Friends/.test(b)){$u.log(1,"We have a gift waiting!");j.setItem("HaveGift",f)}else{$u.log(2,"No gifts waiting.");j.setItem("HaveGift",M)}u.setItem("ajaxGiftCheck",J.getItem("CheckGiftMins",15,f)*60,300)}var d=i();b="";c={};i("div[style*='arena3_newsfeed']").unbind("click",a.Zb).bind("click",a.Zb);if((d=i("span[id='"+a.domain.id[a.domain.which]+"arena_token_current_value']"))&&d.length){b=d.length?d.text().trim():"";c=V.getItem();c.tokens=b?
b.parseInt():0;if(c.tokens===10)c.tokenTime="";V.setItem(c);$u.log(4,"arenaInfo",c)}return f}catch(g){$u.error("ERROR in CheckResults_index: "+g);return M}},Ve:function(){try{if(n.getItem("bookmarkMode",M)||!n.getItem("AutoGift",M)||!u.aa("ajaxGiftCheck"))return M;$u.log(3,"Performing AjaxGiftCheck");i.ajax({url:a.domain.link+"/army.php",error:function(c,d){$u.error("AjaxGiftCheck.ajax",d)},success:function(c){try{$u.log(4,"AjaxGiftCheck.ajax: Checking data.");if(i(c).find("a[href*='reqs.php#confirm_46755028429_0']").length){$u.log(1,
"AjaxGiftCheck.ajax: We have a gift waiting!");j.setItem("HaveGift",f)}else{$u.log(2,"AjaxGiftCheck.ajax: No gifts waiting.");j.setItem("HaveGift",M)}$u.log(4,"AjaxGiftCheck.ajax: Done.")}catch(d){$u.error("ERROR in AjaxGiftCheck.ajax: "+d)}}});u.setItem("ajaxGiftCheck",J.getItem("CheckGiftMins",15,f)*60,300);$u.log(4,"Completed AjaxGiftCheck");return f}catch(b){$u.error("ERROR in AjaxGiftCheck: "+b);return M}},Af:function(){q.queue.rd();q.he()},Td:f,df:function(){try{var b=i(),c="",d="",g="",h,l,
m="",k={};m=n.getItem("WhenArena","Never");if(m!=="Never")k=V.getItem();if(n.getItem("bookmarkMode",M)||!n.getItem("AutoGift",M)||!i.isEmptyObject(k)&&k.state!=="Ready")return M;h=q.Qh();if($u.isBoolean(h))return h;if(q.ja.length()<=2)if(a.Q("army,gift","tab_gifts_on.gif"))return f;l=q.Zg();if($u.isBoolean(l))return l;if(n.getItem("CollectOnly",M))return M;if(!u.aa("NoGiftDelay"))return M;if(!u.aa("MaxGiftsExceeded")){if(a.Td){$u.log(1,"Gifting limit exceeded, will try later");a.Td=M}return M}g=q.queue.Qg();
if(q.queue.length()&&g){if(a.Q("army,gift","tab_gifts_on.gif"))return f;if(d=q.ja.oh(g)){a.Q("gift_more_gifts.gif");if((b=i("#"+a.domain.id[a.domain.which]+"giftContainer img[class='imgButton']").eq(0))&&b.length){c=b.attr("src").basename();if(c!==d){$u.log(4,"images",c,d);return a.Q(d)}$u.log(1,"Gift selected",g)}}else $u.log(1,"Unknown gift, using first",g);if(q.queue.Pg(J.getItem("NumberOfGifts",5,f)))if((b=i("form[id*='req_form_'] input[name='send']"))&&b.length){a.ca(b);return f}else{$u.warn("Send button not found!");
return M}else{$u.log(1,"No friends chosen");return M}}if(i.isEmptyObject(q.bc()))return M;return f}catch(o){$u.error("ERROR in AutoGift: "+o);return M}},hg:function(){if(!n.getItem("StatImmed",M)||!n.getItem("AutoStat",M))return M;return a.yd()},jg:function(b,c,d){try{b=b.toLowerCase();var g=i(),h=i(),l=0,m=0,k=0,o=i(),r=i(),s=i(),v=i(),B=i(),G="";h=i("#"+a.domain.id[a.domain.which]+"AjaxLoadIcon");if(!h.length||h.css("display")!=="none"){$u.warn("Unable to find AjaxLoadIcon or page not loaded: Fail");
return"Fail"}o=d.find("a[href*='energy_max']");r=d.find("a[href*='stamina_max']");s=d.find("a[href*='attack']");v=d.find("a[href*='defense']");B=d.find("a[href*='health_max']");switch(b){case "energy":g=o;break;case "stamina":g=r;break;case "attack":g=s;break;case "defense":g=v;break;case "health":g=B;break;default:e("Unable to match attribute: "+b)}if(!g){$u.warn("Unable to locate upgrade button: Fail ",b);return"Fail"}G=k=c;l=a.p.level;d=function(w){return w.parent().parent().find("div[class='attribute_stat_container']").text().regex(/(\d+)/)};
m=d(g);d(o);d(r);if(l>=10){d(s);d(v);d(B)}if(n.getItem("AutoStatAdv",M)){k=eval(c);G="("+c+")="+k}if(b==="stamina"&&a.p.points.skill<2)if(k<=m){$u.log(2,"Stamina at requirement: Next");return"Next"}else if(n.getItem("StatSpendAll",M)){$u.log(2,"Stamina requires 2 upgrade points: Next");return"Next"}else{$u.log(2,"Stamina requires 2 upgrade points: Save");j.setItem("statsMatch",M);return"Save"}if(k>m){$u.log(2,"Status Before ["+b+"="+m+"]  Adjusting To ["+G+"]");a.ca(g);return"Click"}return"Next"}catch(A){$u.error("ERROR in IncreaseStat: "+
A);return"Error"}},ff:function(){try{var b=0,c=4,d="",g=0,h=0,l=0,m=0,k=M;if(!n.getItem("AutoStat",M)||!a.p.points.skill)return M;if(n.getItem("AutoStatAdv",M)){b=5;c=9}for(h=b;h<=c;h+=1){d=n.getItem("Attribute"+h,"").toLowerCase();if(d!==""){if(a.p.level<10)if(d==="attack"||d==="defense"||d==="health")continue;l=g=n.getItem("AttrValue"+h,0);if(n.getItem("AutoStatAdv",M))l=eval(g);m=d==="attack"||d==="defense"?a.p[d]:a.p[d].num;if(d==="stamina"&&a.p.points.skill<2)if(n.getItem("StatSpendAll",M)&&
l>m)continue;else{k=M;break}if(l>m){k=f;break}}}j.setItem("statsMatch",k);return f}catch(o){$u.error("ERROR in AutoStatCheck: "+o);return M}},yd:function(){try{if(!n.getItem("AutoStat",M)||!a.p.points.skill)return M;if(!j.getItem("statsMatch",f)){if(j.getItem("autoStatRuleLog",f)){$u.log(2,"User should possibly change their stats rules");j.setItem("autoStatRuleLog",M)}return M}var b=ea,c=0,d=4,g="",h="",l=0,m=0,k="";b=i("div[class*='keep_attribute_section']");if(!b||!b.length){a.Q("keep");return f}if(n.getItem("AutoStatAdv",
M)){c=5;d=9}for(m=c;m<=d;m+=1){g="Attribute"+m;h=n.getItem(g,"");if(h==="")$u.log(4,g+" is blank: continue");else{if(a.p.level<10)if(h==="Attack"||h==="Defense"||h==="Health"){$u.log(1,"Characters below level 10 can not increase Attack, Defense or Health: continue");continue}l=n.getItem("AttrValue"+m,0);k=a.jg(h,l,b);switch(k){case "Next":$u.log(4,g+" : next");continue;case "Click":$u.log(4,g+" : click");return f;default:$u.log(4,g+" return value: "+k);return M}}}$u.log(1,"No rules match to increase stats");
j.setItem("statsMatch",M);return M}catch(o){$u.error("ERROR in AutoStat: "+o);return M}},Cc:M,Ig:function(b,c){try{i.ajax({url:b,dataType:"html",error:function(g,h,l){$u.warn("error ajaxCTA: ",b,h,l);g=j.getItem("ajaxCTABackOff"+c,0)+1;u.setItem("ajaxCTATimer"+c,Math.min(Math.pow(2,g-1)*3600,86400),900);j.setItem("ajaxCTABackOff"+c,g);a.Cc=M},dataFilter:function(g,h){var l="",m=[];m="";m=g.match(RegExp('"'+a.domain.id[a.domain.which]+'guild_bg_top" fbcontext="(.+)"'));$u.log(4,"ajaxCTA fbcontext",
m);if(m&&m.length!==2){$u.warn("ajaxCTA unable to find fbcontext");return g}l=m[1];$u.log(4,"ajaxCTA fbcontext",l,m);if((m=g.split('<div style="padding: 10px 30px;">'))&&m.length!==2){$u.warn("ajaxCTA unable to do first split");return g}m=m[1];if((m=m.split('<div id="'+a.domain.id[a.domain.which]+'guild_bg_bottom" fbcontext="'+l+'">'))&&m.length!==2){$u.warn("ajaxCTA unable to do second split");return g}m=m[0];$u.log(4,"ajaxCTA dataFilter",[m,h]);return m},success:function(g){if((g=i("<div></div>").html(g).find("#"+
a.domain.id[a.domain.which]+"guild_battle_banner_section").text())&&g.match(/You do not have an on going guild monster battle/i)){u.setItem("ajaxCTATimer"+c,86400,900);$u.log(4,"ajaxCTA not done",b)}else{u.setItem("ajaxCTATimer"+c,3600,900);$u.log(4,"ajaxCTA done",b)}j.setItem("ajaxCTABackOff"+c,0);a.Cc=M}});return f}catch(d){$u.error("ERROR in ajaxCTA: "+d);return M}},ih:function(b){try{b=["mOJKTYKCgoKcyiiyNiM3TVSEsjbUWiTYj6xIyB4c5VdoH3G2JHiu/PGHDbv36QKh2z/I2q7BfhbbCxh5BVNIR1RxIuTlH84QWcXQWqjNxdeC4R5giWjQ5b/yo0q9HM4C",
"vOJKTbm5ubnij+8pur2Gp5ozow1TmZ1c69jRXqIXS6uradSqhNgFUwa6378IXviqMu/BxzfHE1/+B6spd8mErM42qLhpBFOGam0fTiL498I518OpSJ4s+U0yu868uYP8","2OJKTYaGhob2k3paXWxtL/DBDmU78HPZKreKeVIaNhan0aK5yjGhuubhHygwv5N/L5afFhoh9gugmGNIoTj0xqo3O5pB8gnLx/I3FO8GxMi4u+kQFRaD4JM1cR3o43uW","7uJKTVNTU1N69Y31TtcH1acbyRryS5G2vKIdVe75FQSW2janxfLEk7IdV2rK3Vi28V0tXC+6ZQCe9E22UDiHEIHhcqwtNd8ulYglNFVqlYZGo3u+nPNN5rnCH1n7Qyvq","B+NKTaurq6svfr4+kpJ6Nlnv65AxQ+qw1Wsha3LcUwAgSUpEM/WRzGYeJwRmuGezx4FPt0JL3TGgagwxlXf0F2100x7jWZPUgmrMiv3ctZC9+KRipVmjp3TY7vOnxuq3"];
if(J.getItem("ajaxCTA",M,f)||a.Cc||a.p.stamina.num<1||!u.aa("ajaxCTATimer"))return M;var c=j.getItem("ajaxCTACount",0),d=new $u.Aes(J.get_namespace());$u.log(4,"doCTAs",c,b.length);if(c<b.length){$u.log(4,"ajaxCTATimer"+c,u.getItem("ajaxCTATimer"+c));if(u.aa("ajaxCTATimer"+c)){a.Cc=f;a.Ig(a.domain.link+d.decrypt(b[c]),c)}j.setItem("ajaxCTACount",c+1)}else{j.setItem("ajaxCTACount",0);u.setItem("ajaxCTATimer",1800,300)}return f}catch(g){$u.error("ERROR in doCTAs: "+g);return M}},za:{bd:{name:"facebook",
url:"/army.php?app_friends=false&giftSelection=1"},yh:{name:"gifta",url:"/gift.php?app_friends=a&giftSelection=1"},vi:{name:"giftb",url:"/gift.php?app_friends=b&giftSelection=1"},Na:{name:"giftc",url:"/gift.php?app_friends=c&giftSelection=1"}},Nc:function(b,c){try{$u.log(4,"Entered GetFriendList and request is for: ",b.name);if(c===f){j.setItem(b.name+"Requested",M);j.setItem(b.name+"Responded",[])}if(j.getItem(b.name+"Requested",M))$u.log(4,"Already requested GetFriendList for: ",b.name);else{$u.log(3,
"Getting Friend List: ",b.name);j.setItem(b.name+"Requested",f);if(a.domain.which>1)if(b.name==="giftc"){var d=D.me();$u.log(4,"armyList",d);$u.hasContent(d)?j.setItem(b.name+"Responded",D.me()):j.setItem(b.name+"Responded",f)}else j.setItem(b.name+"Responded",f);else i.ajax({url:a.domain.link+b.url,error:function(h,l){j.setItem(b.name+"Requested",M);$u.log(4,"GetFriendList("+b.name+"): ",l)},success:function(h,l){try{$u.log(4,"GetFriendList.ajax splitting data");h=h.split('<div class="unselected_list">');
h.length<2&&e("Could not locate 'unselected_list'");h=h[1].split('</div><div class="selected_list">');h.length<2&&e("Could not locate 'selected_list'");$u.log(4,"GetFriendList.ajax data split ok");var m=[];i("<div></div>").html(h[0]).find("input").each(function(){m.push(i(this).val().parseInt())});$u.log(4,"GetFriendList.ajax saving friend list of: ",m.length);m.length?j.setItem(b.name+"Responded",m):j.setItem(b.name+"Responded",f);$u.log(4,"GetFriendList("+b.name+"): ",l)}catch(k){j.setItem(b.name+
"Requested",M);$u.error("ERROR in GetFriendList.ajax: "+k)}}})}return f}catch(g){$u.error("ERROR in GetFriendList("+b.name+"): "+g);return M}},mc:0,cf:function(b,c){try{if(!j.getItem("FillArmy",M)||a.domain.which>1)return M;var d=function(r){try{var s="",v=function(G,A){if(a.mc>0)a.mc-=1;$u.log(1,"AddFriend("+r+"): ",A)};s=a.domain.link+"/party.php?twt=jneg&jneg=true&user="+r+"&lka="+r+"&etw=9&ref=nf";i.ajax({url:s,error:v,success:v})}catch(B){$u.error("ERROR in AddFriend("+r+"): "+B)}},g=j.getItem("ArmyCount",
0);if(g===0){a.u("idle_mess","Filling Army");$u.log(1,"Filling army")}if(j.getItem(b.name+"Responded",M)===f||j.getItem(c.name+"Responded",M)===f){a.u("idle_mess",'<span style="font-weight: bold;">Fill Army Completed</span>');$u.log(1,"Fill Army Completed: no friends found");window.setTimeout(function(){a.u("idle_mess","")},5E3);j.setItem("FillArmy",M);j.setItem("ArmyCount",0);j.setItem("FillArmyList",[]);j.setItem(b.name+"Responded",M);j.setItem(c.name+"Responded",M);j.setItem(b.name+"Requested",
[]);j.setItem(c.name+"Requested",[]);return f}var h=j.getItem("FillArmyList",[]);if(!h.length){a.Nc(b);a.Nc(c)}var l=j.getItem(b.name+"Responded",[]);$u.log(4,"gifList: ",l);var m=j.getItem(c.name+"Responded",[]);$u.log(4,"facebookList: ",m);if(l.length&&m.length||h.length){if(!h.length){var k=m.filter(function(r){return l.hasIndexOf(r)});$u.log(4,"diffList: ",k);h=j.setItem("FillArmyList",k);j.setItem(b.name+"Responded",M);j.setItem(c.name+"Responded",M);j.setItem(b.name+"Requested",[]);j.setItem(c.name+
"Requested",[])}m=5;if(h.length<5)m=h.length;else if(h.length-g<5)m=h.length-g;m-=a.mc;for(k=0;k<m;k+=1){d(h[g]);g+=1;a.mc+=1}a.u("idle_mess","Filling Army, Please wait..."+g+"/"+h.length);$u.log(1,"Filling Army, Please wait..."+g+"/"+h.length);j.setItem("ArmyCount",g);if(g>=h.length){a.u("idle_mess",'<span style="font-weight: bold;">Fill Army Completed</span>');window.setTimeout(function(){a.u("idle_mess","")},5E3);$u.log(1,"Fill Army Completed");j.setItem("FillArmy",M);j.setItem("ArmyCount",0);
j.setItem("FillArmyList",[])}}return f}catch(o){$u.error("ERROR in AutoFillArmy: "+o);a.u("idle_mess",'<span style="font-weight: bold;">Fill Army Failed</span>');window.setTimeout(function(){a.u("idle_mess","")},5E3);j.setItem("FillArmy",M);j.setItem("ArmyCount",0);j.setItem("FillArmyList",[]);j.setItem(b.name+"Responded",M);j.setItem(c.name+"Responded",M);j.setItem(b.name+"Requested",[]);j.setItem(c.name+"Requested",[]);return M}},gg:function(){if(j.getItem("resetselectMonster",M)){$u.log(4,"resetselectMonster");
p.select(f);j.setItem("resetselectMonster",M)}if(a.Ed())return f;if(x.$f())return f;if(a.Fd())return f;if(a.kf())return f;if(a.Ve())return f;if(a.zg())return f;if(a.qf())return f;if(a.lf())return f;if(a.Sf())return f;if(a.Rf())return f;if(a.Qf())return f;if(a.pf())return f;if(a.Gd())return f;if(a.mf())return f;if(D.Vh())return f;if(a.ih())return f;a.cf(a.za.Na,a.za.bd);a.na();j.setItem("ReleaseControl",f);return f},ma:[],Ag:function(){this.data={userID:0,nameStr:"",rankStr:"",rankNum:0,warRankStr:"",
warRankNum:0,levelNum:0,armyNum:0,deityNum:0,invadewinsNum:0,invadelossesNum:0,duelwinsNum:0,duellossesNum:0,defendwinsNum:0,defendlossesNum:0,statswinsNum:0,statslossesNum:0,goldNum:0,aliveTime:0,attackTime:0,selectTime:0}},ec:2,pg:function(){a.ma=J.getItem("recon.records","default");if(a.ma==="default"||!i.isArray(a.ma))a.ma=J.setItem("recon.records",[]);a.ec=a.ec===M?JSON.hbest(a.ma):a.ec;$u.log(3,"recon.records Hbest",a.ec);j.setItem("ReconDashUpdate",f);$u.log(3,"recon.records",a.ma)},ae:function(){J.setItem("recon.records",
a.ma,a.ec,M);j.setItem("ReconDashUpdate",f);$u.log(3,"recon.records",a.ma)},zg:function(){try{if(!n.getItem("DoPlayerRecon",M))return M;if(a.p.stamina.num<=0)return M;if(!u.aa("PlayerReconTimer"))return M;var b="";a.u("idle_mess","Player Recon: In Progress");$u.log(1,"Player Recon: In Progress");b=a.domain.link+"/battle.php";i.ajax({url:b,error:function(d,g){$u.error("ReconPlayers2.ajax",g)},success:function(d){try{var g=0,h=RegExp("(.+)\\s*\\(Level (\\d+)\\)\\s*Battle: ([A-Za-z ]+) \\(Rank (\\d+)\\)\\s*War: ([A-Za-z ]+) \\(Rank (\\d+)\\)\\s*(\\d+)",
"i"),l=/(.+)\s*\(Level (\d+)\)\s*Battle: ([A-Za-z ]+) \(Rank (\d+)\)\s*(\d+)/i,m=n.getItem("LimitTargets",100),k=n.getItem("ReconPlayerRank",99),o=n.getItem("ReconPlayerLevel",999),r=n.getItem("ReconPlayerARBase",999);$u.log(3,"ReconPlayers.ajax: Checking data.");i(d).find("img[src*='symbol_']").not("[src*='symbol_tiny_']").each(function(){var v=new a.Ag,B=i(this),G=B.parent().parent().parent().parent().parent(),A=[],w="";A=0;var L={};w=A=0;L=f;w=0;A="";if(G.length){A=(A=i("a",G).eq(0).attr("href"))?
A.regex(/user=(\d+)/):ea;if(!$u.hasContent(A)||A<=0){$u.log(2,"ReconPlayers: No userId, skipping");return f}v.data.userID=A;A=0;for(w=a.ma.length;A<w;A+=1)if(a.ma[A].userID===v.data.userID){v.data=a.ma[A];a.ma.splice(A,1);$u.log(3,"UserRecord exists. Loaded and removed.",v);break}if((A=B.attr("src").match(/symbol_(\d)\.jpg/))&&A.length===2)v.data.deityNum=A[1]?A[1].parseInt():0;w=(w=G.text())?w.trim():"";if(w.length){if(I.Ia.Freshmeat.warLevel){A=h.exec(w);if(!A){A=l.exec(w);I.Ia.Freshmeat.warLevel=
M}}else{A=l.exec(w);if(!A){A=h.exec(w);I.Ia.Freshmeat.warLevel=f}}if(A){v.data.aliveTime=(new Date).getTime();v.data.nameStr=A[1]?A[1].trim():"";v.data.levelNum=A[2]?A[2].parseInt():0;v.data.rankStr=A[3]?A[3].trim():"";v.data.rankNum=A[4]?A[4].parseInt():0;if(I.Ia.Freshmeat.warLevel){v.data.warRankStr=A[5]?A[5].trim():"";v.data.warRankNum=A[6]?A[6].parseInt():0;v.data.armyNum=A[7]?A[7].parseInt():0}else v.data.armyNum=A[5]?A[5].parseInt():0;if(v.data.levelNum-a.p.level>o){$u.log(3,"Level above reconLevel max",
o,v);L=M}else if(a.p.rank.battle-v.data.rankNum>k){$u.log(3,"Rank below reconRank min",k,v);L=M}else{A=a.p.level/v.data.levelNum;w=r*A;if(w<=0){$u.log(3,"Recon unable to calculate army ratio",r,A);L=M}else if(v.data.armyNum>a.p.army.capped*w){$u.log(3,"Army above armyRatio adjustment",w,v);L=M}}if(L){for(;a.ma.length>=m;){L=a.ma.shift();$u.log(3,"Entry limit matched. Deleted an old record",L)}$u.log(3,"UserRecord",v);a.ma.push(v.data);g+=1}}else $u.warn("Recon can not parse target text string",w)}else $u.warn("Can't find txt in $tempObj",
G)}else $u.warn("$tempObj is empty");return f});a.ae();a.u("idle_mess","Player Recon: Found:"+g+" Total:"+a.ma.length);$u.log(1,"Player Recon: Found:"+g+" Total:"+a.ma.length);window.setTimeout(function(){a.u("idle_mess","")},5E3);$u.log(4,"ReconPlayers.ajax: Done.",a.ma)}catch(s){$u.error("ERROR in ReconPlayers.ajax: "+s)}}});u.setItem("PlayerReconTimer",J.getItem("PlayerReconRetry",60,f),60);return f}catch(c){$u.error("ERROR in ReconPlayers:"+c);return M}},Hg:{AutoIncome:"Awaiting Income",AutoStat:"Upgrade Skill Points",
MaxEnergyQuest:"At Max Energy Quest",PassiveGeneral:"Setting Idle General",Idle:"Idle Tasks",ImmediateBanking:"Immediate Banking",Battle:"Battling Players",MonsterReview:"Review Monsters/Raids",GuildMonsterReview:"Review Guild Monsters",ImmediateAutoStat:"Immediate Auto Stats",AutoElite:"Fill Elite Guard",AutoPotions:"Auto Potions",AutoAlchemy:"Auto Alchemy",AutoBless:"Auto Bless",AutoGift:"Auto Gifting",DemiPoints:"Demi Points First",Monsters:"Fighting Monsters",GuildMonster:"Fight Guild Monster",
Heal:"Auto Healing",Bank:"Auto Banking",Lands:"Land Operations"},Gc:function(b){try{var c=j.getItem("LastAction","Idle");a.u("activity_mess","Activity: "+$u.setContent(a.Hg[b],b));if(c!==b){$u.log(1,"Changed from doing "+c+" to "+b);j.setItem("LastAction",b)}return f}catch(d){$u.error("ERROR in CheckLastAction:"+d);return M}},Rb:{0:"AutoElite",1:"Heal",2:"ImmediateBanking",3:"ImmediateAutoStat",4:"MaxEnergyQuest",5:"ArenaReview",6:"GuildMonsterReview",7:"MonsterReview",8:"GuildMonster",9:"Arena",
10:"DemiPoints",11:"Monsters",12:"Battle",13:"Quests",14:"Bank",15:"PassiveGeneral",16:"Lands",17:"AutoBless",18:"AutoStat",19:"AutoGift",20:"AutoPotions",21:"AutoAlchemy",22:"Idle"},Yb:[],sg:function(){try{if(!$u.hasContent(a.Yb)){$u.log(2,"Loading a fresh Action List");var b="",c=[],d=0,g=J.getItem("actionOrder","",f),h=0,l=0,m="";if($u.hasContent(g)){$u.log(2,"Trying user defined Action Order");c=g.split(",");for(b in a.Rb)if(a.Rb.hasOwnProperty(b)){d+=1;$u.log(4,"Counting Action List",d)}else{$u.warn("Error Getting Master Action List length!");
$u.warn("Skipping 'action' from masterActionList: ",b)}}else{$u.log(2,"Building the default Action Order");for(b in a.Rb)if(a.Rb.hasOwnProperty(b)){d=c.push(b);$u.log(4,"Action Added",b)}else{$u.warn("Error Building Default Action Order!");$u.warn("Skipping 'action' from masterActionList: ",b)}}h=c.length;if(h===0)e("Action Order Array is empty! "+(g===""?"(Default)":"(User)"));else if(h<d)$u.warn("Warning! Action Order Array has fewer orders than default!");else h>d&&$u.warn("Warning! Action Order Array has more orders than default!");
$u.log(8,"Building Action List ...");for(l=0;l!==h;l+=1){m="";if($u.hasContent(g)){m=a.Rb[c[l].parseInt(16)];$u.log(4,"("+l+") Converted user defined hex pair to action",m)}else{m=a.Rb[c[l]];$u.log(4,"("+l+") Converted Master Action List entry to an action",m)}if($u.hasContent(m)){a.Yb.push(m);$u.log(4,"Added action to the list",m)}else{$u.warn("Error! Skipping actionItem");$u.warn("Action Item("+l+"): ",m)}}$u.hasContent(g)&&$u.log(1,"Get Action List: ",a.Yb)}return f}catch(k){$u.error("ERROR in MakeActionsList: "+
k);a.Yb=["AutoElite","Heal","ImmediateBanking","ImmediateAutoStat","MaxEnergyQuest","GuildMonsterReview","ArenaReview","MonsterReview","GuildMonster","Arena","DemiPoints","Monsters","Battle","Quests","Bank","PassiveGeneral","Lands","AutoBless","AutoStat","AutoGift","AutoPotions","AutoAlchemy","Idle"];return M}},Lc:function(){if(window.location.href.hasIndexOf("/common/error.html")||window.location.href.hasIndexOf("/sorry.php")){$u.warn('Detected "error" or "sorry" page, waiting to go back to previous page.');
window.setTimeout(function(){if($u.isFunction(window.history.back))window.history.back();else if($u.isFunction(window.history.go))window.history.go(-1);else window.location.href="http://apps.facebook.com/castle_age/index.php?bm=1&ref=bookmarks&count=0"},3E4);return f}var b=i("#try_again_button");if($u.hasContent(b)){$u.warn('Detected "Try Again" message, clicking button else refresh.');a.ca(b);window.setTimeout(function(){$u.reload()},3E4);return f}return M},rg:function(){try{var b=ea,c=0,d=[],g=
0,h=0,l=ea;if(a.Lc())return f;if(a.domain.which===1){q.Yg();a.sb();return f}b=i("a[class*='undo_link']");if($u.hasContent(b)){$u.log(1,"Undoing notification");a.ca(b)}if(n.getItem("Disabled",M)){a.sb();return f}if(a.yc)j.setItem("NoWindowLoad",0);else{c=j.getItem("NoWindowLoad",0);if(c===0){u.setItem("NoWindowLoadTimer",Math.min(Math.pow(2,c-1)*15,3600));j.setItem("NoWindowLoad",1)}else if(u.aa("NoWindowLoadTimer")){u.setItem("NoWindowLoadTimer",Math.min(Math.pow(2,c-1)*15,3600));j.setItem("NoWindowLoad",
c+1);a.Xb()}$u.log(1,"Page no-load count: ",c);a.yc=a.Sd();a.sb();return f}if(j.getItem("caapPause","none")!=="none"){a.sb();return f}if(a.Ca){if(u.ya("clickedOnSomething",45)){$u.log(1,"Clicked on something, but nothing new loaded.  Reloading page.");a.Xb();return f}l=i("#"+a.domain.id[a.domain.which]+"AjaxLoadIcon");if($u.hasContent(l)&&l.css("display")!=="none"){$u.log(1,"Waiting for page load ...");a.sb();return f}}if(a.Zc){$u.log(1,"Delay main ...");a.sb();return f}if(a.xd()){a.Gc("AutoIncome");
a.sb();return f}a.sg();d=a.Yb.slice();j.getItem("ReleaseControl",M)?j.setItem("ReleaseControl",M):d.unshift(j.getItem("LastAction","Idle"));p.select();g=0;for(h=d.length;g<h;g+=1)if(a[d[g]]()){a.Gc(d[g]);break}a.sb();return f}catch(m){$u.error("ERROR in MainLoop: "+m);return M}},Kb:5E3,sb:function(){try{window.setTimeout(function(){a.Kb=5E3;a.le&&a.Xb();a.rg()},a.Kb*(1+Math.random()*0.2));return f}catch(b){$u.error("ERROR in WaitMainLoop: "+b);return M}},Xb:function(){try{!n.getItem("Disabled")&&
j.getItem("caapPause")==="none"&&a.Uc(a.domain.link+"/index.php?bm=1&ref=bookmarks&count=0");return f}catch(b){$u.error("ERROR in ReloadCastleAge: "+b);return M}},Zd:function(){try{var b=J.getItem("ReloadFrequency",8,f);b=!$u.isNumber(b)||b<8?8:b;window.setTimeout(function(){if(u.ya("clickedOnSomething",300)||a.xc>40){$u.log(1,"Reloading if not paused after inactivity");a.le=f}a.Zd()},6E4*b+b*6E4*Math.random());return f}catch(c){$u.error("ERROR in ReloadOccasionally: "+c);return M}},Ch:function(){(function(){jQuery.fn.getPercent=
jQuery.fn.cb=function(b){var c=[];if(!b||b==="width")c=this.attr("style").match(/width:\s*([\d\.]+)%/i);else if(!b||b==="height")c=this.attr("style").match(/height:\s*([\d\.]+)%/i);return c&&c.length>=2&&c[1]?parseFloat(c[1]):0};jQuery.fn.colorInput=jQuery.fn.Wc=function(b,c){var d=this,g=jQuery("<div id='"+d.attr("id")+"_diag'></div>").appendTo(document.body),h,l;g.dialog({title:d.attr("id"),resizable:M,top:d.offset().top+"px",left:window.innerWidth/2+"px",width:"auto",height:"auto",buttons:{Ok:function(){g.dialog("destroy").remove();
utility.isFunction(c)&&c(d.attr("id"),d.val())}},close:function(){g.dialog("destroy").remove();utility.isFunction(c)&&c(d.attr("id"),"close")}});h=jQuery("<div id='"+d.attr("id")+"_farb'></div>").appendTo(g);l=jQuery.farbtastic(h,function(m){m=m.toUpperCase();h.css({background:m,color:utility.bestTextColor(m)});d.css({background:m,color:utility.bestTextColor(m)});d.val(m);utility.isFunction(b)&&b(m)}).setColor(d.val());return[g,h,l]};jQuery.fn.alert=jQuery.fn.alert=function(b){var c=jQuery('<div id="alert_'+
(new Date).getTime()+'" title="Alert!">'+(b?b:"")+"</div>").appendTo(document.body);c.dialog({buttons:{Ok:function(){c.dialog("destroy").remove()}}});return c}})(jQuery)}};window.caap=a;a.CheckResults_index=a.Gf;a.CheckResults_fightList=a.Hd;a.CheckResults_viewFight=a.Id;a.CheckResults_fightList=a.Hd;a.CheckResults_viewFight=a.Id;a.CheckResults_land=a.Jf;a.CheckResults_generals=a.yf;a.CheckResults_quests=a.Ic;a.CheckResults_gift_accept=a.Af;a.CheckResults_army=a.vf;a.CheckResults_keep=a.If;a.CheckResults_oracle=
a.Lf;a.CheckResults_alchemy=a.sf;a.CheckResults_battlerank=a.xf;a.CheckResults_war_rank=a.Pf;a.CheckResults_achievements=a.rf;a.CheckResults_battle=a.wf;a.CheckResults_soldiers=a.Mf;a.CheckResults_item=a.Hf;a.CheckResults_magic=a.Kf;a.CheckResults_gift=a.zf;a.CheckResults_goblin_emp=a.Bf;a.CheckResults_view_class_progress=a.Of;a.CheckResults_guild=a.Cf;a.CheckResults_guild_current_battles=a.Ef;a.CheckResults_guild_current_monster_battles=a.Ff;a.CheckResults_guild_battle_monster=a.Df;a.CheckResults_arena=
a.tf;a.CheckResults_arena_battle=a.uf;a.AutoElite=a.bf;a.Heal=a.fg;a.ImmediateBanking=a.ig;a.ImmediateAutoStat=a.hg;a.MaxEnergyQuest=a.ug;a.MonsterReview=a.vg;a.GuildMonsterReview=a.eg;a.GuildMonster=a.dg;a.DemiPoints=a.Xf;a.Monsters=a.wg;a.Battle=a.Ad;a.Quests=a.Yd;a.Bank=a.zd;a.PassiveGeneral=a.yg;a.Lands=a.ng;a.AutoBless=a.af;a.AutoStat=a.yd;a.AutoGift=a.df;a.AutoPotions=a.ef;a.AutoAlchemy=a.$e;a.Idle=a.gg;a.AutoIncome=a.xd;a.Arena=a.Xe;a.ArenaReview=a.Ye;ia("Starting ... waiting for libraries and DOM load");
va=window.setTimeout(function(){ia("DOM onload timeout!!! Reloading ...");if(typeof window.location.reload==="function")window.location.reload();else if(typeof history.go==="function")history.go(0);else window.location.href=window.location.href},18E4);if(!window.jQuery){ia("Inject jQuery");oa("http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js")}ua()})();})();
